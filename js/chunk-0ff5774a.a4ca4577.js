(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ff5774a"],{4997:function(e,t,a){},"5ff8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-card",{directives:[{name:"show",rawName:"v-show",value:!e.showDetail,expression:"!showDetail"}],attrs:{shadow:"never"}},[a("el-row",{staticClass:"d-row"},[a("el-button",{attrs:{type:"info",plain:e.readState!==e.messageReadStateObj.all.code,size:"small"},on:{click:function(t){return e.changeMessageReadState(e.messageReadStateObj.all.code)}}},[e._v("全部消息")]),a("el-button",{attrs:{type:"info",plain:e.readState!==e.messageReadStateObj.unread.code,size:"small"},on:{click:function(t){return e.changeMessageReadState(e.messageReadStateObj.unread.code)}}},[e._v("未读消息"),e.unReadCount>0?a("span",[e._v("("+e._s(e.unReadCount)+")")]):e._e()]),a("el-button",{attrs:{type:"info",plain:e.readState!==e.messageReadStateObj.readed.code,size:"small"},on:{click:function(t){return e.changeMessageReadState(e.messageReadStateObj.readed.code)}}},[e._v("已读消息")])],1),a("el-row",[a("el-table",{ref:"msgTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.data,height:"480px"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30"}}),a("el-table-column",{attrs:{width:"20"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.isRead?a("span",{staticClass:"d-unread-state"},[e._v("●")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"标题内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"d-msg-title",class:[0===t.row.isRead?"d-unread-msg":"d-read-msg"],attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.setMsgDetail(t.row.id)}}},[a("span",[e._v(e._s(t.row.title))])])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"提交时间",width:"200"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"200"}})],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{float:"left"}},[a("el-checkbox",{staticStyle:{"margin-left":"14px"},attrs:{disabled:!e.tableData.data.length},on:{change:e.changeDownCheck},model:{value:e.downCheckAll,callback:function(t){e.downCheckAll=t},expression:"downCheckAll"}}),a("el-button",{attrs:{disabled:!e.selectMsgIdList.length,size:"small"},on:{click:e.delByIds}},[e._v("删除")]),e.readState!==e.messageReadStateObj.readed.code?a("el-button",{attrs:{disabled:!e.selectMsgIdList.length,size:"small"},on:{click:e.readedByIds}},[e._v("标记已读")]):e._e(),e.readState!==e.messageReadStateObj.readed.code?a("el-button",{attrs:{size:"small"},on:{click:e.readedAll}},[e._v("全部已读")]):e._e(),a("el-button",{attrs:{size:"small"},on:{click:e.delAll}},[e._v("全部删除")])],1),a("div",{staticStyle:{float:"right"}},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"current-change":e.changePageNo,"size-change":e.changePageSize,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)])],1)],1),a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showDetail,expression:"showDetail"}],attrs:{shadow:"never"}},[a("el-row",{staticClass:"d-row"},[a("el-button",{attrs:{size:"small",icon:"el-icon-back"},on:{click:e.backToList}},[e._v("返回列表")])],1),a("el-row",[a("div",{staticClass:"d-msg-detail-top"},[a("h4",[e._v(e._s(e.msgDetail.title))]),a("div",[e._v(e._s(e.msgDetail.createTime))])]),a("div",{staticClass:"d-msg-detail-content",domProps:{innerHTML:e._s(e.msgDetail.content)}})])],1)],1)},s=[],i=(a("6b54"),a("d0c8")),l={all:{code:-1,name:"全部消息"},unread:{code:0,name:"未读消息"},readed:{code:1,name:"已读消息"}},o={name:"DMessage",data:function(){return{messageReadStateObj:l,readState:l.all.code,currentPage:1,pageSize:10,tableData:{total:10,data:[]},selectMsgIdList:[],unReadCount:0,downCheckAll:!1,showDetail:!1,msgDetail:{}}},methods:{changeMessageReadState:function(e){this.readState=e,this.setTableData()},handleSelectionChange:function(e){this.selectMsgIdList=e.map(function(e){return e.id}),this.downCheckAll=e.length===this.tableData.data.length},changePageNo:function(){this.setTableData()},changePageSize:function(){this.setTableData()},setTableData:function(){var e=this;this.downCheckAll=!1,Object(i["f"])({isRead:this.readState,pageSize:this.pageSize,pageNo:this.currentPage}).then(function(t){e.tableData=t.data}).catch(this.$handleError)},setUnReadCount:function(){var e=this;Object(i["e"])().then(function(t){e.unReadCount=t.data}).catch(this.$handleError)},changeDownCheck:function(){this.downCheckAll?this.$refs.msgTable.toggleAllSelection():this.$refs.msgTable.clearSelection()},readedAll:function(){var e=this;Object(i["g"])().then(function(t){e.setTableData(),e.setUnReadCount()}).catch(this.$handleError)},readedByIds:function(){var e=this;Object(i["h"])({idList:this.selectMsgIdList.toString()}).then(function(t){e.setTableData(),e.setUnReadCount()}).catch(this.$handleError)},delAll:function(){var e=this,t="确认删除所有消息吗?";e.$confirmInfo(t,function(){Object(i["b"])().then(function(t){e.setTableData(),e.setUnReadCount()}).catch(e.$handleError)})},delByIds:function(){var e=this,t='确认删除选中的<strong class="d-error">"'+e.selectMsgIdList.length+'"</strong>条消息吗?';e.$confirmInfo(t,function(){Object(i["c"])({idList:e.selectMsgIdList.toString()}).then(function(t){e.setTableData(),e.setUnReadCount()}).catch(e.$handleError)})},setMsgDetail:function(e){var t=this;this.showDetail=!0,this.msgDetail={},Object(i["d"])({id:e}).then(function(e){t.msgDetail=e.data}).catch(this.$handleError)},backToList:function(){this.showDetail=!1,this.msgDetail={},this.setTableData(),this.setUnReadCount()},init:function(){this.$route.query.id?this.setMsgDetail(this.$route.query.id):(this.showDetail=!1,this.msgDetail={},this.setTableData(),this.setUnReadCount())}},watch:{"$route.fullPath":function(){this.init()}},mounted:function(){this.init()}},c=o,d=(a("7556"),a("2877")),r=Object(d["a"])(c,n,s,!1,null,null,null);t["default"]=r.exports},7556:function(e,t,a){"use strict";var n=a("4997"),s=a.n(n);s.a}}]);
//# sourceMappingURL=chunk-0ff5774a.a4ca4577.js.map