{"version":3,"sources":["webpack:///./src/pages/message/onsite/index.vue?45ef","webpack:///src/pages/message/onsite/index.vue","webpack:///./src/pages/message/onsite/index.vue?b1d5","webpack:///./src/pages/message/onsite/index.vue","webpack:///./src/pages/message/onsite/index.vue?69a8"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","showDetail","expression","attrs","shadow","staticClass","type","plain","readState","messageReadStateObj","all","code","size","on","click","$event","changeMessageReadState","_v","unread","unReadCount","_s","_e","readed","ref","staticStyle","width","data","tableData","height","selection-change","handleSelectionChange","scopedSlots","_u","key","fn","scope","row","isRead","label","class","href","setMsgDetail","id","title","prop","margin-top","float","margin-left","disabled","length","change","changeDownCheck","model","callback","$$v","downCheckAll","selectMsgIdList","delByIds","readedByIds","readedAll","delAll","background","current-page","currentPage","page-sizes","page-size","pageSize","layout","total","current-change","changePageNo","size-change","changePageSize","update:currentPage","update:current-page","update:pageSize","update:page-size","icon","backToList","msgDetail","createTime","domProps","innerHTML","content","staticRenderFns","MessageReadState","onsitevue_type_script_lang_js_","methods","setTableData","val","map","r","_this","Object","onsite","pageNo","then","res","catch","$handleError","setUnReadCount","_this2","$refs","msgTable","toggleAllSelection","clearSelection","_this3","_this4","idList","toString","vue","msg","$confirmInfo","_this5","init","$route","query","watch","$route.fullPath","mounted","message_onsitevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-0ff5774a.2164760c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('DPageContent',[_c('el-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showDetail),expression:\"!showDetail\"}],attrs:{\"shadow\":\"never\"}},[_c('el-row',{staticClass:\"d-row\"},[_c('el-button',{attrs:{\"type\":\"info\",\"plain\":_vm.readState !== _vm.messageReadStateObj.all.code,\"size\":\"small\"},on:{\"click\":function($event){return _vm.changeMessageReadState(_vm.messageReadStateObj.all.code)}}},[_vm._v(\"全部消息\")]),_c('el-button',{attrs:{\"type\":\"info\",\"plain\":_vm.readState !== _vm.messageReadStateObj.unread.code,\"size\":\"small\"},on:{\"click\":function($event){return _vm.changeMessageReadState(_vm.messageReadStateObj.unread.code)}}},[_vm._v(\"未读消息\"),(_vm.unReadCount > 0)?_c('span',[_vm._v(\"(\"+_vm._s(_vm.unReadCount)+\")\")]):_vm._e()]),_c('el-button',{attrs:{\"type\":\"info\",\"plain\":_vm.readState !== _vm.messageReadStateObj.readed.code,\"size\":\"small\"},on:{\"click\":function($event){return _vm.changeMessageReadState(_vm.messageReadStateObj.readed.code)}}},[_vm._v(\"已读消息\")])],1),_c('el-row',[_c('el-table',{ref:\"msgTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData.data,\"height\":\"480px\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"30\"}}),_c('el-table-column',{attrs:{\"width\":\"20\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.isRead === 0)?_c('span',{staticClass:\"d-unread-state\"},[_vm._v(\"●\")]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"label\":\"标题内容\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('a',{staticClass:\"d-msg-title\",class:[scope.row.isRead === 0 ? 'd-unread-msg' : 'd-read-msg'],attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.setMsgDetail(scope.row.id)}}},[_c('span',[_vm._v(_vm._s(scope.row.title))])])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"提交时间\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"类型\",\"width\":\"200\"}})],1),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('div',{staticStyle:{\"float\":\"left\"}},[_c('el-checkbox',{staticStyle:{\"margin-left\":\"14px\"},attrs:{\"disabled\":!_vm.tableData.data.length},on:{\"change\":_vm.changeDownCheck},model:{value:(_vm.downCheckAll),callback:function ($$v) {_vm.downCheckAll=$$v},expression:\"downCheckAll\"}}),_c('el-button',{attrs:{\"disabled\":!_vm.selectMsgIdList.length,\"size\":\"small\"},on:{\"click\":_vm.delByIds}},[_vm._v(\"删除\")]),(_vm.readState !== _vm.messageReadStateObj.readed.code)?_c('el-button',{attrs:{\"disabled\":!_vm.selectMsgIdList.length,\"size\":\"small\"},on:{\"click\":_vm.readedByIds}},[_vm._v(\"标记已读\")]):_vm._e(),(_vm.readState !== _vm.messageReadStateObj.readed.code)?_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.readedAll}},[_vm._v(\"全部已读\")]):_vm._e(),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.delAll}},[_vm._v(\"全部删除\")])],1),_c('div',{staticStyle:{\"float\":\"right\"}},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.tableData.total},on:{\"current-change\":_vm.changePageNo,\"size-change\":_vm.changePageSize,\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"update:pageSize\":function($event){_vm.pageSize=$event},\"update:page-size\":function($event){_vm.pageSize=$event}}})],1)])],1)],1),_c('el-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDetail),expression:\"showDetail\"}],attrs:{\"shadow\":\"never\"}},[_c('el-row',{staticClass:\"d-row\"},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-back\"},on:{\"click\":_vm.backToList}},[_vm._v(\"返回列表\")])],1),_c('el-row',[_c('div',{staticClass:\"d-msg-detail-top\"},[_c('h4',[_vm._v(_vm._s(_vm.msgDetail.title))]),_c('div',[_vm._v(_vm._s(_vm.msgDetail.createTime))])]),_c('div',{staticClass:\"d-msg-detail-content\",domProps:{\"innerHTML\":_vm._s(_vm.msgDetail.content)}})])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <DPageContent>\r\n        <el-card v-show=\"!showDetail\" shadow=\"never\">\r\n            <el-row class=\"d-row\">\r\n                <el-button type=\"info\" :plain=\"readState !== messageReadStateObj.all.code\" size=\"small\" @click=\"changeMessageReadState(messageReadStateObj.all.code)\">全部消息</el-button>\r\n                <el-button type=\"info\" :plain=\"readState !== messageReadStateObj.unread.code\" size=\"small\" @click=\"changeMessageReadState(messageReadStateObj.unread.code)\">未读消息<span v-if=\"unReadCount > 0\">({{unReadCount}})</span></el-button>\r\n                <el-button type=\"info\" :plain=\"readState !== messageReadStateObj.readed.code\" size=\"small\" @click=\"changeMessageReadState(messageReadStateObj.readed.code)\">已读消息</el-button>\r\n            </el-row>\r\n            <el-row>\r\n                <el-table\r\n                        ref=\"msgTable\"\r\n                        :data=\"tableData.data\"\r\n                        height=\"480px\"\r\n                        style=\"width: 100%\"\r\n                        @selection-change=\"handleSelectionChange\">\r\n                    <el-table-column\r\n                            type=\"selection\"\r\n                            width=\"30\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            width=\"20\">\r\n                        <template slot-scope=\"scope\">\r\n                            <span class=\"d-unread-state\" v-if=\"scope.row.isRead === 0\">●</span>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            label=\"标题内容\">\r\n                        <template slot-scope=\"scope\">\r\n                            <a href=\"javascript:void(0)\"\r\n                               class=\"d-msg-title\"\r\n                               :class=\"[scope.row.isRead === 0 ? 'd-unread-msg' : 'd-read-msg']\"\r\n                               @click=\"setMsgDetail(scope.row.id)\"><span>{{ scope.row.title }}</span></a>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"createTime\"\r\n                            label=\"提交时间\"\r\n                            width=\"200\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"type\"\r\n                            label=\"类型\"\r\n                            width=\"200\">\r\n                    </el-table-column>\r\n                </el-table>\r\n                <div style=\"margin-top: 20px\">\r\n                    <div style=\"float: left\">\r\n                        <el-checkbox style=\"margin-left: 14px\" :disabled=\"!tableData.data.length\" v-model=\"downCheckAll\" @change=\"changeDownCheck\"></el-checkbox>\r\n                        <el-button :disabled=\"!selectMsgIdList.length\" size=\"small\" @click=\"delByIds\">删除</el-button>\r\n                        <el-button v-if=\"readState !== messageReadStateObj.readed.code\" :disabled=\"!selectMsgIdList.length\" size=\"small\" @click=\"readedByIds\">标记已读</el-button>\r\n                        <el-button v-if=\"readState !== messageReadStateObj.readed.code\" size=\"small\" @click=\"readedAll\">全部已读</el-button>\r\n                        <el-button size=\"small\" @click=\"delAll\">全部删除</el-button>\r\n                    </div>\r\n                    <div style=\"float: right;\">\r\n                        <el-pagination\r\n                                @current-change=\"changePageNo\"\r\n                                @size-change=\"changePageSize\"\r\n                                background\r\n                                :current-page.sync=\"currentPage\"\r\n                                :page-sizes=\"[10, 20, 50, 100]\"\r\n                                :page-size.sync=\"pageSize\"\r\n                                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                                :total=\"tableData.total\">\r\n                        </el-pagination>\r\n                    </div>\r\n                </div>\r\n            </el-row>\r\n        </el-card>\r\n        <el-card v-show=\"showDetail\" shadow=\"never\">\r\n            <el-row class=\"d-row\">\r\n                <el-button size=\"small\" icon=\"el-icon-back\" @click=\"backToList\">返回列表</el-button>\r\n            </el-row>\r\n            <el-row>\r\n                <div class=\"d-msg-detail-top\">\r\n                    <h4>{{msgDetail.title}}</h4>\r\n                    <div>{{msgDetail.createTime}}</div>\r\n                </div>\r\n                <div class=\"d-msg-detail-content\" v-html=\"msgDetail.content\"></div>\r\n            </el-row>\r\n        </el-card>\r\n    </DPageContent>\r\n</template>\r\n\r\n<script>\r\n    import {\r\n        listMsg,\r\n        getMsg,\r\n        getUnReadCount,\r\n        markReadedAll,\r\n        markReadedByIds,\r\n        deleteAll,\r\n        deleteByIds\r\n    } from '../../../services/message/onsite'\r\n    const MessageReadState = {\r\n        all: {\r\n            code: -1,\r\n            name: '全部消息'\r\n        },\r\n        unread: {\r\n            code: 0,\r\n            name: '未读消息'\r\n        },\r\n        readed: {\r\n            code: 1,\r\n            name: '已读消息'\r\n        }\r\n    }\r\n    export default {\r\n        name: 'DMessage',\r\n        data () {\r\n            return {\r\n                messageReadStateObj: MessageReadState,\r\n                readState: MessageReadState.all.code,\r\n                currentPage: 1,\r\n                pageSize: 10,\r\n                tableData: {\r\n                    total: 10,\r\n                    data: []\r\n                },\r\n                selectMsgIdList: [],\r\n                unReadCount: 0,\r\n                downCheckAll: false,\r\n                showDetail: false,\r\n                msgDetail: {}\r\n            }\r\n        },\r\n        methods: {\r\n            changeMessageReadState (readState) {\r\n                this.readState = readState\r\n                this.setTableData()\r\n            },\r\n            handleSelectionChange (val) {\r\n                this.selectMsgIdList = val.map(r => r.id)\r\n                this.downCheckAll = val.length === this.tableData.data.length\r\n            },\r\n            changePageNo () {\r\n                this.setTableData()\r\n            },\r\n            changePageSize () {\r\n                this.setTableData()\r\n            },\r\n            setTableData () {\r\n                this.downCheckAll = false\r\n                listMsg({\r\n                    isRead: this.readState,\r\n                    pageSize: this.pageSize,\r\n                    pageNo: this.currentPage\r\n                }).then(res => {\r\n                    this.tableData = res.data\r\n                }).catch(this.$handleError)\r\n            },\r\n            setUnReadCount () {\r\n                getUnReadCount().then(res => {\r\n                    this.unReadCount = res.data\r\n                }).catch(this.$handleError)\r\n            },\r\n            changeDownCheck () {\r\n                if (this.downCheckAll) {\r\n                    this.$refs.msgTable.toggleAllSelection()\r\n                } else {\r\n                    this.$refs.msgTable.clearSelection()\r\n                }\r\n            },\r\n            readedAll () {\r\n                markReadedAll().then(res => {\r\n                    this.setTableData()\r\n                    this.setUnReadCount()\r\n                }).catch(this.$handleError)\r\n            },\r\n            readedByIds () {\r\n                markReadedByIds({\r\n                    idList: this.selectMsgIdList.toString()\r\n                }).then(res => {\r\n                    this.setTableData()\r\n                    this.setUnReadCount()\r\n                }).catch(this.$handleError)\r\n            },\r\n            delAll () {\r\n                let vue = this\r\n                let msg = '确认删除所有消息吗?'\r\n                vue.$confirmInfo(msg, function () {\r\n                    deleteAll().then(res => {\r\n                        vue.setTableData()\r\n                        vue.setUnReadCount()\r\n                    }).catch(vue.$handleError)\r\n                })\r\n            },\r\n            delByIds () {\r\n                let vue = this\r\n                let msg = '确认删除选中的<strong class=\"d-error\">\"' + vue.selectMsgIdList.length + '\"</strong>条消息吗?'\r\n                vue.$confirmInfo(msg, function () {\r\n                    deleteByIds({\r\n                        idList: vue.selectMsgIdList.toString()\r\n                    }).then(res => {\r\n                        vue.setTableData()\r\n                        vue.setUnReadCount()\r\n                    }).catch(vue.$handleError)\r\n                })\r\n            },\r\n            setMsgDetail (id) {\r\n                this.showDetail = true\r\n                this.msgDetail = {}\r\n                getMsg({\r\n                    id: id\r\n                }).then(res => {\r\n                    this.msgDetail = res.data\r\n                }).catch(this.$handleError)\r\n            },\r\n            backToList () {\r\n                this.showDetail = false\r\n                this.msgDetail = {}\r\n                this.setTableData()\r\n                this.setUnReadCount()\r\n            },\r\n            init () {\r\n                if (this.$route.query.id) {\r\n                    this.setMsgDetail(this.$route.query.id)\r\n                } else {\r\n                    this.showDetail = false\r\n                    this.msgDetail = {}\r\n                    this.setTableData()\r\n                    this.setUnReadCount()\r\n                }\r\n            }\r\n        },\r\n        watch: {\r\n           '$route.fullPath': function () {\r\n               this.init()\r\n           } \r\n        },\r\n        mounted () {\r\n            this.init()\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .d-unread-state {\r\n        font-size: 16px;\r\n        color: #428bca;\r\n    }\r\n\r\n    .d-unread-msg {\r\n        color: #000;\r\n    }\r\n\r\n    .d-read-msg {\r\n        color: #999;\r\n    }\r\n\r\n    .d-msg-title:hover {\r\n        text-decoration: underline;\r\n        color: #409EFF;\r\n    }\r\n\r\n    .d-msg-detail-top {\r\n        text-align: center;\r\n        line-height: 30px;\r\n        margin-bottom: 20px;\r\n        border-bottom: 1px solid #dcdfe6;\r\n    }\r\n\r\n    .d-msg-detail-top h4 {\r\n        font-size: 18px;\r\n    }\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=07f96f12&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}