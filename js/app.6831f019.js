(function(e){function t(t){for(var i,o,s=t[0],d=t[1],l=t[2],m=0,u=[];m<s.length;m++)o=s[m],r[o]&&u.push(r[o][0]),r[o]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(e[i]=d[i]);c&&c(t);while(u.length)u.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,s=1;s<a.length;s++){var d=a[s];0!==r[d]&&(i=!1)}i&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},r={app:0},n=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=d;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var i=a("64a9"),r=a.n(i);r.a},"068f":function(e,t,a){"use strict";var i=a("1b69"),r=a.n(i);r.a},"09ac":function(e,t,a){},"0a37":function(e,t,a){"use strict";var i=a("218f"),r=a.n(i);r.a},1360:function(e,t,a){},1485:function(e,t,a){},"1b69":function(e,t,a){},"218f":function(e,t,a){},2881:function(e,t,a){},"2e05":function(e,t,a){"use strict";var i=a("daef"),r=a.n(i);r.a},"2f20":function(e,t,a){},"30d3":function(e,t,a){"use strict";var i=a("5090"),r=a.n(i);r.a},"33c7":function(e,t,a){"use strict";var i=a("9cb3"),r=a.n(i);r.a},"372d":function(e,t,a){"use strict";var i=a("9df5"),r=a.n(i);r.a},"3a8a":function(e,t,a){"use strict";var i=a("98f8"),r=a.n(i);r.a},"3b1c":function(e,t,a){"use strict";var i=a("b179"),r=a.n(i);r.a},"3d53":function(e,t,a){},4849:function(e,t,a){"use strict";var i=a("3d53"),r=a.n(i);r.a},4997:function(e,t,a){},"49d2":function(e,t,a){},5002:function(e,t,a){"use strict";var i=a("8f56"),r=a.n(i);r.a},5090:function(e,t,a){},5158:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),r=a("5c96"),n=a.n(r),o=(a("0fae"),a("1f54"),a("acc7"),a("1360"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:e.heightStyle,attrs:{id:"app"}},[a("router-view")],1)}),s=[],d=(a("6762"),a("2fdb"),{name:"app",components:{},data:function(){return{paths:["/sso/login","/"]}},computed:{heightStyle:function(){var e=this.$route.path;return!window.HeadNav||this.paths.includes(e)?{height:"100%"}:{height:"calc(100% - 31px)"}}},watch:{"$route.path":function(){this.toggleShowHeadNav()}},methods:{toggleShowHeadNav:function(){if(window.HeadNav){var e=this.$route.path;this.paths.includes(e)?window.HeadNav.hide():window.HeadNav.show()}}},mounted:function(){this.toggleShowHeadNav()}}),l=d,c=(a("034f"),a("2877")),m=Object(c["a"])(l,o,s,!1,null,null,null),u=m.exports,p=a("8c4f"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-arch d-box-middle"},[a("el-row",{staticStyle:{width:"80%"}},[a("el-col",{attrs:{span:18}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",[e._v("应用层")])]),a("el-col",{attrs:{span:16}},[a("div",{on:{click:function(t){return e.$router.push("/data-visual")}}},[e._v("数据可视化")])])],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",[e._v("数据服务层")])]),a("el-col",{attrs:{span:16}},[a("div",[e._v("数据服务")]),a("div",[e._v("数据服务存储")])])],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",[e._v("计算层")])]),a("el-col",{attrs:{span:16}},[a("div",[e._v("离线")]),a("div",[e._v("实时")])])],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",[e._v("\n                        数据接入层\n                    ")])]),a("el-col",{attrs:{span:16}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"base-service",on:{click:function(t){return e.$router.push("/auth")}}},[e._v("权限中心")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"base-service",on:{click:function(t){return e.$router.push("/message")}}},[e._v("消息中心")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"base-service",on:{click:function(t){return e.$router.push("/search")}}},[e._v("搜索中心")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"base-service"},[e._v("文档中心")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"base-service",on:{click:function(t){return e.$router.push("/sso/login")}}},[e._v("单点登录")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"base-service"},[e._v("导航中心")])])],1)],1)],1)],1)},f=[],b={name:"DHome"},y=b,g=(a("c9c1"),Object(c["a"])(y,h,f,!1,null,null,null)),C=g.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DLayout",{attrs:{logo:"权限中心"}},[a("DMenuNav",{attrs:{data:e.menuList}})],1)},D=[],I={name:"DAuth",data:function(){return{menuList:[{name:"控制台",path:"/auth/console"},{name:"用户",path:"/auth/user"},{name:"角色",path:"/auth/role"},{name:"资源",path:"/auth/resource"}]}}},w=I,T=Object(c["a"])(w,v,D,!1,null,null,null),N=T.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-row",{staticClass:"d-row"},[a("el-col",[a("el-card",{attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"d-card-title"},[e._v("项目:    ")]),a("el-select",{staticStyle:{width:"180px"},attrs:{size:"small"},on:{change:e.changeProj},model:{value:e.proj.selectId,callback:function(t){e.$set(e.proj,"selectId",t)},expression:"proj.selectId"}},e._l(e.proj.selectListData,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),1),a("div",{staticStyle:{float:"right"}},[a("el-button",{staticClass:"d-card-btn",attrs:{type:"text"},on:{click:e.openAddProjForm}},[e._v("\n                            创建新项目\n                        ")]),e.proj.selectId?a("el-button",{staticClass:"d-card-btn",attrs:{type:"text"},on:{click:e.openUpdateProjForm}},[e._v("\n                            编辑项目\n                        ")]):e._e(),e.proj.selectId?a("el-button",{staticClass:"d-card-btn",attrs:{type:"text"},on:{click:e.deleteProjById}},[e._v("\n                            删除项目\n                        ")]):e._e()],1)],1),a("DDetail",{attrs:{data:e.proj.detailData,columns:e.proj.detailColumns}}),a("el-dialog",{attrs:{title:e.proj.formTitle,visible:e.proj.formVisible},on:{"update:visible":function(t){return e.$set(e.proj,"formVisible",t)}}},[a("el-form",{ref:"projForm",attrs:{model:e.proj.formData,rules:e.proj.formRules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.proj.formData.name,callback:function(t){e.$set(e.proj.formData,"name","string"===typeof t?t.trim():t)},expression:"proj.formData.name"}})],1),a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"字母开头,只能包含字母、数字、下划线"},model:{value:e.proj.formData.code,callback:function(t){e.$set(e.proj.formData,"code","string"===typeof t?t.trim():t)},expression:"proj.formData.code"}})],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitProjForm,cancel:function(t){e.proj.formVisible=!1}},slot:"footer"})],1)],1)],1)],1),a("el-row",[a("el-col",[a("el-card",{attrs:{shadow:"never"}},[a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"功能资源",name:"static"}},[a("StaticResource",{attrs:{projId:e.proj.selectId}})],1),a("el-tab-pane",{attrs:{label:"数据资源大类",name:"data"}},[a("DataResource",{attrs:{projId:e.proj.selectId}})],1),a("el-tab-pane",{attrs:{label:"白名单资源",name:"white"}},[a("WhiteListResource",{attrs:{projId:e.proj.selectId}})],1)],1)],1)],1)],1)],1)},x=[],k=(a("7f7f"),a("bc3a")),L=a.n(k),R=a("4328"),j=a.n(R),F={messageInfo:function(e){fu.$message(e)},messageSuccess:function(e){fu.$message({message:e,type:"success"})},messageWarn:function(e){fu.$message({message:e,type:"warning"})},messageError:function(e){fu.$message.error(e)},notifyInfo:function(e){fu.$notify.info({title:"消息",message:e})},notifySuccess:function(e){fu.$notify({title:"成功",message:e,type:"success"})},notifyWarn:function(e){fu.$notify({title:"警告",message:e,type:"warning"})},notifyError:function(e){fu.$notify.error({title:"错误",message:e})},alertInfo:function(e){fu.$msgbox({title:"提示",message:e,type:"info"})},alertSuccess:function(e){fu.$msgbox({title:"成功",message:e,type:"success"})},alertWarn:function(e){fu.$msgbox({title:"警告",message:e,type:"warning"})},alertError:function(e){fu.$msgbox({title:"错误",message:e,type:"error"})},confirmInfo:function(e,t,a){a||(a=function(){}),fu.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"warning"}).then(function(){t()}).catch(function(){a()})},goBack:function(){fu.$router.back()}},S={auth:{fe:"",be:""},message:{fe:"",be:""},commonNav:{fe:"",be:""},search:{fe:"",be:""},ssoLogin:{fe:"",be:""},dataMap:{fe:"",be:""},dataVisual:{fe:"",be:""},sso:{fe:"",be:""}};S.auth={fe:"https://xiaoping1988.github.io",be:"https://xiaoping1988.github.io"},S.message={fe:"https://xiaoping1988.github.io",be:"https://xiaoping1988.github.io"},S.commonNav={fe:"https://xiaoping1988.github.io",be:"https://xiaoping1988.github.io"},S.search={fe:"https://xiaoping1988.github.io",be:"https://xiaoping1988.github.io"},S.ssoLogin={fe:"https://xiaoping1988.github.io",be:"https://xiaoping1988.github.io"},S.dataMap={fe:"https://xiaoping1988.github.io",be:"https://xiaoping1988.github.io"},S.dataVisual={fe:"https://xiaoping1988.github.io",be:"https://xiaoping1988.github.io"},S.sso={fe:"https://xiaoping1988.github.io",be:"https://xiaoping1988.github.io"};var E=S,A=function(e,t){return L.a.get(e+j.a.stringify(t)).then(function(e){return e.data})},M=function(e,t){return L.a.post(e,t).then(function(e){return e.data})};L.a.defaults.baseURL="",L.a.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),L.a.interceptors.response.use(function(e){return e.data&&200===e.status?0===e.data.code?e:400===e.data.code||401===e.data.code?(window.location.href=E.ssoLogin.fe+"/#/login?redirect="+encodeURIComponent(window.location.href),Promise.reject(e.data)):(F.notifyWarn(e.data.msg),Promise.reject(e.data)):(F.notifyWarn(e.statusText),Promise.reject(new Error(e)))},function(e){return F.notifyWarn(e.message),Promise.reject(e)});L.a;var O=E.auth.be+"/api/proj",z={listProjectAuth:{api:O+"/list-auth",name:"查询有权限的项目列表"},getProjectById:{api:O+"/get-by-id",name:"根据ID查询项目详情"},saveOrUpdateProj:{api:O+"/save-or-update",name:"新增或者修改项目基本信息"},deleteProj:{api:O+"/delete",name:"删除一个项目"}},$=function(){return A(z.listProjectAuth.api)},V=function(e){return M(z.getProjectById.api,e)},B=function(e){return M(z.saveOrUpdateProj.api,e)},P=function(e){return M(z.deleteProj.api,e)},U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{staticStyle:{"border-right":"1px solid #e8e8e8","padding-right":"10px"},attrs:{span:8}},[a("el-button",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.openAddRootStaticResourceForm}},[e._v("创建根资源")]),a("el-tree",{ref:"resourceTree",attrs:{"default-expand-all":"","highlight-current":"","node-key":"id",data:e.treeData},on:{"current-change":e.changeStaticResource}})],1),a("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:16}},[e.selectId?a("el-card",{attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"d-card-title"},[e._v("资源")]),a("div",{staticStyle:{float:"right"}},[a("el-button",{staticClass:"d-card-btn",attrs:{type:"text"},on:{click:e.openAddChildStaticResourceForm}},[e._v("\n                        添加子资源\n                    ")]),a("el-button",{staticClass:"d-card-btn",attrs:{type:"text"},on:{click:e.openUpdateStaticResourceForm}},[e._v("\n                        编辑\n                    ")]),a("el-button",{staticClass:"d-card-btn",attrs:{type:"text"},on:{click:e.deleteStaticResourceById}},[e._v("\n                        删除\n                    ")])],1)]),a("DDetail",{attrs:{data:e.detailData,columns:e.detailColumns,col:4}}),a("div",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("后端API")]),a("div",{staticClass:"d-desclist-index-detail"},e._l(e.detailData.beApiList,function(t){return a("div",{key:t.id},[a("span",[e._v(e._s(t.name)+"：")]),a("span",[e._v(e._s(t.url))])])}),0)])],1):e._e()],1),a("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t}}},[a("el-form",{ref:"staticResourceForm",attrs:{model:e.formData,rules:e.formRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-radio-group",{model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},[a("el-radio",{attrs:{label:"MENU"}},[e._v("MENU")]),a("el-radio",{attrs:{label:"BUTTON"}},[e._v("BUTTON")])],1)],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name","string"===typeof t?t.trim():t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"字母开头,只能包含字母、数字、下划线"},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code","string"===typeof t?t.trim():t)},expression:"formData.code"}})],1),a("el-form-item",{attrs:{label:"前端路由",prop:"feRouter"}},[a("el-input",{model:{value:e.formData.feRouter,callback:function(t){e.$set(e.formData,"feRouter","string"===typeof t?t.trim():t)},expression:"formData.feRouter"}})],1),a("el-form-item",{attrs:{label:"后端API"}},[e._l(e.formData.beApiList,function(t,i){return a("el-row",{key:i},[a("el-col",{attrs:{span:10}},[a("el-form-item",{staticStyle:{"margin-bottom":"22px"},attrs:{"label-width":"0px",prop:"beApiList."+i+".name",rules:[{required:!0,message:"接口名称不能为空",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"接口名称"},model:{value:t.name,callback:function(a){e.$set(t,"name","string"===typeof a?a.trim():a)},expression:"api.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{"margin-bottom":"22px"},attrs:{"label-width":"0px",prop:"beApiList."+i+".url",rules:[{required:!0,message:"接口路径不能为空",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"接口路径"},model:{value:t.url,callback:function(a){e.$set(t,"url","string"===typeof a?a.trim():a)},expression:"api.url"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"medium",icon:"el-icon-minus"},on:{click:function(t){return e.deleteStaticResourceApi(i)}}})],1)],1)}),a("el-row",[a("el-col",[a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:e.addStaticResourceApi}})],1)],1)],2)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitStaticResourceForm,cancel:function(t){e.formVisible=!1}},slot:"footer"})],1)],1)},H=[],Y=(a("c5f6"),E.auth.be+"/api/resource"),G={listStaticResourceTree:{api:Y+"/static-tree",name:"获取某个项目的功能资源树"},getStaticResource:{api:Y+"/get-static",name:"获取某个功能资源详情"},saveOrUpdateStaticResource:{api:Y+"/save-or-update-static",name:"新增或者某个功能资源"},deleteStaticResource:{api:Y+"/delete-static",name:"删除某个功能资源"},listDataResource:{api:Y+"/list-data",name:"获取某个项目的数据资源大类列表"},saveOrUpdateDataResource:{api:Y+"/save-or-update-data",name:"新增或者某个数据资源大类"},deleteDataResource:{api:Y+"/delete-data",name:"删除某个数据资源大类"},listWhiteListResource:{api:Y+"/list-white",name:"获取某个项目的白名单资源"},saveOrUpdateWhiteListResource:{api:Y+"/save-or-update-white",name:"新增或者某个白名单资源"},deleteWhiteListResource:{api:Y+"/delete-white",name:"删除某个白名单资源"}},W=function(e){return M(G.listStaticResourceTree.api,e)},X=function(e){return M(G.getStaticResource.api,e)},J=function(e){return M(G.saveOrUpdateStaticResource.api,e)},K=function(e){return M(G.deleteStaticResource.api,e)},q=function(e){return M(G.listDataResource.api,e)},Z=function(e){return M(G.saveOrUpdateDataResource.api,e)},Q=function(e){return M(G.deleteDataResource.api,e)},ee=function(e){return M(G.listWhiteListResource.api,e)},te=function(e){return M(G.saveOrUpdateWhiteListResource.api,e)},ae=function(e){return M(G.deleteWhiteListResource.api,e)},ie={name:"StaticResource",props:{projId:Number},data:function(){return{treeData:[],selectId:0,detailData:{},detailColumns:[{key:"name",title:"名称"},{key:"code",title:"编码"},{key:"type",title:"类型"},{key:"feRouter",title:"前端路由"}],formVisible:!1,formTitle:"",formData:{name:"",code:"",feRouter:"",type:"MENU",pid:0,beApiList:[]},formRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{type:"string",pattern:/^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$/,message:"字母开头,只能包含字母、数字、下划线",trigger:"blur"}]}}},methods:{setStaticResourceTreeData:function(e){var t=this;if(!t.projId)return t.treeData=[],t.selectId=null,void(t.detailData={});W({projId:t.projId}).then(function(a){t.treeData=a.data,t.treeData&&t.treeData.length?(t.selectId=e||t.treeData[0].id,t.setStaticResourceDetail()):(t.selectId=null,t.detailData={}),t.$nextTick(function(){t.$refs.resourceTree.setCurrentKey(t.selectId)})}).catch(this.$handleError)},setStaticResourceDetail:function(){var e=this;X({id:this.selectId}).then(function(t){e.detailData=t.data}).catch(this.$handleError)},changeStaticResource:function(e,t){this.selectId=e.id,this.setStaticResourceDetail()},openAddRootStaticResourceForm:function(){this.formData={pid:0,name:"",code:"",type:"MENU",feRouter:"",beApiList:[]},this.formTitle="创建根资源",this.formVisible=!0},openAddChildStaticResourceForm:function(){this.formData={pid:this.selectId,name:"",code:"",type:"MENU",feRouter:"",beApiList:[]},this.formTitle="添加子资源",this.formVisible=!0},openUpdateStaticResourceForm:function(){this.formData={id:this.detailData.id,pid:this.detailData.pid,name:this.detailData.name,code:this.detailData.code,type:this.detailData.type,feRouter:this.detailData.feRouter,beApiList:this.detailData.beApiList},this.formTitle="编辑资源",this.formVisible=!0},addStaticResourceApi:function(){this.formData.beApiList.push({name:"",url:""})},deleteStaticResourceApi:function(e){this.formData.beApiList.splice(e,1)},submitStaticResourceForm:function(){var e=this;this.$refs["staticResourceForm"].validate(function(t){if(!t)return!1;J({projId:e.projId,id:e.formData.id,pid:e.formData.pid,name:e.formData.name,code:e.formData.code,type:e.formData.type,feRouter:e.formData.feRouter,beApiList:JSON.stringify(e.formData.beApiList)}).then(function(t){e.formVisible=!1,e.formData.id?e.setStaticResourceDetail():e.setStaticResourceTreeData(t.data)}).catch(e.$handleError)})},deleteStaticResourceById:function(){var e='确认删除资源<strong class="d-error">"'+this.detailData.name+'"</strong>吗?',t=this;t.$confirmInfo(e,function(){K({id:t.selectId}).then(function(e){t.setStaticResourceTreeData()}).catch(t.$handleError)})}},watch:{projId:function(){this.setStaticResourceTreeData()}}},re=ie,ne=Object(c["a"])(re,U,H,!1,null,null,null),oe=ne.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.openAddForm}},[e._v("新增")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"名称",width:"220"}}),a("el-table-column",{attrs:{prop:"code",label:"编码",width:"220"}}),a("el-table-column",{attrs:{prop:"url",label:"数据接口"}}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.openUpdateForm(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteDataResourceById(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t}}},[a("el-form",{ref:"dataResourceForm",attrs:{model:e.formData,rules:e.formRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name","string"===typeof t?t.trim():t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"字母开头,只能包含字母、数字、下划线"},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code","string"===typeof t?t.trim():t)},expression:"formData.code"}})],1),a("el-form-item",{attrs:{label:"数据接口",prop:"url"}},[a("el-input",{model:{value:e.formData.url,callback:function(t){e.$set(e.formData,"url","string"===typeof t?t.trim():t)},expression:"formData.url"}})],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitDataResourceForm,cancel:function(t){e.formVisible=!1}},slot:"footer"})],1)],1)},de=[],le={name:"DataResource",props:{projId:Number},data:function(){return{tableData:[],formVisible:!1,formTitle:"",formData:{name:"",code:"",url:""},formRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{required:!0,message:"请输入编码",trigger:"blur"},{type:"string",pattern:/^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$/,message:"字母开头,只能包含字母、数字、下划线",trigger:"blur"}],url:[{required:!0,message:"请输入数据接口",trigger:"blur"},{type:"url",message:"数据接口不规范",trigger:"blur"}]}}},methods:{setDataResourceTableData:function(){var e=this;this.projId?q({projId:this.projId}).then(function(t){e.tableData=t.data}).catch(this.$handleError):this.tableData=[]},openAddForm:function(){this.formData={name:"",code:"",url:""},this.formTitle="新增数据资源大类",this.formVisible=!0},openUpdateForm:function(e){this.formData={id:e.id,name:e.name,code:e.code,url:e.url},this.formTitle="编辑数据资源大类",this.formVisible=!0},submitDataResourceForm:function(){var e=this;this.$refs["dataResourceForm"].validate(function(t){if(!t)return!1;Z({projId:e.projId,id:e.formData.id,name:e.formData.name,code:e.formData.code,url:e.formData.url}).then(function(t){e.formVisible=!1,e.setDataResourceTableData()}).catch(e.$handleError)})},deleteDataResourceById:function(e){var t='确认删除数据资源大类<strong class="d-error">"'+e.name+'"</strong>吗?',a=this;a.$confirmInfo(t,function(){Q({id:e.id}).then(function(e){a.setDataResourceTableData()}).catch(a.$handleError)})}},watch:{projId:function(){this.setDataResourceTableData()}}},ce=le,me=Object(c["a"])(ce,se,de,!1,null,null,null),ue=me.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.openAddForm}},[e._v("新增")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"typeName",width:"220",label:"类型"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"220"}}),a("el-table-column",{attrs:{prop:"url",label:"URL"}}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.openUpdateForm(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteById(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:e.formTitle,visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t}}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.formRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-radio-group",{model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},[a("el-radio",{attrs:{label:1}},[e._v("后端")]),a("el-radio",{attrs:{label:2}},[e._v("前端")])],1)],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name","string"===typeof t?t.trim():t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"URL",prop:"url"}},[a("el-input",{model:{value:e.formData.url,callback:function(t){e.$set(e.formData,"url","string"===typeof t?t.trim():t)},expression:"formData.url"}})],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitForm,cancel:function(t){e.formVisible=!1}},slot:"footer"})],1)],1)},he=[],fe={name:"WhiteListResource",props:{projId:Number},data:function(){return{tableData:[],formVisible:!1,formTitle:"",formData:{name:"",type:1,url:""},formRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],url:[{required:!0,message:"请输入URL",trigger:"blur"}]}}},methods:{setTableData:function(){var e=this;this.projId?ee({projId:this.projId}).then(function(t){e.tableData=t.data}).catch(this.$handleError):this.tableData=[]},openAddForm:function(){this.formData={name:"",type:1,url:""},this.formTitle="新增白名单",this.formVisible=!0},openUpdateForm:function(e){this.formData={id:e.id,name:e.name,type:e.type,url:e.url},this.formTitle="编辑白名单",this.formVisible=!0},submitForm:function(){var e=this;this.$refs["formData"].validate(function(t){if(!t)return!1;te({projId:e.projId,id:e.formData.id,name:e.formData.name,type:e.formData.type,url:e.formData.url}).then(function(t){e.formVisible=!1,e.setTableData()}).catch(e.$handleError)})},deleteById:function(e){var t='确认删除白名单资源<strong class="d-error">"'+e.name+'"</strong>吗?',a=this;a.$confirmInfo(t,function(){ae({id:e.id}).then(function(e){a.setTableData()}).catch(a.$handleError)})}},watch:{projId:function(){this.setTableData()}}},be=fe,ye=Object(c["a"])(be,pe,he,!1,null,null,null),ge=ye.exports,Ce={name:"Resource",components:{StaticResource:oe,DataResource:ue,WhiteListResource:ge},data:function(){return{proj:{selectListData:[],selectId:0,detailData:{},detailColumns:[{key:"name",title:"名称"},{key:"creator",title:"创建人"},{key:"updator",title:"修改人"},{key:"code",title:"编码"},{key:"createTime",title:"创建时间"},{key:"updateTime",title:"修改时间"}],formVisible:!1,formTitle:"新建项目",formData:{name:"",code:""},formRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{required:!0,message:"请输入编码",trigger:"blur"},{type:"string",pattern:/^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$/,message:"字母开头,只能包含字母、数字、下划线",trigger:"blur"}]}},activeTab:"static"}},methods:{setProjSelectListData:function(){var e=this;$().then(function(t){e.proj.selectListData=t.data,e.proj.selectListData&&e.proj.selectListData.length?(e.proj.selectId=e.proj.selectListData[0].id,e.changeProj()):(e.proj.selectId=null,e.proj.detailData={})}).catch(this.$handleError)},changeProj:function(){this.setProjDetail()},setProjDetail:function(){var e=this;V({id:this.proj.selectId}).then(function(t){e.proj.detailData=t.data}).catch(this.$handleError)},openAddProjForm:function(){this.proj.formTitle="创建新项目",this.proj.formVisible=!0,this.proj.formData={name:"",code:""}},openUpdateProjForm:function(){this.proj.formTitle="编辑项目",this.proj.formVisible=!0,this.proj.formData={id:this.proj.detailData.id,name:this.proj.detailData.name,code:this.proj.detailData.code}},submitProjForm:function(){var e=this;this.$refs["projForm"].validate(function(t){if(!t)return!1;B(e.proj.formData).then(function(t){e.proj.formVisible=!1,e.proj.formData.id?e.setProjDetail():e.setProjSelectListData()}).catch(e.$handleError)})},deleteProjById:function(){var e='确认删除项目<strong class="d-error">"'+this.proj.detailData.name+'"</strong>吗?',t=this;t.$confirmInfo(e,function(){P({id:t.proj.selectId}).then(function(e){t.setProjSelectListData()}).catch(t.$handleError)})}},mounted:function(){this.setProjSelectListData()}},ve=Ce,De=Object(c["a"])(ve,_,x,!1,null,null,null),Ie=De.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-card",{attrs:{shadow:"never"}},[a("el-form",{ref:"searchForm",attrs:{inline:"",model:e.searchForm}},[a("el-form-item",{attrs:{prop:"projId"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{size:"small"},on:{change:e.changeProj},model:{value:e.searchForm.projId,callback:function(t){e.$set(e.searchForm,"projId",t)},expression:"searchForm.projId"}},e._l(e.projList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),1)],1),a("el-form-item",{attrs:{prop:"keyword"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-search",size:"small",clearable:"",placeholder:"请输入关键字搜索"},on:{change:e.searchRole},model:{value:e.searchForm.keyword,callback:function(t){e.$set(e.searchForm,"keyword","string"===typeof t?t.trim():t)},expression:"searchForm.keyword"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:e.openAddStaticRoleForm}},[e._v("创建功能角色")]),a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:function(t){return e.openAddDataRoleForm()}}},[e._v("创建数据角色")])],1)],1),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"名称",width:"200"}}),a("el-table-column",{attrs:{prop:"code",label:"编码",width:"220"}}),a("el-table-column",{attrs:{prop:"gradeName",width:"120",label:"等级"}}),a("el-table-column",{attrs:{prop:"typeName",width:"120",label:"类型"}}),a("el-table-column",{attrs:{prop:"operPrivilegeName",width:"100",label:"操作权限"}}),a("el-table-column",{attrs:{prop:"remark",label:"描述"}}),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.openGrantUserForm(t.row)}}},[e._v("授权用户")]),1!==t.row.grade?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.openGrantRoleAuthForm(t.row)}}},[e._v("配置权限")]):e._e(),1!==t.row.grade?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.openUpdateRoleBaseForm(t.row)}}},[e._v("编辑")]):e._e(),1!==t.row.grade?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.deleteById(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),a("el-dialog",{attrs:{title:"编辑基本信息",visible:e.updateRoleBaseFormVisible},on:{"update:visible":function(t){e.updateRoleBaseFormVisible=t}}},[a("el-form",{ref:"updateRoleBaseForm",attrs:{model:e.updateRoleBaseForm,rules:e.updateRoleBaseFormRule,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.updateRoleBaseForm.name,callback:function(t){e.$set(e.updateRoleBaseForm,"name","string"===typeof t?t.trim():t)},expression:"updateRoleBaseForm.name"}})],1),a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"字母开头,只能包含字母、数字、下划线"},model:{value:e.updateRoleBaseForm.code,callback:function(t){e.$set(e.updateRoleBaseForm,"code","string"===typeof t?t.trim():t)},expression:"updateRoleBaseForm.code"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{model:{value:e.updateRoleBaseForm.remark,callback:function(t){e.$set(e.updateRoleBaseForm,"remark","string"===typeof t?t.trim():t)},expression:"updateRoleBaseForm.remark"}})],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitRoleBaseForm,cancel:function(t){e.updateRoleBaseFormVisible=!1}},slot:"footer"})],1),a("el-dialog",{attrs:{title:"授权用户角色："+e.currentRole.name,visible:e.grantUserFormVisible},on:{"update:visible":function(t){e.grantUserFormVisible=t}}},[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-select",{staticStyle:{float:"right",width:"220px"},attrs:{filterable:"","reserve-keyword":"",multiple:"",remote:"",placeholder:"请输入用户名或姓名,搜索添加",size:"small","remote-method":e.searchUser},on:{change:e.selectUser},model:{value:e.userNameList,callback:function(t){e.userNameList=t},expression:"userNameList"}},e._l(e.searchUserList,function(t,i){return a("el-option",{key:t.userName,attrs:{label:t.userNameCn,value:t.userName}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.userNameCn)+"("+e._s(t.userName)+")")]),a("span",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"text",title:"添加用户",icon:"el-icon-plus"},on:{click:function(a){return e.addRoleUser(t,i)}}})],1)])}),1)],1),a("el-row",e._l(e.roleUserList,function(t,i){return a("el-col",{key:t.id,staticClass:"d-hover-btn",attrs:{span:6}},[a("span",[e._v(e._s(t.userNameCn)+"("+e._s(t.userName)+")")]),a("el-button",{attrs:{type:"text",title:"删除用户",icon:"el-icon-delete"},on:{click:function(a){return e.deleteRoleUserById(t.id,i)}}})],1)}),1)],1),a("el-dialog",{attrs:{title:"创建功能角色",top:"10px",visible:e.addStaticRoleFormVisible},on:{"update:visible":function(t){e.addStaticRoleFormVisible=t}}},[a("el-form",{ref:"staticRoleForm",attrs:{model:e.staticRoleForm,rules:e.staticRoleFormRule,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"项目"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:e.searchForm.projId,callback:function(t){e.$set(e.searchForm,"projId",t)},expression:"searchForm.projId"}},e._l(e.projList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),1)],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.staticRoleForm.name,callback:function(t){e.$set(e.staticRoleForm,"name","string"===typeof t?t.trim():t)},expression:"staticRoleForm.name"}})],1),a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"字母开头,只能包含字母、数字、下划线"},model:{value:e.staticRoleForm.code,callback:function(t){e.$set(e.staticRoleForm,"code","string"===typeof t?t.trim():t)},expression:"staticRoleForm.code"}},[a("template",{slot:"prepend"},[e._v(e._s(e.currentProj.code)+"_")])],2)],1),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{model:{value:e.staticRoleForm.remark,callback:function(t){e.$set(e.staticRoleForm,"remark","string"===typeof t?t.trim():t)},expression:"staticRoleForm.remark"}})],1),a("el-form-item",{attrs:{label:"角色等级",prop:"grade"}},[a("el-radio-group",{model:{value:e.staticRoleForm.grade,callback:function(t){e.$set(e.staticRoleForm,"grade",t)},expression:"staticRoleForm.grade"}},[a("el-radio",{attrs:{label:3}},[e._v("普通角色")]),a("el-radio",{attrs:{label:2}},[e._v("管理员角色")])],1)],1),a("el-form-item",{attrs:{label:"资源"}},[a("el-tree",{ref:"staticResourceTree",attrs:{"default-expand-all":"","show-checkbox":"","node-key":"id",data:e.staticResourceTreeData}})],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitStaticRoleForm,cancel:function(t){e.addStaticRoleFormVisible=!1}},slot:"footer"})],1),a("el-dialog",{attrs:{title:"配置权限",top:"10px",visible:e.grantStaticRoleAuthFormVisible},on:{"update:visible":function(t){e.grantStaticRoleAuthFormVisible=t}}},[a("el-form",{attrs:{model:e.grantStaticRoleAuthForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"功能角色"}},[a("span",{staticClass:"d-desclist-index-detail"},[e._v(e._s(e.currentRole.name))])]),a("el-form-item",{attrs:{label:"角色等级"}},[a("el-radio-group",{model:{value:e.grantStaticRoleAuthForm.grade,callback:function(t){e.$set(e.grantStaticRoleAuthForm,"grade",t)},expression:"grantStaticRoleAuthForm.grade"}},[a("el-radio",{attrs:{label:3}},[e._v("普通角色")]),a("el-radio",{attrs:{label:2}},[e._v("管理员角色")])],1)],1),a("el-form-item",{attrs:{label:"资源"}},[a("el-tree",{ref:"staticResourceTree2",attrs:{"default-expand-all":"","show-checkbox":"","node-key":"id",data:e.staticResourceTreeData,"default-checked-keys":e.grantStaticRoleAuthForm.resourceIdList}})],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitGrantStaticRoleAuthForm,cancel:function(t){e.grantStaticRoleAuthFormVisible=!1}},slot:"footer"})],1),a("el-dialog",{attrs:{title:"创建数据角色",top:"10px",visible:e.addDataRoleFormVisible},on:{"update:visible":function(t){e.addDataRoleFormVisible=t}}},[a("el-form",{ref:"addDataRoleForm",attrs:{model:e.addDataRoleForm,rules:e.addDataRoleFormRule,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"项目"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:e.searchForm.projId,callback:function(t){e.$set(e.searchForm,"projId",t)},expression:"searchForm.projId"}},e._l(e.projList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),1)],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.addDataRoleForm.name,callback:function(t){e.$set(e.addDataRoleForm,"name","string"===typeof t?t.trim():t)},expression:"addDataRoleForm.name"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{model:{value:e.addDataRoleForm.remark,callback:function(t){e.$set(e.addDataRoleForm,"remark","string"===typeof t?t.trim():t)},expression:"addDataRoleForm.remark"}})],1),a("el-form-item",{attrs:{label:"操作权限"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.addDataRoleForm.operPrivilege,callback:function(t){e.$set(e.addDataRoleForm,"operPrivilege",t)},expression:"addDataRoleForm.operPrivilege"}},e._l(e.dataRolePrivilege,function(e){return a("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})}),1)],1),e._l(e.dataResourceList,function(t){return a("el-form-item",{key:t.id,attrs:{label:t.name}},[a("el-tree",{ref:"dataResourceTree"+t.id,refInFor:!0,attrs:{"show-checkbox":"","node-key":"id",data:e.dataResourceTreeData[t.id]},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node;t.data;return a("span",{staticClass:"d-custom-tree-node"},[a("span",[e._v(e._s(i.label))])])}}],null,!0)})],1)}),null===e.dataResourceList||0===e.dataResourceList.length?a("el-form-item",[a("span",{staticClass:"d-desclist-index-detail"},[e._v("此项目暂未配置数据资源大类")])]):e._e()],2),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitAddDataRoleForm,cancel:function(t){e.addDataRoleFormVisible=!1}},slot:"footer"})],1),a("el-dialog",{attrs:{title:"配置权限",top:"10px",visible:e.grantDataRoleAuthFormVisible},on:{"update:visible":function(t){e.grantDataRoleAuthFormVisible=t}}},[a("el-form",{ref:"grantDataRoleAuthForm",attrs:{model:e.grantDataRoleAuthForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"数据角色"}},[a("span",{staticClass:"d-desclist-index-detail"},[e._v(e._s(e.currentRole.name))])]),a("el-form-item",{attrs:{label:"操作权限"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.grantDataRoleAuthForm.operPrivilege,callback:function(t){e.$set(e.grantDataRoleAuthForm,"operPrivilege",t)},expression:"grantDataRoleAuthForm.operPrivilege"}},e._l(e.dataRolePrivilege,function(e){return a("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})}),1)],1),e._l(e.dataResourceList,function(t){return a("el-form-item",{key:t.id,attrs:{label:t.name}},[a("el-tree",{ref:"dataResourceTreeGrant"+t.id,refInFor:!0,attrs:{"show-checkbox":"","node-key":"id","default-checked-keys":e.grantDataRoleAuthDefaultChecked[t.id],data:e.dataResourceTreeData[t.id]},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node;t.data;return a("span",{staticClass:"d-custom-tree-node"},[a("span",[e._v(e._s(i.label))])])}}],null,!0)})],1)}),null===e.dataResourceList||0===e.dataResourceList.length?a("el-form-item",[a("span",{staticClass:"d-desclist-index-detail"},[e._v("此项目暂未配置数据资源大类")])]):e._e()],2),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitGrantDataRoleAuthForm,cancel:function(t){e.grantDataRoleAuthFormVisible=!1}},slot:"footer"})],1)],1)},Te=[],Ne=(a("456d"),a("20d6"),a("6b54"),a("ac6a"),a("8615"),E.auth.be+"/api/user"),_e={searchUser:{api:Ne+"/search",name:"搜索用户"},getUserBase:{api:Ne+"/get-base",name:"获取一个用户的基本信息"},listUserRole:{api:Ne+"/list-role",name:"获取一个用户的角色权限"},listUserCity:{api:Ne+"/list-city",name:"获取一个用户的城市权限"},grantUserRole:{api:Ne+"/grant-role",name:"给用户授权角色"},grantUserCity:{api:Ne+"/grant-city",name:"给用户授权城市"}},xe=function(e){return M(_e.searchUser.api,e)},ke=function(e){return M(_e.getUserBase.api,e)},Le=function(e){return M(_e.listUserRole.api,e)},Re=function(e){return M(_e.listUserCity.api,e)},je=function(e){return M(_e.grantUserRole.api,e)},Fe=function(e){return M(_e.grantUserCity.api,e)},Se=E.auth.be+"/api/role",Ee={listRole:{api:Se+"/list",name:"获取某个项目的角色列表"},listProjRole:{api:Se+"/group-by-proj",name:"获取所有角色列表,根据项目分组"},addStaticRole:{api:Se+"/add-static",name:"新增一个功能角色"},addDataRole:{api:Se+"/add-data",name:"新增一个数据角色"},updateRoleBase:{api:Se+"/update-base",name:"修改角色的基本信息"},listStaticRoleResourceRelation:{api:Se+"/list-static-resource-relation",name:"获取某个功能角色的资源权限关系"},grantStaticRoleAuth:{api:Se+"/grant-auth-static",name:"给功能角色配置权限"},grantDataRoleAuth:{api:Se+"/grant-auth-data",name:"给数据角色配置权限"},deleteRole:{api:Se+"/delete",name:"删除一个角色"},listRoleUser:{api:Se+"/list-user",name:"获取拥有某个角色的所有用户"},addRoleUser:{api:Se+"/add-user",name:"给某个角色添加一个用户"},deleteRoleUser:{api:Se+"/delete-user",name:"给某个角色删除一个用户"},listDataRoleResourceRelation:{api:Se+"/list-data-resource-relation",name:"获取某个数据角色的资源权限关系"}},Ae={SUPER:{code:1,name:"超管角色"},ADMIN:{code:2,name:"管理员角色"},ORDINARY:{code:3,name:"普通角色"}},Me={STATIC:{code:1,name:"功能角色"},DATA:{code:2,name:"数据角色"}},Oe={READ_ONLY:{code:"READ_ONLY",name:"只读"},READ_WRITE:{code:"READ_WRITE",name:"读写"},CREATE_TABLE:{code:"CREATE_TABLE",name:"建表"},EXPORT:{code:"EXPORT",name:"导出"}},ze=function(e){return M(Ee.listRole.api,e)},$e=function(e){return M(Ee.listProjRole.api,e)},Ve=function(e){return M(Ee.addStaticRole.api,e)},Be=function(e){return M(Ee.addDataRole.api,e)},Pe=function(e){return M(Ee.updateRoleBase.api,e)},Ue=function(e){return M(Ee.listStaticRoleResourceRelation.api,e)},He=function(e){return M(Ee.grantStaticRoleAuth.api,e)},Ye=function(e){return M(Ee.grantDataRoleAuth.api,e)},Ge=function(e){return M(Ee.deleteRole.api,e)},We=function(e){return M(Ee.listRoleUser.api,e)},Xe=function(e){return M(Ee.addRoleUser.api,e)},Je=function(e){return M(Ee.deleteRoleUser.api,e)},Ke=function(e){return M(Ee.listDataRoleResourceRelation.api,e)},qe={name:"Role",data:function(){return{searchForm:{projId:null,keyword:""},projList:[],currentProj:{},roleList:[],tableData:[],addStaticRoleFormVisible:!1,staticRoleForm:{},staticRoleFormRule:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{type:"string",pattern:/^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$/,message:"字母开头,只能包含字母、数字、下划线",trigger:"blur"}]},staticResourceTreeData:null,updateRoleBaseFormVisible:!1,updateRoleBaseForm:{},updateRoleBaseFormRule:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{type:"string",pattern:/^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$/,message:"字母开头,只能包含字母、数字、下划线",trigger:"blur"}]},currentRole:{},grantUserFormVisible:!1,roleUserList:[],searchUserList:[],userNameList:[],grantStaticRoleAuthForm:{},grantStaticRoleAuthFormVisible:!1,staticRoleResourceRelations:[],addDataRoleFormVisible:!1,addDataRoleForm:{},addDataRoleFormRule:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},dataRolePrivilege:Object.values(Oe),dataResourceList:null,dataResourceTreeData:{},grantDataRoleAuthForm:{},grantDataRoleAuthFormVisible:!1,grantDataRoleAuthDefaultChecked:{},dataRoleResourceRelations:{}}},methods:{setProjList:function(){var e=this;$().then(function(t){e.projList=t.data,e.projList&&e.projList.length?(e.searchForm.projId=e.projList[0].id,e.changeProj()):(e.searchForm.projId=null,e.proj.detailData={})}).catch(this.$handleError)},changeProj:function(){var e=this;this.setRoleList(),this.staticResourceTreeData=null,this.dataResourceList=null,this.projList.forEach(function(t){t.id===e.searchForm.projId&&(e.currentProj=t)})},setRoleList:function(){var e=this;ze({projId:this.searchForm.projId}).then(function(t){e.roleList=t.data,e.searchRole()}).catch(this.$handleError)},searchRole:function(){var e=this;this.searchForm.keyword?this.tableData=this.roleList.filter(function(t){return t.code.includes(e.searchForm.keyword.toUpperCase())||t.name.includes(e.searchForm.keyword)||t.operPrivilegeName&&t.operPrivilegeName.includes(e.searchForm.keyword)||t.remark&&t.remark.includes(e.searchForm.keyword)}):this.tableData=this.roleList},openAddStaticRoleForm:function(){this.addStaticRoleFormVisible=!0,this.staticRoleForm={projId:this.searchForm.projId,name:"",code:"",remark:"",grade:3},this.setStaticResourceTreeData()},setStaticResourceTreeData:function(){var e=this;this.staticResourceTreeData||W({projId:this.searchForm.projId}).then(function(t){e.staticResourceTreeData=t.data}).catch(this.$handleError)},submitStaticRoleForm:function(){var e=this;this.$refs["staticRoleForm"].validate(function(t){if(!t)return!1;var a=JSON.parse(JSON.stringify(e.staticRoleForm));a.resourceIdList=e.$refs.staticResourceTree.getCheckedKeys().toString(),a.code=e.currentProj.code+"_"+a.code,Ve(a).then(function(t){e.addStaticRoleFormVisible=!1,e.setRoleList()}).catch(e.$handleError)})},openUpdateRoleBaseForm:function(e){this.updateRoleBaseForm={id:e.id,name:e.name,code:e.code,remark:e.remark},this.updateRoleBaseFormVisible=!0},submitRoleBaseForm:function(){var e=this;this.$refs["updateRoleBaseForm"].validate(function(t){if(!t)return!1;Pe(e.updateRoleBaseForm).then(function(t){e.updateRoleBaseFormVisible=!1,e.setRoleList()}).catch(e.$handleError)})},deleteById:function(e){var t='确认删除角色<strong class="d-error">"'+e.name+'"</strong>吗?',a=this;a.$confirmInfo(t,function(){Ge({id:e.id}).then(function(e){a.setRoleList()}).catch(a.$handleError)})},openGrantUserForm:function(e){this.currentRole=e,this.grantUserFormVisible=!0,this.setRoleUserList()},setRoleUserList:function(){var e=this;this.roleUserList=[],We({id:this.currentRole.id}).then(function(t){e.roleUserList=t.data}).catch(this.$handleError)},deleteRoleUserById:function(e,t){var a=this;Je({roleUserId:e}).then(function(e){a.roleUserList.splice(t,1)}).catch(this.$handleError)},searchUser:function(e){var t=this;e&&xe({keyword:e}).then(function(e){t.searchUserList=e.data.filter(function(e){var a=t.roleUserList.findIndex(function(t){return t.userName===e.userName});return-1===a})}).catch(this.$handleError)},addRoleUser:function(e,t){var a=this;Xe({roleId:this.currentRole.id,userName:e.userName,userNameCn:e.userNameCn}).then(function(i){a.roleUserList.unshift({id:i.data,userName:e.userName,userNameCn:e.userNameCn}),a.searchUserList.splice(t,1)}).catch(this.$handleError)},selectUser:function(){this.userNameList=[]},openGrantRoleAuthForm:function(e){this.currentRole=e,e.type===Me.STATIC.code?this.openGrantStaticRoleAuthForm():this.openGrantDataRoleAuthForm()},openGrantStaticRoleAuthForm:function(){this.grantStaticRoleAuthForm={grade:this.currentRole.grade,resourceIdList:[]},this.setStaticRoleResourceRelations(),this.setStaticResourceTreeData(),this.grantStaticRoleAuthFormVisible=!0},setStaticRoleResourceRelations:function(){var e=this;Ue({roleId:this.currentRole.id}).then(function(t){e.staticRoleResourceRelations=t.data,e.grantStaticRoleAuthForm.resourceIdList=t.data.map(function(e){return e.resourceId})}).catch(this.$handleError)},submitGrantStaticRoleAuthForm:function(){var e=this,t=this.$refs.staticResourceTree2.getCheckedKeys(),a=[];t.forEach(function(t){-1===e.staticRoleResourceRelations.findIndex(function(e){return e.resourceId===t})&&a.push(t)});var i=[];this.staticRoleResourceRelations.forEach(function(e){t.includes(e.resourceId)||i.push(e.id)}),He({roleId:this.currentRole.id,grade:this.grantStaticRoleAuthForm.grade,addResourceIdList:a.toString(),delRelationIdList:i.toString()}).then(function(t){e.grantStaticRoleAuthFormVisible=!1,e.setRoleList()}).catch(this.$handleError)},openAddDataRoleForm:function(){this.addDataRoleForm={projId:this.searchForm.projId,name:"",remark:"",operPrivilege:""},this.addDataRoleFormVisible=!0,this.setDataResourceList()},setDataResourceList:function(e){var t=this;this.dataResourceList?e&&this.updateDataAuthDefaultChecked():q({projId:this.searchForm.projId}).then(function(e){t.dataResourceList=e.data,t.setDataResourceTreeData(!0)}).catch(this.$handleError)},setDataResourceTreeData:function(e){var t=this;this.dataResourceTreeData={},this.dataResourceList.forEach(function(a){A(a.url).then(function(i){t.dataResourceTreeData[a.id]=i.data,t.$forceUpdate(),e&&t.updateDataAuthDefaultChecked()}).catch(t.$handleError)})},changeGrantLevel:function(e,t){e.grantParent=t},submitAddDataRoleForm:function(){var e=this;this.$refs["addDataRoleForm"].validate(function(t){if(!t)return!1;var a=JSON.parse(JSON.stringify(e.addDataRoleForm)),i={};e.dataResourceList.forEach(function(t){i[t.id]=[];var a="dataResourceTree"+t.id,r=e.$refs[a][0],n=r.getCheckedNodes();n.forEach(function(e){var a=r.getNode(e.id),n=a.parent;i[t.id].push({resourceId:e.id,realId:e.realId,label:e.label,type:e.type,pid:n?n.data.id:""})})}),a.resourceIdList=JSON.stringify(i),Be(a).then(function(t){e.addDataRoleFormVisible=!1,e.setRoleList()}).catch(e.$handleError)})},openGrantDataRoleAuthForm:function(){this.grantDataRoleAuthForm={roleId:this.currentRole.id,operPrivilege:this.currentRole.operPrivilege},this.grantDataRoleAuthFormVisible=!0,this.setDataRoleResourceRelations()},setDataRoleResourceRelations:function(){var e=this;Ke({roleId:this.currentRole.id}).then(function(t){e.dataRoleResourceRelations=t.data,e.grantDataRoleAuthDefaultChecked={},Object.keys(t.data).forEach(function(a){e.grantDataRoleAuthDefaultChecked[a]=[],t.data[a].forEach(function(t){e.grantDataRoleAuthDefaultChecked[a].push(t.resourceId)})}),e.dataResourceList=null,e.$forceUpdate(),e.setDataResourceList(!0)}).catch(this.$handleError)},updateDataAuthDefaultChecked:function(){var e=this;e.$nextTick(function(){Object.keys(e.grantDataRoleAuthDefaultChecked).forEach(function(t){var a="dataResourceTreeGrant"+t;e.grantDataRoleAuthDefaultChecked[t]=e.$refs[a][0].getCheckedKeys()})})},submitGrantDataRoleAuthForm:function(){var e=this,t=JSON.parse(JSON.stringify(this.grantDataRoleAuthForm)),a={},i=[];this.dataResourceList.forEach(function(t){a[t.id]=[];var r="dataResourceTreeGrant"+t.id,n=e.$refs[r][0],o=n.getCheckedNodes();o.forEach(function(i){if(!e.grantDataRoleAuthDefaultChecked[t.id]||!e.grantDataRoleAuthDefaultChecked[t.id].includes(i.id)){var r=n.getNode(i.id),o=r.parent;a[t.id].push({resourceId:i.id,realId:i.realId,label:i.label,type:i.type,pid:o?o.data.id:""})}}),e.grantDataRoleAuthDefaultChecked[t.id]&&e.grantDataRoleAuthDefaultChecked[t.id].forEach(function(a){var r=o.findIndex(function(e){return e.id===a});-1===r&&e.dataRoleResourceRelations[t.id].filter(function(e){return e.resourceId===a}).forEach(function(e){i.push(e.id)})})}),t.addResourceIdList=JSON.stringify(a),t.delRelationIdList=i.toString(),Ye(t).then(function(t){e.grantDataRoleAuthFormVisible=!1,e.setRoleList()}).catch(this.$handleError)}},mounted:function(){this.setProjList()}},Ze=qe,Qe=(a("9add"),Object(c["a"])(Ze,we,Te,!1,null,null,null)),et=Qe.exports,tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-row",{staticClass:"d-row"},[a("el-card",{attrs:{shadow:"never"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{filterable:"",remote:"",placeholder:"请输入用户名或姓名,例如xiao",size:"small","remote-method":e.searchUser},on:{change:e.selectUser},model:{value:e.currentUserName,callback:function(t){e.currentUserName=t},expression:"currentUserName"}},e._l(e.searchUserList,function(e){return a("el-option",{key:e.userName,attrs:{label:e.userNameCn+"("+e.userName+")",value:e.userName}})}),1)],1)],1),a("el-row",{staticClass:"d-row"},[a("el-card",{attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"d-card-title"},[e._v("基本信息")])]),a("DDetail",{attrs:{data:e.currentUserBase,columns:e.detailColumns}})],1)],1),a("el-row",{staticClass:"d-row"},[a("UserRole",{attrs:{userName:e.currentUserName,userNameCn:e.currentUserBase.userNameCn}})],1),a("el-row",{staticClass:"d-row"},[a("UserCity",{attrs:{userName:e.currentUserName}})],1)],1)},at=[],it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"d-card-title"},[e._v("角色权限")]),e.userName?a("DEditSaveSwitch",{staticStyle:{float:"right"},attrs:{editName:"授权"},on:{submit:e.submitRoleGrantedForm,edit:e.openRoleGrantedForm},model:{value:e.roleGranting,callback:function(t){e.roleGranting=t},expression:"roleGranting"}}):e._e()],1),e.roleGranting?a("div",[a("el-row",{staticClass:"d-row"},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{"suffix-icon":"el-icon-search",size:"small",clearable:"",placeholder:"请输入角色名搜索"},on:{change:e.searchGrantRole},model:{value:e.searchRoleKey,callback:function(t){e.searchRoleKey="string"===typeof t?t.trim():t},expression:"searchRoleKey"}})],1)],1),e._l(e.searchedRoleList,function(t,i){return a("el-row",{key:i,staticClass:"d-row"},[a("el-col",{attrs:{span:2}},[a("span",{staticClass:"d-desclist-index-term"},[e._v(e._s(t.projName))])]),a("el-col",{attrs:{span:22}},[a("el-checkbox-group",{on:{change:function(a){e.changeCheckedRole(a,t)}},model:{value:e.checkedRoleObj[t.projId],callback:function(a){e.$set(e.checkedRoleObj,t.projId,a)},expression:"checkedRoleObj[item.projId]"}},e._l(t.roleList,function(t,i){return a("el-checkbox",{key:i,attrs:{label:t.roleId,disabled:t.disable}},[e._v(e._s(t.roleName))])}),1)],1)],1)})],2):a("div",e._l(e.projRoleGrantedList,function(t,i){return a("el-row",{key:i,staticClass:"d-row"},[a("el-col",{attrs:{span:2}},[a("span",{staticClass:"d-desclist-index-term"},[e._v(e._s(t.projName))])]),a("el-col",{attrs:{span:22}},[a("el-row",e._l(t.roleList,function(t,i){return a("el-col",{key:i,attrs:{span:3}},[a("span",{staticClass:"d-desclist-index-detail"},[e._v(e._s(t.roleName))])])}),1)],1)],1)}),1)])},rt=[],nt={name:"UserRole",props:{userName:String,userNameCn:String},data:function(){return{projRoleGrantedList:[],projRoleGrantedObj:{},checkedRoleObj:{},roleGranting:!1,allProjRoleObj:null,allProjRoleForm:{},searchRoleKey:"",searchedRoleList:[]}},watch:{userName:function(){this.setRoleGrantedList()}},methods:{setRoleGrantedList:function(){var e=this;this.roleGranting=!1,this.projRoleGrantedList=[],this.projRoleGrantedObj={},Le({userName:this.userName}).then(function(t){e.projRoleGrantedList=t.data,e.projRoleGrantedList.forEach(function(t){e.projRoleGrantedObj[t.projId]=t.roleList})}).catch(this.$handleError)},setAllProjRoleObj:function(){var e=this;this.allProjRoleObj?this.setAllProjRoleForm():(this.allProjRoleObj={},$e().then(function(t){t.data.forEach(function(t){e.allProjRoleObj[t.projId]=t}),e.setAllProjRoleForm()}).catch(this.$handleError))},openRoleGrantedForm:function(){this.searchRoleKey="",this.setAllProjRoleObj()},setAllProjRoleForm:function(){var e=this;this.checkedRoleObj={},this.allProjRoleForm={},this.projRoleGrantedList.forEach(function(t){e.checkedRoleObj[t.projId]=t.roleList.map(function(e){return e.roleId}),e.allProjRoleForm[t.projId]={projId:t.projId,projName:t.projName,roleList:[]},e.allProjRoleObj[t.projId]?(e.allProjRoleForm[t.projId].roleList=e.allProjRoleObj[t.projId].roleList.map(function(e){return{roleId:e.roleId,roleName:e.roleName}}),t.roleList.forEach(function(a){-1===e.allProjRoleForm[t.projId].roleList.findIndex(function(e){return e.roleId===a.roleId})&&e.allProjRoleForm[t.projId].roleList.push({roleId:a.roleId,roleName:a.roleName,disable:!0})})):e.allProjRoleForm[t.projId].roleList=t.roleList.map(function(e){return{roleId:e.roleId,roleName:e.roleName,disable:!0}})}),Object.values(this.allProjRoleObj).forEach(function(t){e.allProjRoleForm[t.projId]||(e.checkedRoleObj[t.projId]=[],e.allProjRoleForm[t.projId]={projId:t.projId,projName:t.projName,roleList:[]},e.allProjRoleForm[t.projId].roleList=e.allProjRoleObj[t.projId].roleList.map(function(e){return{roleId:e.roleId,roleName:e.roleName}}))}),this.searchGrantRole()},searchGrantRole:function(){var e=this;this.searchedRoleList=[],this.searchRoleKey?Object.values(this.allProjRoleForm).forEach(function(t){var a=t.roleList.filter(function(t){return t.roleName.includes(e.searchRoleKey)});a.length&&e.searchedRoleList.push({projId:t.projId,projName:t.projName,roleList:a})}):this.searchedRoleList=Object.values(this.allProjRoleForm)},changeCheckedRole:function(e,t){this.$forceUpdate()},submitRoleGrantedForm:function(){var e=this,t=[],a=[];Object.keys(this.checkedRoleObj).forEach(function(i){var r=e.checkedRoleObj[i];e.projRoleGrantedObj[i]&&e.projRoleGrantedObj[i].forEach(function(e){r.includes(e.roleId)||a.push(e.roleUserId)}),r.forEach(function(a){var r=-1;e.projRoleGrantedObj[i]&&(r=e.projRoleGrantedObj[i].findIndex(function(e){return e.roleId===a})),-1===r&&t.push(a)})}),je({userName:this.userName,userNameCn:this.userNameCn,addRoleIdList:t.toString(),delRelationIdList:a.toString()}).then(function(t){e.setRoleGrantedList()}).catch(this.$handleError)}}},ot=nt,st=Object(c["a"])(ot,it,rt,!1,null,null,null),dt=st.exports,lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"d-card-title"},[e._v("城市权限")]),e.userName?a("DEditSaveSwitch",{staticStyle:{float:"right"},attrs:{editName:"授权"},on:{submit:e.submitCityGrantedForm,edit:e.openCityGrantedForm},model:{value:e.cityGranting,callback:function(t){e.cityGranting=t},expression:"cityGranting"}}):e._e()],1),e.cityGranting?a("div",[a("el-row",{staticClass:"d-row"},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{"suffix-icon":"el-icon-search",size:"small",clearable:"",placeholder:"请输入城市名搜索"},on:{change:e.searchGrantCity},model:{value:e.searchCityKey,callback:function(t){e.searchCityKey="string"===typeof t?t.trim():t},expression:"searchCityKey"}})],1)],1),a("el-row",{staticClass:"d-row"},[a("el-col",{attrs:{span:2}},[a("el-checkbox",{model:{value:e.wholeCountry,callback:function(t){e.wholeCountry=t},expression:"wholeCountry"}},[e._v("全国")])],1)],1),e._l(e.searchedCityList,function(t,i){return a("el-row",{key:i,staticClass:"d-row"},[a("el-col",{attrs:{span:2}},[a("el-checkbox",{on:{change:function(a){return e.changeProvinceChecked(a,t)}},model:{value:e.provincesChecked[t.id],callback:function(a){e.$set(e.provincesChecked,t.id,a)},expression:"provincesChecked[item.id]"}},[e._v(e._s(t.name))])],1),a("el-col",{attrs:{span:22}},[a("el-checkbox-group",{on:{change:function(a){e.changeCheckedCity(a,t)}},model:{value:e.checkedCityList,callback:function(t){e.checkedCityList=t},expression:"checkedCityList"}},e._l(t.cityList,function(t,i){return a("el-checkbox",{key:i,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)],1)],1)})],2):a("div",[a("el-row",{staticClass:"d-row"},e._l(e.userCityGrantedList,function(t,i){return a("el-col",{key:i,attrs:{span:1}},[a("span",{staticClass:"d-desclist-index-detail"},[e._v(e._s(t.cityName))])])}),1)],1)])},ct=[],mt=E.auth.be+"/api/region",ut={listProvinceCity:{api:mt+"/province-city",name:"获取省份城市列表"}},pt={id:-99,name:"全国"},ht=function(e){return M(ut.listProvinceCity.api,e)},ft={name:"UserCity",props:{userName:String},watch:{userName:function(){this.setCityGrantedList()}},data:function(){return{userCityGrantedList:[],userCityGrantedMap:{},cityGranting:!1,provinceCityList:null,checkedCityList:[],searchCityKey:"",searchedCityList:[],wholeCountry:!1,provincesChecked:{},cityMap:{}}},methods:{setCityGrantedList:function(){var e=this;this.cityGranting=!1,this.checkedCityList=[],Re({userName:this.userName}).then(function(t){e.userCityGrantedList=t.data,e.userCityGrantedList.forEach(function(t){e.userCityGrantedMap[t.cityId]=t,t.cityId===pt.id?e.wholeCountry=!0:e.checkedCityList.push(t.cityId)}),e.wholeCountry&&(e.checkedCityList=[pt.id])}).catch(this.$handleError)},openCityGrantedForm:function(){this.cityGranting=!0,this.searchCityKey="",this.setProvinceCityList()},setProvinceCityList:function(){var e=this;this.provinceCityList?this.searchGrantCity():ht().then(function(t){e.provinceCityList=t.data,e.setCityMap(),e.searchGrantCity()}).catch(this.$handleError)},setCityMap:function(){var e=this;this.cityMap[pt.id]=pt,this.provinceCityList.forEach(function(t){t.cityList.forEach(function(t){e.cityMap[t.id]=t})})},searchGrantCity:function(){var e=this;this.searchedCityList=[],this.searchCityKey?this.provinceCityList.forEach(function(t){var a=[];t.cityList.forEach(function(t){t.name.includes(e.searchCityKey)&&a.push(t)}),a.length&&e.searchedCityList.push({id:t.id,name:t.name,cityList:a})}):this.searchedCityList=this.provinceCityList,this.setProvincesChecked()},setProvincesChecked:function(){var e=this;this.searchedCityList.forEach(function(t){e.setProvinceChecked(t)})},setProvinceChecked:function(e){for(var t in this.provincesChecked[e.id]=!0,e.cityList)if(!this.checkedCityList.includes(e.cityList[t].id)){this.provincesChecked[e.id]=!1;break}},uncheckedWholeCountry:function(){this.wholeCountry=!1;var e=this.checkedCityList.findIndex(function(e){return e===pt.id});e>=0&&this.checkedCityList.splice(e,1)},changeCheckedCity:function(e,t){this.uncheckedWholeCountry(),this.setProvinceChecked(t),this.$forceUpdate()},changeProvinceChecked:function(e,t){var a=this;if(this.uncheckedWholeCountry(),e)t.cityList.forEach(function(e){a.checkedCityList.includes(e.id)||a.checkedCityList.push(e.id)});else{var i=[];this.checkedCityList.forEach(function(e,a){var r=t.cityList.findIndex(function(t){return t.id===e});r>=0&&i.push(a)}),i.forEach(function(e,t){a.checkedCityList.splice(e-t,1)})}},submitCityGrantedForm:function(){var e=this,t=[],a=[];this.checkedCityList.forEach(function(a){e.userCityGrantedMap[a]||t.push({cityId:e.cityMap[a].id,cityName:e.cityMap[a].name})}),this.userCityGrantedList.forEach(function(t){e.checkedCityList.includes(t.cityId)||a.push(t.id)}),Fe({userName:this.userName,addCityList:JSON.stringify(t),delRelationIdList:a.toString()}).then(function(t){e.setCityGrantedList()}).catch(this.$handleError)}}},bt=ft,yt=Object(c["a"])(bt,lt,ct,!1,null,null,null),gt=yt.exports,Ct={name:"DUser",components:{UserRole:dt,UserCity:gt},data:function(){return{currentUserName:"",currentUserBase:{},detailColumns:[{key:"userNameCn",title:"姓名"},{key:"userName",title:"用户名"},{key:"departmentName",title:"部门"},{key:"phone",title:"手机号"},{key:"email",title:"邮箱"}],searchUserList:[]}},methods:{searchUser:function(e){var t=this;e&&xe({keyword:e}).then(function(e){t.searchUserList=e.data}).catch(this.$handleError)},selectUser:function(){this.setCurrentUserBase()},setCurrentUserBase:function(){var e=this;ke({userName:this.currentUserName}).then(function(t){e.currentUserBase=t.data}).catch(this.$handleError)}}},vt=Ct,Dt=Object(c["a"])(vt,tt,at,!1,null,null,null),It=Dt.exports,wt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DPageContent",[i("el-row",[i("el-col",{staticClass:"d-col",attrs:{span:8}},[i("el-card",{attrs:{shadow:"never"}},[i("div",{staticClass:"d-user"},[i("img",{attrs:{src:a("674e")}}),i("div",{staticClass:"d-user-name"},[e._v(e._s(e.loginUser.userNameCn))])]),i("div",[i("el-row",{staticClass:"d-row"},[i("el-col",{attrs:{span:2}},[i("i",{staticClass:"el-icon-suitcase"})]),i("el-col",{attrs:{span:22}},[i("span",[e._v(e._s(e.loginUser.position))])])],1),i("el-row",{staticClass:"d-row"},[i("el-col",{attrs:{span:2}},[i("i",{staticClass:"el-icon-coin"})]),i("el-col",{attrs:{span:22}},[i("span",[e._v(e._s(e.loginUser.departmentName))])])],1),i("el-row",{staticClass:"d-row"},[i("el-col",{attrs:{span:2}},[i("i",{staticClass:"el-icon-location-outline"})]),i("el-col",{attrs:{span:22}},[i("span",[e._v(e._s(e.loginUser.city))])])],1)],1)])],1),i("el-col",{staticClass:"d-col",attrs:{span:16}},[i("el-row",{staticClass:"d-row"},[i("el-card",{attrs:{shadow:"never"}},[i("el-tabs",{model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[i("el-tab-pane",{attrs:{label:"消息(8)",name:"notice"}},[e._v("消息")]),i("el-tab-pane",{attrs:{label:"告警(8)",name:"warn"}},[e._v("告警")]),i("el-tab-pane",{attrs:{label:"代办(8)",name:"todo"}},[e._v("代办")])],1)],1)],1),i("el-row",{staticClass:"d-row"},[i("el-card",{attrs:{shadow:"never"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"d-card-title"},[e._v("角色权限")]),i("div",{staticStyle:{float:"right"}},[i("el-button",{staticClass:"d-card-btn",attrs:{type:"text"}},[e._v("\n                                申请权限\n                            ")])],1)]),e._l(e.projRoleGrantedList,function(t,a){return i("el-row",{key:a,staticClass:"d-row"},[i("el-col",{attrs:{span:2}},[i("span",{staticClass:"d-desclist-index-term"},[e._v(e._s(t.projName))])]),i("el-col",{attrs:{span:22}},[i("el-row",e._l(t.roleList,function(t,a){return i("el-col",{key:a,attrs:{span:3}},[i("span",{staticClass:"d-desclist-index-detail"},[e._v(e._s(t.roleName))])])}),1)],1)],1)})],2)],1),i("el-row",{staticClass:"d-row"},[i("el-card",{attrs:{shadow:"never"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"d-card-title"},[e._v("城市权限")]),i("div",{staticStyle:{float:"right"}},[i("el-button",{staticClass:"d-card-btn",attrs:{type:"text"}},[e._v("\n                                申请权限\n                            ")])],1)]),i("el-row",{staticClass:"d-row"},e._l(e.userCityGrantedList,function(t,a){return i("el-col",{key:a,attrs:{span:1}},[i("span",{staticClass:"d-desclist-index-detail"},[e._v(e._s(t.cityName))])])}),1)],1)],1)],1)],1)],1)},Tt=[],Nt={name:"UserConsole",data:function(){return{loginUser:{userName:"",userNameCn:"",position:"",departmentName:"",city:"",headPic:""},currentTab:"notice",projRoleGrantedList:[],userCityGrantedList:[]}},methods:{setLoginUser:function(){var e=this;ke().then(function(t){e.loginUser=t.data}).catch(this.$handleError),Le().then(function(t){e.projRoleGrantedList=t.data}).catch(this.$handleError),Re().then(function(t){e.userCityGrantedList=t.data}).catch(this.$handleError)}},mounted:function(){this.setLoginUser()}},_t=Nt,xt=(a("e57d"),Object(c["a"])(_t,wt,Tt,!1,null,null,null)),kt=xt.exports;N.Resource=Ie,N.Role=et,N.User=It,N.Console=kt;var Lt=N,Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-card",{staticStyle:{padding:"5px 40px"},attrs:{shadow:"never"}},[a("el-col",{attrs:{span:14}},[a("el-row",{staticClass:"d-row"},[a("el-input",{attrs:{placeholder:"请输入搜索关键字"},on:{change:e.searchData},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("template",{slot:"append"},[a("el-button",{staticClass:"d-search",attrs:{type:"primary"},on:{click:e.searchData}},[e._v("搜索")])],1)],2)],1),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[e.searchResult.total?a("div",[e._l(e.searchResult.result,function(t,i){return a("el-row",{key:i,staticClass:"d-row d-result-item"},[a("div",[a("h3",[a("a",{staticClass:"result-title",attrs:{target:"_blank",href:t.url},domProps:{innerHTML:e._s(t.title)}})]),a("div",{staticClass:"intro",domProps:{innerHTML:e._s(t.intro)}}),a("div",{staticClass:"time"},[e._v(e._s(t.updateTime))])])])}),a("el-row",{staticClass:"d-row"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.searchResult.total},on:{"current-change":e.changePage,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],2):a("el-row",[a("div",{staticStyle:{"font-size":"24px"}},[a("i",{staticClass:"el-icon-warning d-warn",staticStyle:{color:"red"}}),e._v("\n                        没有找到您期望的内容，请尝试其他搜索词，或联系产品人员\n                    ")])])],1)],1),a("el-col",{attrs:{span:10}})],1)],1)},jt=[],Ft=(a("386d"),E.search.be+"/api/search"),St={search:{api:Ft+"",name:"搜索"}},Et=function(e){return M(St.search.api,e)},At={name:"DSearch",data:function(){return{keyword:"",currentPage:1,pageSize:20,total:0,searchResult:{total:0,result:[]}}},watch:{"$route.fullPath":function(){this.keyword=this.$route.query.keyword,this.searchData()}},methods:{searchData:function(){var e=this;""!==this.keyword?Et({pageNo:this.currentPage,pageSize:this.pageSize,keyword:this.keyword}).then(function(t){e.searchResult=t.data}).catch(this.$handleError):this.searchResult={total:0,result:[]}},changePage:function(){this.searchData()}},mounted:function(){this.keyword=this.$route.query.keyword,this.searchData()}},Mt=At,Ot=(a("4849"),Object(c["a"])(Mt,Rt,jt,!1,null,null,null)),zt=Ot.exports,$t=zt,Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DLayout",{attrs:{logo:"消息中心"}},[a("DMenuNav",{attrs:{data:e.menuList}})],1)},Bt=[],Pt={name:"DMessage",data:function(){return{menuList:[{name:"站内消息",path:"/message/onsite"},{name:"消息接收管理",path:"/message/receive-manage"}]}}},Ut=Pt,Ht=Object(c["a"])(Ut,Vt,Bt,!1,null,null,null),Yt=Ht.exports,Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-card",{directives:[{name:"show",rawName:"v-show",value:!e.showDetail,expression:"!showDetail"}],attrs:{shadow:"never"}},[a("el-row",{staticClass:"d-row"},[a("el-button",{attrs:{type:"info",plain:e.readState!==e.messageReadStateObj.all.code,size:"small"},on:{click:function(t){return e.changeMessageReadState(e.messageReadStateObj.all.code)}}},[e._v("全部消息")]),a("el-button",{attrs:{type:"info",plain:e.readState!==e.messageReadStateObj.unread.code,size:"small"},on:{click:function(t){return e.changeMessageReadState(e.messageReadStateObj.unread.code)}}},[e._v("未读消息"),e.unReadCount>0?a("span",[e._v("("+e._s(e.unReadCount)+")")]):e._e()]),a("el-button",{attrs:{type:"info",plain:e.readState!==e.messageReadStateObj.readed.code,size:"small"},on:{click:function(t){return e.changeMessageReadState(e.messageReadStateObj.readed.code)}}},[e._v("已读消息")])],1),a("el-row",[a("el-table",{ref:"msgTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.data,height:"480px"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30"}}),a("el-table-column",{attrs:{width:"20"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.isRead?a("span",{staticClass:"d-unread-state"},[e._v("●")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"标题内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"d-msg-title",class:[0===t.row.isRead?"d-unread-msg":"d-read-msg"],attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.setMsgDetail(t.row.id)}}},[a("span",[e._v(e._s(t.row.title))])])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"提交时间",width:"200"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"200"}})],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{float:"left"}},[a("el-checkbox",{staticStyle:{"margin-left":"14px"},attrs:{disabled:!e.tableData.data.length},on:{change:e.changeDownCheck},model:{value:e.downCheckAll,callback:function(t){e.downCheckAll=t},expression:"downCheckAll"}}),a("el-button",{attrs:{disabled:!e.selectMsgIdList.length,size:"small"},on:{click:e.delByIds}},[e._v("删除")]),e.readState!==e.messageReadStateObj.readed.code?a("el-button",{attrs:{disabled:!e.selectMsgIdList.length,size:"small"},on:{click:e.readedByIds}},[e._v("标记已读")]):e._e(),e.readState!==e.messageReadStateObj.readed.code?a("el-button",{attrs:{size:"small"},on:{click:e.readedAll}},[e._v("全部已读")]):e._e(),a("el-button",{attrs:{size:"small"},on:{click:e.delAll}},[e._v("全部删除")])],1),a("div",{staticStyle:{float:"right"}},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"current-change":e.changePageNo,"size-change":e.changePageSize,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)])],1)],1),a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showDetail,expression:"showDetail"}],attrs:{shadow:"never"}},[a("el-row",{staticClass:"d-row"},[a("el-button",{attrs:{size:"small",icon:"el-icon-back"},on:{click:e.backToList}},[e._v("返回列表")])],1),a("el-row",[a("div",{staticClass:"d-msg-detail-top"},[a("h4",[e._v(e._s(e.msgDetail.title))]),a("div",[e._v(e._s(e.msgDetail.createTime))])]),a("div",{staticClass:"d-msg-detail-content",domProps:{innerHTML:e._s(e.msgDetail.content)}})])],1)],1)},Wt=[],Xt=E.message.be+"/api/onsite",Jt={listMsg:{api:Xt+"/list",name:"获取站内消息列表"},getMsg:{api:Xt+"/get",name:"获取一条站内消息详情"},getUnReadCount:{api:Xt+"/unread-count",name:"获取未读消息数量"},markReadedAll:{api:Xt+"/mark-readed-all",name:"把所有消息标记已读"},markReadedByIds:{api:Xt+"/mark-readed-by-ids",name:"根据ID批量把消息标记已读"},deleteAll:{api:Xt+"/delete-all",name:"删除所有消息"},deleteByIds:{api:Xt+"/delete-by-ids",name:"根据ID批量删除消息"}},Kt=function(e){return M(Jt.listMsg.api,e)},qt=function(e){return M(Jt.getMsg.api,e)},Zt=function(e){return M(Jt.getUnReadCount.api,e)},Qt=function(e){return M(Jt.markReadedAll.api,e)},ea=function(e){return M(Jt.markReadedByIds.api,e)},ta=function(e){return M(Jt.deleteAll.api,e)},aa=function(e){return M(Jt.deleteByIds.api,e)},ia={all:{code:-1,name:"全部消息"},unread:{code:0,name:"未读消息"},readed:{code:1,name:"已读消息"}},ra={name:"DMessage",data:function(){return{messageReadStateObj:ia,readState:ia.all.code,currentPage:1,pageSize:10,tableData:{total:10,data:[]},selectMsgIdList:[],unReadCount:0,downCheckAll:!1,showDetail:!1,msgDetail:{}}},methods:{changeMessageReadState:function(e){this.readState=e,this.setTableData()},handleSelectionChange:function(e){this.selectMsgIdList=e.map(function(e){return e.id}),this.downCheckAll=e.length===this.tableData.data.length},changePageNo:function(){this.setTableData()},changePageSize:function(){this.setTableData()},setTableData:function(){var e=this;this.downCheckAll=!1,Kt({isRead:this.readState,pageSize:this.pageSize,pageNo:this.currentPage}).then(function(t){e.tableData=t.data}).catch(this.$handleError)},setUnReadCount:function(){var e=this;Zt().then(function(t){e.unReadCount=t.data}).catch(this.$handleError)},changeDownCheck:function(){this.downCheckAll?this.$refs.msgTable.toggleAllSelection():this.$refs.msgTable.clearSelection()},readedAll:function(){var e=this;Qt().then(function(t){e.setTableData(),e.setUnReadCount()}).catch(this.$handleError)},readedByIds:function(){var e=this;ea({idList:this.selectMsgIdList.toString()}).then(function(t){e.setTableData(),e.setUnReadCount()}).catch(this.$handleError)},delAll:function(){var e=this,t="确认删除所有消息吗?";e.$confirmInfo(t,function(){ta().then(function(t){e.setTableData(),e.setUnReadCount()}).catch(e.$handleError)})},delByIds:function(){var e=this,t='确认删除选中的<strong class="d-error">"'+e.selectMsgIdList.length+'"</strong>条消息吗?';e.$confirmInfo(t,function(){aa({idList:e.selectMsgIdList.toString()}).then(function(t){e.setTableData(),e.setUnReadCount()}).catch(e.$handleError)})},setMsgDetail:function(e){var t=this;this.showDetail=!0,this.msgDetail={},qt({id:e}).then(function(e){t.msgDetail=e.data}).catch(this.$handleError)},backToList:function(){this.showDetail=!1,this.msgDetail={},this.setTableData(),this.setUnReadCount()},init:function(){this.$route.query.id?this.setMsgDetail(this.$route.query.id):(this.showDetail=!1,this.msgDetail={},this.setTableData(),this.setUnReadCount())}},watch:{"$route.fullPath":function(){this.init()}},mounted:function(){this.init()}},na=ra,oa=(a("7556"),Object(c["a"])(na,Gt,Wt,!1,null,null,null)),sa=oa.exports,da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent")},la=[],ca={name:"DReceiveManage"},ma=ca,ua=Object(c["a"])(ma,da,la,!1,null,null,null),pa=ua.exports;Yt.Onsite=sa,Yt.ReceiveManage=pa;var ha=Yt,fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DLayout",{attrs:{logo:"数据地图"}},[a("DMenuNav",{attrs:{data:e.menuList}})],1)},ba=[],ya={name:"DDataMap",data:function(){return{menuList:[{name:"我的数据",path:"/data-map/my-tb"},{name:"全部数据",path:"/data-map/tb-manage"},{name:"数据源",path:"/data-map/ds-manage"}]}}},ga=ya,Ca=Object(c["a"])(ga,fa,ba,!1,null,null,null),va=Ca.exports,Da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("div",{attrs:{slot:"side"},slot:"side"},[a("DMenuNav",{attrs:{data:e.sideMenuList,mode:"vertical"}})],1),a("router-view")],1)},Ia=[],wa={name:"DMyTb",data:function(){return{sideMenuList:[{name:"我拥有的数据",path:"/data-map/my-tb/own"},{name:"我管理的数据",path:"/data-map/my-tb/manage"},{name:"权限管理",path:"/data-map/my-tb/auth"}]}}},Ta=wa,Na=Object(c["a"])(Ta,Da,Ia,!1,null,null,null),_a=Na.exports,xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"never"}},[a("el-row",{staticClass:"d-row d-search-form"},[a("el-select",{staticClass:"item",attrs:{size:"small",clearable:"",filterable:"",placeholder:"库名,可搜索"},on:{change:e.setTableData},model:{value:e.searchForm.dbId,callback:function(t){e.$set(e.searchForm,"dbId",t)},expression:"searchForm.dbId"}},e._l(e.allDbList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.dbName}})}),1),a("el-input",{staticClass:"item",attrs:{size:"small",clearable:"",placeholder:"表关键词搜索","suffix-icon":"el-icon-search"},on:{change:e.setTableData},model:{value:e.searchForm.tbName,callback:function(t){e.$set(e.searchForm,"tbName",t)},expression:"searchForm.tbName"}})],1),a("el-row",{staticClass:"d-row"},[a("el-table",{attrs:{data:e.tableData.data}},[a("el-table-column",{attrs:{prop:"tbName",label:"表名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/data-map/tb-manage/"+t.row.id}},[e._v(e._s(t.row.tbName))])]}}])}),a("el-table-column",{attrs:{prop:"tbNameCn",label:"中文名",width:"300"}}),a("el-table-column",{attrs:{prop:"tagList",label:"标签",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"d-tag-group"},e._l(t.row.tagList,function(t){return a("el-tag",{key:t.id,attrs:{size:"mini",effect:"plain"}},[e._v(e._s(t.name))])}),1)]}}])}),a("el-table-column",{attrs:{prop:"dbName",label:"数据库",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/data-map/db-manage/"+t.row.dbId}},[e._v(e._s(t.row.dbName))])]}}])}),a("el-table-column",{attrs:{prop:"authSource",label:"权限来源",width:"200"}})],1)],1),a("el-row",{staticClass:"d-right-pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageNo,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.tableData.total},on:{"current-change":e.setTableData,"size-change":e.setTableData,"update:currentPage":function(t){e.pageNo=t},"update:current-page":function(t){e.pageNo=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)],1)},ka=[],La=E.dataMap.be+"/api/tb",Ra={searchTb:{api:La+"/search",name:"搜索工作表,分页展现"},listMyTbOwn:{api:La+"/list-own",name:"分页获取我拥有的工作表列表"},listMyTbManage:{api:La+"/list-manage",name:"分页获取我管理的工作表列表"},listTbUser:{api:La+"/list-user",name:"获取工作表被授予的用户列表"},getTb:{api:La+"/get",name:"获取一张表的详情"},previewTbData:{api:La+"/preview-data",name:"预览一张表的数据"},addTbUser:{api:La+"/add-user",name:"给某张表授权一个用户"},deleteTbUser:{api:La+"/delete-user",name:"给某张表删除一个用户"}},ja=function(e){return M(Ra.searchTb.api,e)},Fa=function(e){return M(Ra.listMyTbOwn.api,e)},Sa=function(e){return M(Ra.listMyTbManage.api,e)},Ea=function(e){return M(Ra.listTbUser.api,e)},Aa=function(e){return M(Ra.getTb.api,e)},Ma=function(e){return M(Ra.previewTbData.api,e)},Oa=function(e){return M(Ra.addTbUser.api,e)},za=function(e){return M(Ra.deleteTbUser.api,e)},$a=E.dataMap.be+"/api/db",Va={listAllDb:{api:$a+"/list-all",name:"获取所有数据库"},getDb:{api:$a+"/get",name:"获取一个数据库的详情"}},Ba=function(e){return M(Va.listAllDb.api,e)},Pa=function(e){return M(Va.getDb.api,e)},Ua={name:"DMyTbOwn",data:function(){return{isMy:!0,searchForm:{dbId:"",tbName:""},pageNo:1,pageSize:10,tableData:{},allDbList:[]}},methods:{clickTab:function(e){this.isMy=e},setAllDbList:function(){var e=this;Ba().then(function(t){e.allDbList=t.data}).catch(this.$handleError)},setTableData:function(){var e=this;Fa({dbId:this.searchForm.dbId,tbName:this.searchForm.tbName,pageNo:this.pageNo,pageSize:this.pageSize}).then(function(t){e.tableData=t.data}).catch(this.$handleError)}},mounted:function(){this.setAllDbList(),this.setTableData()}},Ha=Ua,Ya=Object(c["a"])(Ha,xa,ka,!1,null,null,null),Ga=Ya.exports,Wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"never"}},[a("el-row",{staticClass:"d-row d-search-form"},[a("el-select",{staticClass:"item",attrs:{size:"small",clearable:"",filterable:"",placeholder:"库名,可搜索"},on:{change:e.setTableData},model:{value:e.searchForm.dbId,callback:function(t){e.$set(e.searchForm,"dbId",t)},expression:"searchForm.dbId"}},e._l(e.allDbList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.dbName}})}),1),a("el-input",{staticClass:"item",attrs:{size:"small",clearable:"",placeholder:"表关键词搜索","suffix-icon":"el-icon-search"},on:{change:e.setTableData},model:{value:e.searchForm.tbName,callback:function(t){e.$set(e.searchForm,"tbName",t)},expression:"searchForm.tbName"}})],1),a("el-row",{staticClass:"d-row"},[a("el-table",{attrs:{data:e.tableData.data}},[a("el-table-column",{attrs:{prop:"tbName",label:"表名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/data-map/tb-manage/"+t.row.id}},[e._v(e._s(t.row.tbName))])]}}])}),a("el-table-column",{attrs:{prop:"tbNameCn",label:"中文名",width:"300"}}),a("el-table-column",{attrs:{prop:"tagList",label:"标签",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"d-tag-group"},e._l(t.row.tagList,function(t){return a("el-tag",{key:t.id,attrs:{size:"mini",effect:"plain"}},[e._v(e._s(t.name))])}),1)]}}])}),a("el-table-column",{attrs:{prop:"dbName",label:"数据库",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/data-map/db-manage/"+t.row.dbId}},[e._v(e._s(t.row.dbName))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.openGrantUserForm(t.row)}}},[e._v("授权用户")]),a("el-button",{attrs:{type:"text",size:"mini"}},[e._v("编辑")])]}}])})],1)],1),a("el-row",{staticClass:"d-right-pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageNo,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.tableData.total},on:{"current-change":e.setTableData,"size-change":e.setTableData,"update:currentPage":function(t){e.pageNo=t},"update:current-page":function(t){e.pageNo=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1),a("el-dialog",{attrs:{title:"授权用户表："+e.currentTb.dbName+"."+e.currentTb.tbName,visible:e.grantUserFormVisible},on:{"update:visible":function(t){e.grantUserFormVisible=t}}},[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-select",{staticStyle:{float:"right",width:"220px"},attrs:{filterable:"","reserve-keyword":"",multiple:"",remote:"",placeholder:"请输入用户名或姓名,搜索添加",size:"small","remote-method":e.searchUser},on:{change:e.selectUser},model:{value:e.userNameList,callback:function(t){e.userNameList=t},expression:"userNameList"}},e._l(e.searchUserList,function(t,i){return a("el-option",{key:t.userName,attrs:{label:t.userNameCn,value:t.userName}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.userNameCn)+"("+e._s(t.userName)+")")]),a("span",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"text",title:"添加用户",icon:"el-icon-plus"},on:{click:function(a){return e.addTbUser(t,i)}}})],1)])}),1)],1),a("el-row",e._l(e.tbUserList,function(t,i){return a("el-col",{key:t.id,staticClass:"d-hover-btn",attrs:{span:6}},[a("span",[e._v(e._s(t.userNameCn)+"("+e._s(t.userName)+")")]),a("el-button",{attrs:{type:"text",title:"删除用户",icon:"el-icon-delete"},on:{click:function(a){return e.deleteTbUserById(t.id,i)}}})],1)}),1)],1)],1)},Xa=[],Ja={name:"DMyTbManage",data:function(){return{isMy:!0,searchForm:{dbId:"",tbName:""},pageNo:1,pageSize:10,tableData:{},allDbList:[],currentTb:{},grantUserFormVisible:!1,tbUserList:[],searchUserList:[],userNameList:[]}},methods:{clickTab:function(e){this.isMy=e},setAllDbList:function(){var e=this;Ba().then(function(t){e.allDbList=t.data}).catch(this.$handleError)},setTableData:function(){var e=this;Sa({dbId:this.searchForm.dbId,tbName:this.searchForm.tbName,pageNo:this.pageNo,pageSize:this.pageSize}).then(function(t){e.tableData=t.data}).catch(this.$handleError)},openGrantUserForm:function(e){this.grantUserFormVisible=!0,this.currentTb=e,this.setTbUserList()},setTbUserList:function(){var e=this;Ea({id:this.currentTb.id}).then(function(t){e.tbUserList=t.data}).catch(this.$handleError)},searchUser:function(e){var t=this;e&&xe({keyword:e}).then(function(e){t.searchUserList=e.data.filter(function(e){var a=t.tbUserList.findIndex(function(t){return t.userName===e.userName});return-1===a})}).catch(this.$handleError)},addTbUser:function(e,t){var a=this;Oa({tbId:this.currentTb.id,userName:e.userName,userNameCn:e.userNameCn}).then(function(i){a.tbUserList.unshift({id:i.data,userName:e.userName,userNameCn:e.userNameCn}),a.searchUserList.splice(t,1)}).catch(this.$handleError)},deleteTbUserById:function(e,t){var a=this;za({tbUserId:e}).then(function(e){a.tbUserList.splice(t,1)}).catch(this.$handleError)},selectUser:function(){this.userNameList=[]}},mounted:function(){this.setAllDbList(),this.setTableData()}},Ka=Ja,qa=Object(c["a"])(Ka,Wa,Xa,!1,null,null,null),Za=qa.exports,Qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"never"}},[e._v("\n    我管理的数据\n")])},ei=[],ti={name:"DMyTbAuth"},ai=ti,ii=Object(c["a"])(ai,Qa,ei,!1,null,null,null),ri=ii.exports;_a.Own=Ga,_a.Manage=Za,_a.Auth=ri;var ni=_a,oi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-card",{attrs:{shadow:"never"}},[a("el-row",{staticClass:"d-row"},[a("div",{staticClass:"d-search-form",staticStyle:{float:"left"}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"类型"},on:{change:e.setTableData},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(e.dbTypeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1),a("el-input",{staticClass:"item",attrs:{size:"small",placeholder:"数据源名称/数据库名称","suffix-icon":"el-icon-search",clearable:""},on:{change:e.setTableData},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),a("div",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.openAddDsForm()}}},[e._v("新增数据源")])],1)]),a("el-row",{staticClass:"d-row"},[a("el-table",{attrs:{data:e.tableData.data,"row-key":"id","default-expand-all":"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"name",label:"数据源名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/data-map/ds-manage/"+t.row.id}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"150"}}),a("el-table-column",{attrs:{prop:"host",label:"域名",width:"200"}}),a("el-table-column",{attrs:{prop:"dbName",label:"数据库名称",width:"200"}}),a("el-table-column",{attrs:{prop:"remark",label:"描述"}}),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.openUpdateDsForm(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.deleteDsById(t.row)}}},[e._v("删除")]),1===t.row.isBaseDs?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.openAddDsForm(t.row)}}},[e._v("新建查询引擎")]):e._e(),1===t.row.isBaseDs?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.openDsOwnerForm(t.row)}}},[e._v("变更Owner")]):e._e()]}}])})],1)],1),a("el-row",{staticClass:"d-right-pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageNo,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.tableData.total},on:{"current-change":e.setTableData,"size-change":e.setTableData,"update:currentPage":function(t){e.pageNo=t},"update:current-page":function(t){e.pageNo=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)],1),a("el-dialog",{attrs:{title:e.dsFormTitle,top:"30px",visible:e.dsFormVisible},on:{"update:visible":function(t){e.dsFormVisible=t}}},[a("el-form",{ref:"dsForm",attrs:{model:e.dsForm,rules:e.formRules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:void 0!=e.dsForm.id},model:{value:e.dsForm.type,callback:function(t){e.$set(e.dsForm,"type",t)},expression:"dsForm.type"}},e._l(e.dbTypeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1)],1),a("el-col",{attrs:{span:12}})],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据源名称",prop:"name"}},[a("el-input",{model:{value:e.dsForm.name,callback:function(t){e.$set(e.dsForm,"name",t)},expression:"dsForm.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.dsForm.remark,callback:function(t){e.$set(e.dsForm,"remark",t)},expression:"dsForm.remark"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"域名",prop:"host"}},[a("el-input",{model:{value:e.dsForm.host,callback:function(t){e.$set(e.dsForm,"host",t)},expression:"dsForm.host"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"端口",prop:"port"}},[a("el-input",{model:{value:e.dsForm.port,callback:function(t){e.$set(e.dsForm,"port",t)},expression:"dsForm.port"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据库名称",prop:"dbName"}},[a("el-input",{attrs:{disabled:void 0!=e.dsForm.id},model:{value:e.dsForm.dbName,callback:function(t){e.$set(e.dsForm,"dbName",t)},expression:"dsForm.dbName"}})],1)],1),a("el-col",{attrs:{span:12}})],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{model:{value:e.dsForm.userName,callback:function(t){e.$set(e.dsForm,"userName",t)},expression:"dsForm.userName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.dsForm.password,callback:function(t){e.$set(e.dsForm,"password",t)},expression:"dsForm.password"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[0===e.dsForm.isBaseDs?a("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:100},model:{value:e.dsForm.priority,callback:function(t){e.$set(e.dsForm,"priority",t)},expression:"dsForm.priority"}})],1):e._e()],1),a("el-col",{attrs:{span:12}},[0===e.dsForm.isBaseDs?a("el-form-item",{attrs:{label:"元数据同步",prop:"isAutoMeta"}},[a("el-radio-group",{model:{value:e.dsForm.isAutoMeta,callback:function(t){e.$set(e.dsForm,"isAutoMeta",t)},expression:"dsForm.isAutoMeta"}},[a("el-radio",{attrs:{label:1}},[e._v("自动")]),a("el-radio",{attrs:{label:0}},[e._v("手动")])],1)],1):e._e()],1)],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitDsForm,cancel:function(t){e.dsFormVisible=!1}},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.testDs}},[e._v("测试连接")])],1)],1),a("el-dialog",{attrs:{title:"变更Owner："+e.currentDs.name,visible:e.dsOwnerFormVisible},on:{"update:visible":function(t){e.dsOwnerFormVisible=t}}},[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-select",{staticStyle:{float:"right",width:"220px"},attrs:{filterable:"","reserve-keyword":"",multiple:"",remote:"",placeholder:"请输入用户名或姓名,搜索添加",size:"small","remote-method":e.searchUser},on:{change:e.selectUser},model:{value:e.userNameList,callback:function(t){e.userNameList=t},expression:"userNameList"}},e._l(e.searchUserList,function(t,i){return a("el-option",{key:t.userName,attrs:{label:t.userNameCn,value:t.userName}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.userNameCn)+"("+e._s(t.userName)+")")]),a("span",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"text",title:"添加用户",icon:"el-icon-plus"},on:{click:function(a){return e.addDsOwner(t,i)}}})],1)])}),1)],1),a("el-row",e._l(e.dsOwnerList,function(t,i){return a("el-col",{key:t.id,staticClass:"d-hover-btn",attrs:{span:6}},[a("span",[e._v(e._s(t.ownerNameCn)+"("+e._s(t.ownerName)+")")]),a("el-button",{attrs:{type:"text",title:"删除用户",icon:"el-icon-delete"},on:{click:function(a){return e.deleteDsOwnerById(t.id,i)}}})],1)}),1)],1)],1)},si=[],di=E.dataMap.be+"/api/ds",li={listDs:{api:di+"/list",name:"分页获取数据源列表"},listDsOwner:{api:di+"/list-owner",name:"获取数据源的owner"},deleteDsOwner:{api:di+"/delete-owner",name:"删除一个数据源owner"},addDsOwner:{api:di+"/add-owner",name:"新增一个数据源owner"},getDs:{api:di+"/get",name:"根据ID获取一条数据源记录详情"},deleteDs:{api:di+"/delete",name:"根据ID删除一条数据源记录"},addOrUpdateDs:{api:di+"/add-or-update",name:"新增或者修改一条数据源"},testDs:{api:di+"/test-connection",name:"测试数据源的连通性"}},ci={MYSQL:{code:"MYSQL",name:"MYSQL"},HIVE:{code:"HIVE",name:"HIVE"},MAXCOMPUTE:{code:"MAXCOMPUTE",name:"MaxCompute(Lightning)"},IMPALA:{code:"IMPALA",name:"IMPALA"},PRESTO:{code:"PRESTO",name:"PRESTO"},KYLIN:{code:"KYLIN",name:"KYLIN"}},mi=function(e){return M(li.listDs.api,e)},ui=function(e){return M(li.listDsOwner.api,e)},pi=function(e){return M(li.deleteDsOwner.api,e)},hi=function(e){return M(li.addDsOwner.api,e)},fi=function(e){return M(li.getDs.api,e)},bi=function(e){return M(li.deleteDs.api,e)},yi=function(e){return M(li.addOrUpdateDs.api,e)},gi=function(e){return M(li.testDs.api,e)},Ci={name:"DDsManager",data:function(){return{searchForm:{type:"",name:""},pageSize:10,pageNo:1,tableData:{total:0,data:[]},dbTypeList:Object.values(ci),dsFormVisible:!1,dsFormTitle:"新建数据源",dsForm:{type:ci.MYSQL.code,name:"",host:"",port:"",dbName:"",userName:"",password:"",isBaseDs:1,priority:0},formRules:{type:[{required:!0,message:"请选择类型",trigger:"change"}],name:[{required:!0,message:"请输入数据源名称",trigger:"blur"}],host:[{required:!0,message:"请输入域名",trigger:"blur"}],dbName:[{required:!0,message:"请输入数据库名称",trigger:"blur"},{type:"string",pattern:/^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$/,message:"只能包含数字、字母、下划线,字母开头",trigger:"blur"}],userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{type:"string",pattern:/^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$/,message:"只能包含数字、字母、下划线,字母开头",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],port:[{type:"string",pattern:/^[1-9]+[0-9]*$/,message:"端口号只能是数字",trigger:"blur"}]},currentDs:{},dsOwnerFormVisible:!1,dsOwnerList:[],searchUserList:[],userNameList:[]}},methods:{setTableData:function(){var e=this;mi({pageSize:this.pageSize,pageNo:this.pageNo,type:this.searchForm.type,name:this.searchForm.name}).then(function(t){e.tableData=t.data}).catch(this.$handleError)},openAddDsForm:function(e){this.dsFormVisible=!0,this.dsForm={type:ci.MYSQL.code,name:"",host:"",port:"",dbName:"",userName:"",password:"",priority:1,isAutoMeta:1},e?(this.dsFormTitle="新建数据源："+e.name+" 的查询引擎",this.dsForm.isBaseDs=0,this.dsForm.baseDsId=e.id):(this.dsFormTitle="新建数据源",this.dsForm.isBaseDs=1,this.dsForm.baseDsId=0)},openUpdateDsForm:function(e){this.dsFormVisible=!0,1===e.isBaseDs?this.dsFormTitle="编辑数据源":this.dsFormTitle="编辑查询引擎",this.dsForm={id:e.id,type:e.type,name:e.name,remark:e.remark,host:e.host,port:e.port,dbName:e.dbName,userName:e.userName,password:e.password,isBaseDs:e.isBaseDs,baseDsId:e.baseDsId,priority:e.priority,isAutoMeta:e.isAutoMeta}},submitDsForm:function(){var e=this;this.$refs["dsForm"].validate(function(t){if(!t)return!1;yi(e.dsForm).then(function(t){e.dsFormVisible=!1,e.setTableData()}).catch(e.$handleError)})},testDs:function(){var e=this;this.$refs["dsForm"].validate(function(t){if(!t)return!1;gi(e.dsForm).then(function(t){e.$messageSuccess("测试成功!")}).catch(e.$handleError)})},deleteDsById:function(e){var t;t=1===e.isBaseDs?'确认删除数据源<strong class="d-error">"'+e.name+'"</strong>吗?':'确认删除查询引擎<strong class="d-error">"'+e.name+'"</strong>吗?';var a=this;a.$confirmInfo(t,function(){bi({id:e.id}).then(function(e){a.setTableData()}).catch(a.$handleError)})},tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.children&&t.children.length?"success-row":""},openDsOwnerForm:function(e){this.currentDs=e,this.dsOwnerFormVisible=!0,this.setDsOwnerList()},setDsOwnerList:function(){var e=this;this.dsOwnerList=[],ui({id:this.currentDs.id}).then(function(t){e.dsOwnerList=t.data}).catch(this.$handleError)},deleteDsOwnerById:function(e,t){var a=this;pi({dsOwnerId:e}).then(function(e){a.dsOwnerList.splice(t,1)}).catch(this.$handleError)},searchUser:function(e){var t=this;e&&xe({keyword:e}).then(function(e){t.searchUserList=e.data.filter(function(e){var a=t.dsOwnerList.findIndex(function(t){return t.ownerName===e.userName});return-1===a})}).catch(this.$handleError)},addDsOwner:function(e,t){var a=this;hi({dsId:this.currentDs.id,ownerName:e.userName,ownerNameCn:e.userNameCn}).then(function(i){a.dsOwnerList.unshift({id:i.data,ownerName:e.userName,ownerNameCn:e.userNameCn}),a.searchUserList.splice(t,1)}).catch(this.$handleError)},selectUser:function(){this.userNameList=[]}},mounted:function(){this.setTableData()}},vi=Ci,Di=(a("0a37"),Object(c["a"])(vi,oi,si,!1,null,null,null)),Ii=Di.exports,wi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-row",{staticClass:"d-row"},[a("el-card",{attrs:{shadow:"never"}},[a("h1",[e._v("\n                "+e._s(e.ds.name)+"\n            ")])])],1),a("el-row",[a("el-col",{staticClass:"d-col",attrs:{span:8}},[a("el-card",{attrs:{header:"基础信息",shadow:"never"}},[a("el-row",{staticClass:"d-row"},[a("el-col",{staticClass:"d-detail-count",attrs:{span:12}},[e._v("\n                        库\n                        "),a("span",[e._v(e._s(e.ds.dbCount))]),e._v("\n                        个\n                    ")]),a("el-col",{staticClass:"d-detail-count",attrs:{span:12}},[e._v("\n                        表\n                        "),a("span",{},[e._v(e._s(e.ds.tbCount))]),e._v("\n                        个\n                    ")])],1),a("DDetail",{attrs:{data:e.ds,columns:e.detailColumns,col:1}}),a("div",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("负责人")]),a("div",{staticClass:"d-desclist-index-detail"},e._l(e.ds.ownerList,function(t){return a("div",{key:t.id},[a("span",[e._v(e._s(t.ownerNameCn)+"("+e._s(t.ownerName)+")")])])}),0)])],1)],1),a("el-col",{staticClass:"d-col",attrs:{span:16}},[a("el-card",{attrs:{shadow:"never"}},[a("el-row",{staticClass:"d-row"},[a("el-input",{staticStyle:{width:"200px"},attrs:{"suffix-icon":"el-icon-search",size:"small",clearable:"",placeholder:"请输入库名"},on:{change:e.searchDbList},model:{value:e.searchDbKey,callback:function(t){e.searchDbKey="string"===typeof t?t.trim():t},expression:"searchDbKey"}})],1),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"dbName",label:"库名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/data-map/db-manage/"+t.row.id}},[e._v(e._s(t.row.dbName))])]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"描述"}})],1)],1)],1)],1)],1)},Ti=[],Ni={name:"DDsDetail",data:function(){return{ds:{},detailColumns:[{key:"name",title:"名称"},{key:"type",title:"类型"},{key:"updator",title:"最后修改人"},{key:"createTime",title:"创建时间"},{key:"remark",title:"描述"}],searchDbKey:"",tableData:[]}},methods:{setDs:function(){var e=this;fi({id:this.$route.params.id}).then(function(t){e.ds=t.data,e.searchDbList()}).catch(this.$handleError)},searchDbList:function(){var e=this;this.searchDbKey?this.tableData=this.ds.dbList.filter(function(t){return t.dbName.includes(e.searchDbKey.toLowerCase())||t.remark.includes(e.searchDbKey)}):this.tableData=this.ds.dbList}},mounted:function(){this.setDs()}},_i=Ni,xi=Object(c["a"])(_i,wi,Ti,!1,null,null,null),ki=xi.exports;Ii.Detail=ki;var Li=Ii,Ri=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-card",{attrs:{shadow:"never"}},[a("el-row",{staticClass:"d-row"},[a("div",{staticClass:"d-search-form",staticStyle:{float:"left"}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"类型"},on:{change:e.setTableData},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(e.dbTypeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1),a("el-input",{staticClass:"item",attrs:{size:"small",placeholder:"数据源名称/数据库名称","suffix-icon":"el-icon-search",clearable:""},on:{change:e.setTableData},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),a("div",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.openAddDsForm()}}},[e._v("新增数据源")])],1)]),a("el-row",{staticClass:"d-row"},[a("el-table",{attrs:{data:e.tableData.data,"row-key":"id","default-expand-all":"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"name",label:"数据源名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/data-map/ds-manage/"+t.row.id}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"150"}}),a("el-table-column",{attrs:{prop:"host",label:"域名",width:"200"}}),a("el-table-column",{attrs:{prop:"dbName",label:"数据库名称",width:"200"}}),a("el-table-column",{attrs:{prop:"remark",label:"描述"}}),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.openUpdateDsForm(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteDsById(t.row)}}},[e._v("删除")]),1===t.row.isBaseDs?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.openAddDsForm(t.row)}}},[e._v("新建查询引擎")]):e._e(),1===t.row.isBaseDs?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.openDsOwnerForm(t.row)}}},[e._v("变更Owner")]):e._e()]}}])})],1)],1),a("el-row",[a("el-pagination",{attrs:{background:"","current-page":e.pageNo,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.tableData.total},on:{"current-change":e.setTableData,"size-change":e.setTableData,"update:currentPage":function(t){e.pageNo=t},"update:current-page":function(t){e.pageNo=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)],1),a("el-dialog",{attrs:{title:e.dsFormTitle,top:"30px",visible:e.dsFormVisible},on:{"update:visible":function(t){e.dsFormVisible=t}}},[a("el-form",{ref:"dsForm",attrs:{model:e.dsForm,rules:e.formRules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:void 0!=e.dsForm.id},model:{value:e.dsForm.type,callback:function(t){e.$set(e.dsForm,"type",t)},expression:"dsForm.type"}},e._l(e.dbTypeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1)],1),a("el-col",{attrs:{span:12}})],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据源名称",prop:"name"}},[a("el-input",{model:{value:e.dsForm.name,callback:function(t){e.$set(e.dsForm,"name",t)},expression:"dsForm.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.dsForm.remark,callback:function(t){e.$set(e.dsForm,"remark",t)},expression:"dsForm.remark"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"域名",prop:"host"}},[a("el-input",{model:{value:e.dsForm.host,callback:function(t){e.$set(e.dsForm,"host",t)},expression:"dsForm.host"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"端口",prop:"port"}},[a("el-input",{model:{value:e.dsForm.port,callback:function(t){e.$set(e.dsForm,"port",t)},expression:"dsForm.port"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据库名称",prop:"dbName"}},[a("el-input",{attrs:{disabled:void 0!=e.dsForm.id},model:{value:e.dsForm.dbName,callback:function(t){e.$set(e.dsForm,"dbName",t)},expression:"dsForm.dbName"}})],1)],1),a("el-col",{attrs:{span:12}})],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{model:{value:e.dsForm.userName,callback:function(t){e.$set(e.dsForm,"userName",t)},expression:"dsForm.userName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.dsForm.password,callback:function(t){e.$set(e.dsForm,"password",t)},expression:"dsForm.password"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[0===e.dsForm.isBaseDs?a("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:100},model:{value:e.dsForm.priority,callback:function(t){e.$set(e.dsForm,"priority",t)},expression:"dsForm.priority"}})],1):e._e()],1),a("el-col",{attrs:{span:12}},[0===e.dsForm.isBaseDs?a("el-form-item",{attrs:{label:"元数据同步",prop:"isAutoMeta"}},[a("el-radio-group",{model:{value:e.dsForm.isAutoMeta,callback:function(t){e.$set(e.dsForm,"isAutoMeta",t)},expression:"dsForm.isAutoMeta"}},[a("el-radio",{attrs:{label:1}},[e._v("自动")]),a("el-radio",{attrs:{label:0}},[e._v("手动")])],1)],1):e._e()],1)],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitDsForm,cancel:function(t){e.dsFormVisible=!1}},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.testDs}},[e._v("测试连接")])],1)],1),a("el-dialog",{attrs:{title:"变更Owner："+e.currentDs.name,visible:e.dsOwnerFormVisible},on:{"update:visible":function(t){e.dsOwnerFormVisible=t}}},[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-select",{staticStyle:{float:"right",width:"220px"},attrs:{filterable:"","reserve-keyword":"",multiple:"",remote:"",placeholder:"请输入用户名或姓名,搜索添加",size:"small","remote-method":e.searchUser},on:{change:e.selectUser},model:{value:e.userNameList,callback:function(t){e.userNameList=t},expression:"userNameList"}},e._l(e.searchUserList,function(t,i){return a("el-option",{key:t.userName,attrs:{label:t.userNameCn,value:t.userName}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.userNameCn)+"("+e._s(t.userName)+")")]),a("span",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"text",title:"添加用户",icon:"el-icon-plus"},on:{click:function(a){return e.addDsOwner(t,i)}}})],1)])}),1)],1),a("el-row",e._l(e.dsOwnerList,function(t,i){return a("el-col",{key:t.id,staticClass:"d-hover-btn",attrs:{span:6}},[a("span",[e._v(e._s(t.ownerNameCn)+"("+e._s(t.ownerName)+")")]),a("el-button",{attrs:{type:"text",title:"删除用户",icon:"el-icon-delete"},on:{click:function(a){return e.deleteDsOwnerById(t.id,i)}}})],1)}),1)],1)],1)},ji=[],Fi={name:"DDsManager",data:function(){return{searchForm:{type:"",name:""},pageSize:10,pageNo:1,tableData:{total:0,data:[]},dbTypeList:Object.values(ci),dsFormVisible:!1,dsFormTitle:"新建数据源",dsForm:{type:ci.MYSQL.code,name:"",host:"",port:"",dbName:"",userName:"",password:"",isBaseDs:1,priority:0},formRules:{type:[{required:!0,message:"请选择类型",trigger:"change"}],name:[{required:!0,message:"请输入数据源名称",trigger:"blur"}],host:[{required:!0,message:"请输入域名",trigger:"blur"}],dbName:[{required:!0,message:"请输入数据库名称",trigger:"blur"},{type:"string",pattern:/^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$/,message:"只能包含数字、字母、下划线,字母开头",trigger:"blur"}],userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{type:"string",pattern:/^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$/,message:"只能包含数字、字母、下划线,字母开头",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],port:[{type:"string",pattern:/^[1-9]+[0-9]*$/,message:"端口号只能是数字",trigger:"blur"}]},currentDs:{},dsOwnerFormVisible:!1,dsOwnerList:[],searchUserList:[],userNameList:[]}},methods:{setTableData:function(){var e=this;mi({pageSize:this.pageSize,pageNo:this.pageNo,type:this.searchForm.type,name:this.searchForm.name}).then(function(t){e.tableData=t.data}).catch(this.$handleError)},openAddDsForm:function(e){this.dsFormVisible=!0,this.dsForm={type:ci.MYSQL.code,name:"",host:"",port:"",dbName:"",userName:"",password:"",priority:1,isAutoMeta:1},e?(this.dsFormTitle="新建数据源："+e.name+" 的查询引擎",this.dsForm.isBaseDs=0,this.dsForm.baseDsId=e.id):(this.dsFormTitle="新建数据源",this.dsForm.isBaseDs=1,this.dsForm.baseDsId=0)},openUpdateDsForm:function(e){this.dsFormVisible=!0,1===e.isBaseDs?this.dsFormTitle="编辑数据源":this.dsFormTitle="编辑查询引擎",this.dsForm={id:e.id,type:e.type,name:e.name,remark:e.remark,host:e.host,port:e.port,dbName:e.dbName,userName:e.userName,password:e.password,isBaseDs:e.isBaseDs,baseDsId:e.baseDsId,priority:e.priority,isAutoMeta:e.isAutoMeta}},submitDsForm:function(){var e=this;this.$refs["dsForm"].validate(function(t){if(!t)return!1;yi(e.dsForm).then(function(t){e.dsFormVisible=!1,e.setTableData()}).catch(e.$handleError)})},testDs:function(){var e=this;this.$refs["dsForm"].validate(function(t){if(!t)return!1;gi(e.dsForm).then(function(t){e.$messageSuccess("测试成功!")}).catch(e.$handleError)})},deleteDsById:function(e){var t;t=1===e.isBaseDs?'确认删除数据源<strong class="d-error">"'+e.name+'"</strong>吗?':'确认删除查询引擎<strong class="d-error">"'+e.name+'"</strong>吗?';var a=this;a.$confirmInfo(t,function(){bi({id:e.id}).then(function(e){a.setTableData()}).catch(a.$handleError)})},tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.children&&t.children.length?"success-row":""},openDsOwnerForm:function(e){this.currentDs=e,this.dsOwnerFormVisible=!0,this.setDsOwnerList()},setDsOwnerList:function(){var e=this;this.dsOwnerList=[],ui({id:this.currentDs.id}).then(function(t){e.dsOwnerList=t.data}).catch(this.$handleError)},deleteDsOwnerById:function(e,t){var a=this;pi({dsOwnerId:e}).then(function(e){a.dsOwnerList.splice(t,1)}).catch(this.$handleError)},searchUser:function(e){var t=this;e&&xe({keyword:e}).then(function(e){t.searchUserList=e.data.filter(function(e){var a=t.dsOwnerList.findIndex(function(t){return t.ownerName===e.userName});return-1===a})}).catch(this.$handleError)},addDsOwner:function(e,t){var a=this;hi({dsId:this.currentDs.id,ownerName:e.userName,ownerNameCn:e.userNameCn}).then(function(i){a.dsOwnerList.unshift({id:i.data,ownerName:e.userName,ownerNameCn:e.userNameCn}),a.searchUserList.splice(t,1)}).catch(this.$handleError)},selectUser:function(){this.userNameList=[]}},mounted:function(){this.setTableData()}},Si=Fi,Ei=(a("3a8a"),Object(c["a"])(Si,Ri,ji,!1,null,null,null)),Ai=Ei.exports,Mi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-row",{staticClass:"d-row"},[a("el-card",{attrs:{shadow:"never"}},[a("h1",[e._v("\n                "+e._s(e.db.dbName)+"\n            ")])])],1),a("el-row",[a("el-col",{staticClass:"d-col",attrs:{span:8}},[a("el-card",{attrs:{header:"基础信息",shadow:"never"}},[a("el-row",{staticClass:"d-row"},[a("el-col",{staticClass:"d-detail-count",staticStyle:{"border-right":"0px"},attrs:{span:12}},[e._v("\n                        表\n                        "),a("span",{},[e._v(e._s(e.db.tbCount))]),e._v("\n                        个\n                    ")])],1),a("DDetail",{attrs:{data:e.db,columns:e.detailColumns,col:1}})],1)],1),a("el-col",{staticClass:"d-col",attrs:{span:16}},[a("el-card",{attrs:{shadow:"never"}},[a("el-row",{staticClass:"d-row"},[a("el-input",{staticStyle:{width:"200px"},attrs:{"suffix-icon":"el-icon-search",size:"small",clearable:"",placeholder:"请输入表名/中文名"},on:{change:e.setTbList},model:{value:e.searchTbKey,callback:function(t){e.searchTbKey="string"===typeof t?t.trim():t},expression:"searchTbKey"}})],1),a("el-row",{staticClass:"d-row"},[a("el-table",{attrs:{data:e.tableData.data}},[a("el-table-column",{attrs:{prop:"tbName",label:"表名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/data-map/tb-manage/"+t.row.id}},[e._v(e._s(t.row.tbName))])]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"描述"}})],1)],1),a("el-row",{staticClass:"d-right-pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageNo,"page-sizes":[20,50,100],"page-size":e.pageSize,layout:"sizes, prev, pager, next",total:e.tableData.total},on:{"current-change":e.setTbList,"size-change":e.setTbList,"update:currentPage":function(t){e.pageNo=t},"update:current-page":function(t){e.pageNo=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)],1)],1)],1)],1)},Oi=[],zi={name:"DDbDetail",data:function(){return{db:{},detailColumns:[{key:"dbName",title:"名称"},{key:"dsName",title:"数据源归属"},{key:"remark",title:"描述"}],searchTbKey:"",tableData:[],pageSize:20,pageNo:1}},methods:{setDb:function(){var e=this;Pa({id:this.$route.params.id}).then(function(t){e.db=t.data,e.setTbList()}).catch(this.$handleError)},setTbList:function(){var e=this;ja({dbId:this.db.id,tbName:this.searchTbKey,pageNo:this.pageNo,pageSize:this.pageSize}).then(function(t){e.tableData=t.data}).catch(this.$handleError)}},mounted:function(){this.setDb()}},$i=zi,Vi=Object(c["a"])($i,Mi,Oi,!1,null,null,null),Bi=Vi.exports;Ai.Detail=Bi;var Pi=Ai,Ui=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-card",{attrs:{shadow:"never"}},[a("el-row",{staticClass:"d-row d-search-form"},[a("el-select",{staticClass:"item",attrs:{size:"small",clearable:"",filterable:"",placeholder:"库名,可搜索"},on:{change:e.setTableData},model:{value:e.searchForm.dbId,callback:function(t){e.$set(e.searchForm,"dbId",t)},expression:"searchForm.dbId"}},e._l(e.allDbList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.dbName}})}),1),a("el-input",{staticClass:"item",attrs:{size:"small",clearable:"",placeholder:"表关键词搜索","suffix-icon":"el-icon-search"},on:{change:e.setTableData},model:{value:e.searchForm.tbName,callback:function(t){e.$set(e.searchForm,"tbName",t)},expression:"searchForm.tbName"}})],1),a("el-row",{staticClass:"d-row"},[a("el-table",{ref:"table",attrs:{data:e.tableData.data},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",selectable:function(e,t){return!e.hasAuth}}}),a("el-table-column",{attrs:{prop:"tbName",label:"表名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/data-map/tb-manage/"+t.row.id}},[e._v(e._s(t.row.tbName))])]}}])}),a("el-table-column",{attrs:{prop:"tbNameCn",label:"中文名",width:"300"}}),a("el-table-column",{attrs:{prop:"tagList",label:"标签",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"d-tag-group"},e._l(t.row.tagList,function(t){return a("el-tag",{key:t.id,attrs:{size:"mini",effect:"plain"}},[e._v(e._s(t.name))])}),1)]}}])}),a("el-table-column",{attrs:{prop:"dbName",label:"数据库",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/data-map/db-manage/"+t.row.dbId}},[e._v(e._s(t.row.dbName))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hasAuth?e._e():a("el-button",{attrs:{type:"text",size:"mini"}},[e._v("申请权限")]),t.row.hasAuth?a("el-button",{attrs:{disabled:"",type:"text",size:"mini"}},[e._v("已有权限")]):e._e()]}}])})],1)],1),a("el-row",[a("div",[a("div",{staticStyle:{float:"left"}},[a("el-checkbox",{staticStyle:{"margin-left":"14px"},on:{change:e.changeDownCheck},model:{value:e.downCheckAll,callback:function(t){e.downCheckAll=t},expression:"downCheckAll"}}),a("el-button",{attrs:{size:"mini"}},[e._v("申请权限")])],1),a("div",{staticStyle:{float:"right"}},[a("el-pagination",{attrs:{background:"","current-page":e.pageNo,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.tableData.total},on:{"current-change":e.setTableData,"size-change":e.setTableData,"update:currentPage":function(t){e.pageNo=t},"update:current-page":function(t){e.pageNo=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)])])],1)],1)},Hi=[],Yi={name:"DTbManage",data:function(){return{isMy:!0,searchForm:{dbId:"",tbName:""},pageNo:1,pageSize:10,tableData:{},allDbList:[],downCheckAll:!1,selectTbIdList:[]}},methods:{clickTab:function(e){this.isMy=e},setAllDbList:function(){var e=this;Ba().then(function(t){e.allDbList=t.data}).catch(this.$handleError)},setTableData:function(){var e=this;this.downCheckAll=!1,ja({dbId:this.searchForm.dbId,tbName:this.searchForm.tbName,pageNo:this.pageNo,pageSize:this.pageSize}).then(function(t){e.tableData=t.data}).catch(this.$handleError)},changeDownCheck:function(){this.downCheckAll?this.$refs.table.toggleAllSelection():this.$refs.table.clearSelection()},handleSelectionChange:function(e){this.selectTbIdList=e.map(function(e){return e.id}),this.downCheckAll=e.length===this.tableData.data.filter(function(e){return!e.hasAuth}).length}},mounted:function(){this.setAllDbList(),this.setTableData()}},Gi=Yi,Wi=Object(c["a"])(Gi,Ui,Hi,!1,null,null,null),Xi=Wi.exports,Ji=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-row",{staticClass:"d-row"},[a("el-card",{attrs:{shadow:"never"}},[a("h1",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n                "+e._s(e.tb.dbName)+"."+e._s(e.tb.tbName)+"\n            ")]),e.tb.hasAuth?e._e():a("el-button",{attrs:{type:"primary",plain:"",size:"small"}},[e._v("申请权限")])],1)],1),a("el-row",[a("el-col",{staticClass:"d-col",attrs:{span:6}},[a("el-card",{attrs:{header:"基础信息",shadow:"never"}},[a("el-row",{staticClass:"d-row"},[a("el-col",{staticClass:"d-detail-count",staticStyle:{"border-right":"0px"},attrs:{span:12}},[e._v("\n                        读取\n                        "),a("span",[e._v(e._s(e.tb.readCount))]),e._v("\n                        次\n                    ")])],1),a("DDetail",{attrs:{data:e.tb,columns:e.detailColumns,col:1}}),a("div",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("标签")]),a("div",{staticClass:"d-desclist-index-detail d-tag-group"},[e._l(e.tb.tagList,function(t){return a("el-tag",{key:t.id,attrs:{size:"mini",effect:"plain",closable:e.tb.hasAuth}},[e._v(e._s(t.name))])}),e.tb.hasAuth?a("i",{staticClass:"el-icon-circle-plus-outline d-icon",attrs:{title:"新增标签"}}):e._e()],2)])],1)],1),a("el-col",{staticClass:"d-col",attrs:{span:18}},[a("el-card",{attrs:{shadow:"never"}},[a("el-tabs",{staticStyle:{width:"100%"},attrs:{type:"card"},on:{"tab-click":e.clickTab},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"字段信息",name:"column"}},[a("el-table",{attrs:{data:e.tb.colList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"colName",label:"字段名",width:"150"}}),a("el-table-column",{attrs:{prop:"colLabel",label:"中文名",width:"180"}}),a("el-table-column",{attrs:{prop:"dataType",label:"数据类型",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"d-icon fa",class:"fa-"+e.dataTypeObj[t.row.dataType].icon}),a("span",[e._v(e._s(e.dataTypeObj[t.row.dataType].name))])]}}])}),a("el-table-column",{attrs:{prop:"originalDataType",label:"原始类型",width:"120"}}),a("el-table-column",{attrs:{prop:"colComment",label:"描述"}})],1)],1),a("el-tab-pane",{attrs:{label:"预览数据",name:"preivewData"}},[e.tb.hasAuth?e.previewData?a("div",[a("div",{staticClass:"head"},[e._v("\n                                显示最新\n                                "),a("span",{staticClass:"d-strong-count"},[e._v(e._s(e.previewData.data.length))]),e._v("\n                                条数据\n                            ")]),a("el-table",{attrs:{data:e.previewData.data,height:"500",width:"100%"}},e._l(e.previewData.colList,function(t){return a("el-table-column",{key:t.colName,attrs:{prop:t.colName,label:t.colLabel,width:t.colLabel.length>10?16*t.colLabel.length+20:150},scopedSlots:e._u([{key:"header",fn:function(t){return[a("i",{staticClass:"d-icon fa",class:"fa-"+e.dataTypeObj[e.colObj[t.column.property].dataType].icon}),a("span",[e._v(e._s(t.column.label))])]}}],null,!0)})}),1)],1):e._e():a("div",{staticClass:"d-no-data-tip"},[e._v("\n                            暂无权限查看数据,可点击左上角按钮申请权限\n                        ")])]),a("el-tab-pane",{attrs:{label:"应用追溯",name:"app"}})],1)],1)],1)],1)],1)},Ki=[],qi=(E.dataMap.be,{date:{code:"date",name:"日期",icon:"calendar-o"},num:{code:"num",name:"数值",icon:"hashtag"},text:{code:"text",name:"文本",icon:"text-width"},text_day_10:{code:"text_day_10",name:"文本_日_YYYY-MM-DD",icon:"calendar"},text_day_8:{code:"text_day_8",name:"文本_日_YYYYMMDD",icon:"calendar"},text_month_7:{code:"text_month_7",name:"文本_月_YYYY-MM",icon:"calendar"},text_month_6:{code:"text_month_6",name:"文本_月_YYYYMM",icon:"calendar"},text_year:{code:"text_year",name:"文本_年",icon:"calendar"}}),Zi={name:"DTbDetail",data:function(){return{tb:{},dataTypeObj:qi,detailColumns:[{key:"tbName",title:"名称"},{key:"dbName",title:"数据库归属"},{key:"dsName",title:"数据源归属"},{key:"lastDataModifiedTime",title:"最后数据更新时间"},{key:"remark",title:"描述"},{key:"queryEngineTypeList",title:"支持引擎类型"}],activeTab:"column",previewData:null,colObj:{}}},methods:{setTb:function(){var e=this;Aa({id:this.$route.params.id}).then(function(t){e.tb=t.data}).catch(this.$handleError)},clickTab:function(e,t){"preivewData"===e.paneName&&this.setPreviewData()},setPreviewData:function(){var e=this;this.tb.hasAuth&&!this.previewData&&Ma({id:this.$route.params.id}).then(function(t){e.previewData=t.data,e.previewData.colList.forEach(function(t){e.colObj[t.colName]=t})}).catch(this.$handleError)}},mounted:function(){this.setTb()}},Qi=Zi,er=Object(c["a"])(Qi,Ji,Ki,!1,null,null,null),tr=er.exports;Xi.Detail=tr;var ar=Xi;va.MyTb=ni,va.DsManager=Li,va.DbManager=Pi,va.TbManager=ar;var ir=va,rr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DLayout",{attrs:{logo:"数据可视化"}},[a("DMenuNav",{attrs:{data:e.menuList}})],1)},nr=[],or={name:"DDataVisual",data:function(){return{menuList:[{name:"仪表盘",path:"/data-visual/dashboard"},{name:"模板",path:"/data-visual/template"},{name:"图表示例",path:"/data-visual/chart-demo"}]}}},sr=or,dr=Object(c["a"])(sr,rr,nr,!1,null,null,null),lr=dr.exports,cr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-dashboard"},[a("div",{staticClass:"d-dash-side"},[a("div",{staticClass:"d-dash-menu-head"},[a("div",{staticClass:"d-dash-search"},[a("el-input",{staticClass:"d-visual-input",attrs:{size:"mini",clearable:"",placeholder:"搜索仪表盘/图表","suffix-icon":"el-icon-search"},model:{value:e.keyword,callback:function(t){e.keyword="string"===typeof t?t.trim():t},expression:"keyword"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.keyword,expression:"keyword"}],staticClass:"d-dash-search-result d-btn-list"},[e.searchResult.chartList.length?a("div",{staticClass:"d-dash-search-result-type"},[a("div",{staticClass:"head"},[a("span",{staticClass:"type"},[e._v("图表")]),a("span",{staticClass:"count"},[e._v(e._s(e.searchResult.chartList.length))])]),a("ul",{staticClass:"d-dash-search-result-list"},e._l(e.searchResult.chartList,function(t){return a("li",{key:t.id,on:{click:function(a){return e.clickSearchedChart(t)}}},[a("p",{staticClass:"title d-ellipsis",attrs:{title:t.name}},[e._v(e._s(t.name))]),a("p",{staticClass:"sub d-ellipsis",attrs:{title:t.dash.name+"/"+t.proj.name}},[e._v(e._s(t.dash.name)+"/"+e._s(t.proj.name))])])}),0)]):e._e(),e.searchResult.dashList.length?a("div",{staticClass:"d-dash-search-result-type"},[a("div",{staticClass:"head"},[a("span",{staticClass:"type"},[e._v("仪表盘")]),a("span",{staticClass:"count"},[e._v(e._s(e.searchResult.dashList.length))])]),a("ul",{staticClass:"d-dash-search-result-list"},e._l(e.searchResult.dashList,function(t){return a("li",{key:t.id,on:{click:function(a){return e.clickSearchedDash(t)}}},[a("p",{staticClass:"title d-ellipsis",attrs:{title:t.name}},[e._v(e._s(t.name))]),a("p",{staticClass:"sub d-ellipsis",attrs:{title:t.proj.name}},[e._v(e._s(t.proj.name))])])}),0)]):e._e(),e.searchResult.projList.length?a("div",{staticClass:"d-dash-search-result-type"},[a("div",{staticClass:"head"},[a("span",{staticClass:"type"},[e._v("文件夹")]),a("span",{staticClass:"count"},[e._v(e._s(e.searchResult.projList.length))])]),a("ul",{staticClass:"d-dash-search-result-list"},e._l(e.searchResult.projList,function(t){return a("li",{key:t.id,on:{click:function(a){return e.clickSearchedProj(t)}}},[a("p",{staticClass:"title d-ellipsis",attrs:{title:t.name}},[e._v(e._s(t.name))])])}),0)]):e._e(),e.searchResult.chartList.length||e.searchResult.dashList.length||e.searchResult.projList.length?e._e():a("div",{staticClass:"d-no-data-tip"},[e._v("\n                        没有找到图表/仪表盘/文件\n                    ")])])],1),a("div",{staticClass:"d-dash-btn"},[a("i",{staticClass:"el-icon-plus",attrs:{title:"创建文件夹/仪表盘"}}),a("ul",{staticClass:"d-dash-head-btn-list d-btn-list"},[a("li",{on:{click:e.openAddProj}},[e._v("创建文件夹")]),a("li",{on:{click:e.openAddDash}},[e._v("创建仪表盘")])])])]),a("ul",{staticClass:"d-dash-menu",attrs:{id:"dashSideMenu"}},e._l(e.projList,function(t){return a("li",{key:t.id,staticClass:"d-project-item",attrs:{id:"proj_"+t.id}},[a("div",{staticClass:"d-project-name"},[a("div",{staticClass:"name d-ellipsis",on:{click:function(a){return e.clickProj(t)},mouseover:function(a){e.hoverProjItem(a,t)}}},[a("i",{staticClass:"fa fa-folder-o"}),a("span",[e._v(e._s(t.name))])]),t.editAuth?a("div",{staticClass:"btn"},[a("i",{staticClass:"fa fa-ellipsis-v"}),a("ul",{staticClass:"d-project-btn-list d-btn-list",attrs:{id:"proj_btn_"+t.id}},[a("li",{on:{click:function(a){return e.openUpdateProj(t)}}},[e._v("编辑文件夹")]),a("li",{on:{click:function(a){return e.openMoveProj(t)}}},[e._v("移动文件夹")]),a("li",{on:{click:function(a){return e.openDeleteProj(t)}}},[e._v("删除文件夹")])])]):e._e(),a("div",{staticClass:"d-project-detail d-btn-list",attrs:{id:"proj_detail_"+t.id}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{staticClass:"d-desclist-index"},[a("h4",[e._v("文件夹")])]),a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("名称")]),a("div",{staticClass:"d-desclist-index-detail"},[e._v(e._s(t.name))])]),a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("标签")]),a("div",{staticClass:"d-desclist-index-detail d-tag-group"},e._l(t.tagList,function(t){return a("el-tag",{key:t.id,attrs:{size:"mini"}},[e._v(e._s(t.name))])}),1)]),a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("描述")]),a("div",{staticClass:"d-desclist-index-detail"},[e._v(e._s(t.remark))])])],1)],1)]),a("ul",{staticClass:"d-dash-list"},e._l(t.dashList,function(i){return a("li",{key:i.id,staticClass:"d-dash-item",attrs:{id:"dash_"+i.id},on:{click:function(a){return e.clickDash(t,i)}}},[a("div",{staticClass:"name d-ellipsis",on:{mouseover:function(t){e.hoverDashItem(t,i)}}},[a("i",{staticClass:"fa fa-file-image-o"}),a("span",[e._v(e._s(i.name))])]),i.editAuth?a("div",{staticClass:"btn"},[a("i",{staticClass:"fa fa-ellipsis-v"}),a("ul",{staticClass:"d-dash-btn-list d-btn-list",attrs:{id:"dash_btn_"+i.id}},[a("li",{on:{click:function(a){return e.openUpdateDash(t,i)}}},[e._v("编辑仪表盘")]),a("li",{on:{click:function(a){return e.openMoveDash(t,i)}}},[e._v("移动仪表盘")]),a("li",{on:{click:function(a){return e.openCopyDash(t,i)}}},[e._v("复制仪表盘")]),a("li",{on:{click:function(a){return e.openDeleteDash(t,i)}}},[e._v("删除仪表盘")])])]):e._e(),a("div",{staticClass:"d-dash-detail d-btn-list",attrs:{id:"dash_detail_"+i.id}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{staticClass:"d-desclist-index"},[a("h4",[e._v("仪表盘")])]),a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("名称")]),a("div",{staticClass:"d-desclist-index-detail"},[e._v(e._s(i.name))])]),a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("标签")]),a("div",{staticClass:"d-desclist-index-detail d-tag-group"},e._l(i.tagList,function(t){return a("el-tag",{key:t.id,attrs:{size:"mini"}},[e._v(e._s(t.name))])}),1)]),a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("描述")]),a("div",{staticClass:"d-desclist-index-detail"},[e._v(e._s(i.remark))])]),a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("负责人")]),a("div",{staticClass:"d-desclist-index-detail"},[e._v(e._s(i.creatorCn)+"("+e._s(i.creator)+")")])]),a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("负责部门")]),a("div",{staticClass:"d-desclist-index-detail"},[e._v(e._s(i.departmentName))])])],1)],1)])}),0)])}),0),a("DLoading",{attrs:{loading:e.loading}})],1),a("div",{staticClass:"d-dash-content"},[a("router-view")],1),a("el-dialog",{attrs:{title:e.projFormTitle,visible:e.projFormVisible},on:{"update:visible":function(t){e.projFormVisible=t}}},[a("el-form",{ref:"projForm",attrs:{model:e.projForm,rules:e.projFormRules,"label-width":"50px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.projForm.name,callback:function(t){e.$set(e.projForm,"name","string"===typeof t?t.trim():t)},expression:"projForm.name"}})],1),a("el-form-item",{attrs:{label:"标签"}},[a("div",{staticClass:"d-tag-group"},[e._l(e.projForm.tagList,function(t,i){return a("el-tag",{key:t.id,attrs:{closable:""},on:{close:function(a){return e.handleCloseProjTag(t,i)}}},[e._v(e._s(t.name))])}),e.projTagInputVisible?a("el-input",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{blur:e.handleProjTagInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleProjTagInputConfirm(t)}},model:{value:e.projTagValue,callback:function(t){e.projTagValue=t},expression:"projTagValue"}}):a("el-button",{attrs:{size:"small",title:"添加标签"},on:{click:e.showProjTagInput}},[e._v("+")])],2)]),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.projForm.remark,callback:function(t){e.$set(e.projForm,"remark","string"===typeof t?t.trim():t)},expression:"projForm.remark"}})],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitProjForm,cancel:function(t){e.projFormVisible=!1}},slot:"footer"})],1),a("el-dialog",{attrs:{title:e.dashFormTitle,visible:e.dashFormVisible},on:{"update:visible":function(t){e.dashFormVisible=t}}},[a("el-form",{ref:"dashForm",attrs:{model:e.dashForm,rules:e.dashFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"归属文件夹",prop:"projId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:""},model:{value:e.dashForm.projId,callback:function(t){e.$set(e.dashForm,"projId",t)},expression:"dashForm.projId"}},e._l(e.projList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.dashForm.name,callback:function(t){e.$set(e.dashForm,"name","string"===typeof t?t.trim():t)},expression:"dashForm.name"}})],1),a("el-form-item",{attrs:{label:"标签"}},[a("div",{staticClass:"d-tag-group"},[e._l(e.dashForm.tagList,function(t,i){return a("el-tag",{key:t.id,attrs:{closable:""},on:{close:function(a){return e.handleCloseDashTag(t,i)}}},[e._v(e._s(t.name))])}),e.dashTagInputVisible?a("el-input",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{blur:e.handleDashTagInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleDashTagInputConfirm(t)}},model:{value:e.dashTagValue,callback:function(t){e.dashTagValue=t},expression:"dashTagValue"}}):a("el-button",{attrs:{size:"small",title:"添加标签"},on:{click:e.showDashTagInput}},[e._v("+")])],2)]),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.dashForm.remark,callback:function(t){e.$set(e.dashForm,"remark","string"===typeof t?t.trim():t)},expression:"dashForm.remark"}})],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitDashForm,cancel:function(t){e.dashFormVisible=!1}},slot:"footer"})],1)],1)},mr=[],ur=E.dataVisual.be+"/api/dashboard",pr={listUserDash:{api:ur+"/list-by-user",name:"获取登录用户有权限的仪表盘,最菜单展现用"},addOrUpdateDash:{api:ur+"/add-or-update",name:"新增或者修改一个仪表盘基本信息"},deleteDash:{api:ur+"/delete",name:"删除一个仪表盘"},moveDash:{api:ur+"/move",name:"移动一个仪表盘"},copyDash:{api:ur+"/copy",name:"复制一个仪表盘"},getDashMetaForShow:{api:ur+"/get-for-show",name:"获取一个渲染用的仪表盘元数据"}},hr=function(e){return M(pr.listUserDash.api,e)},fr=function(e){return M(pr.addOrUpdateDash.api,e)},br=function(e){return M(pr.deleteDash.api,e)},yr=function(e){return M(pr.getDashMetaForShow.api,e)},gr=E.dataVisual.be+"/api/project",Cr={addOrUpdateProj:{api:gr+"/add-or-update",name:"新增或者修改一个文件夹基本信息"},deleteProj:{api:gr+"/delete",name:"删除一个文件夹"},moveProj:{api:gr+"/move",name:"移动一个文件夹"}},vr=function(e){return M(Cr.addOrUpdateProj.api,e)},Dr=function(e){return M(Cr.deleteProj.api,e)},Ir={name:"DDashboard",data:function(){return{keyword:"",projList:[],activeProjId:"",activeDashId:"",searchResult:{chartList:[],dashList:[],projList:[]},projFormTitle:"",projFormVisible:!1,projForm:{id:"",name:"",remark:"",tagList:[],delTagIdList:[]},projFormRules:{name:[{required:!0,message:"请输入文件夹名称",trigger:"blur"}]},projTagInputVisible:!1,projTagValue:"",dashFormTitle:"",dashFormVisible:!1,dashForm:{id:"",name:"",remark:"",projId:"",tagList:[],delTagIdList:[]},dashFormRules:{name:[{required:!0,message:"请输入仪表盘名称",trigger:"blur"}],projId:[{required:!0,message:"请选择文件夹归属",trigger:"change"}]},dashTagInputVisible:!1,dashTagValue:"",loading:!1}},methods:{clickProj:function(e){var t=document.getElementById("proj_"+e.id);t.classList.toggle("active");var a=t.querySelector(".d-project-name .name i");a.classList.contains("fa-folder-open-o")?(a.classList.remove("fa-folder-open-o"),a.classList.add("fa-folder-o")):(a.classList.add("fa-folder-open-o"),a.classList.remove("fa-folder-o"))},activeProj:function(e){var t=document.getElementById("proj_"+e.id);if(!t.classList.contains("active")){t.classList.add("active");var a=t.querySelector(".d-project-name .name i");a.classList.add("fa-folder-open-o"),a.classList.remove("fa-folder-o")}},setProjList:function(e,t){var a=this;this.loading=!0,hr().then(function(i){if(a.loading=!1,a.projList=i.data,e&&t)void 0===a.$route.params.dashId&&a.$router.push("/data-visual/dashboard/"+e+"/"+t);else{var r=a.projList[0],n=r.dashList[0];a.$router.push("/data-visual/dashboard/"+r.id+"/"+n.id)}a.$nextTick(function(){this.setActive()})}).catch(this.$handleError)},openAddProj:function(){this.projForm={name:"",remark:"",tagList:[],delTagIdList:[]},this.projFormTitle="创建文件夹",this.projFormVisible=!0},submitProjForm:function(){var e=this;this.$refs["projForm"].validate(function(t){if(!t)return!1;vr({id:e.projForm.id,name:e.projForm.name,remark:e.projForm.remark,addTagList:JSON.stringify(e.projForm.tagList.filter(function(e){return void 0===e.id})),delTagIdList:e.projForm.delTagIdList.toString()}).then(function(t){e.projFormVisible=!1,e.setProjList()}).catch(e.$handleError)})},openUpdateProj:function(e){this.projForm={id:e.id,name:e.name,remark:e.remark,tagList:e.tagList,delTagIdList:[]},this.projFormTitle="编辑文件夹",this.projFormVisible=!0},showProjTagInput:function(){this.projTagInputVisible=!0,this.projTagValue=""},handleProjTagInputConfirm:function(){if(this.projTagValue){if(this.projTagValue.length>50)return void this.$messageWarn("标签长度不能超过50个字符!");this.projForm.tagList.push({name:this.projTagValue})}this.projTagInputVisible=!1,this.projTagValue=""},handleCloseProjTag:function(e,t){e.id&&this.projForm.delTagIdList.push(e.id),this.projForm.tagList.splice(t,1)},openMoveProj:function(e){},openDeleteProj:function(e){var t='确认删除文件夹<strong class="d-error">"'+e.name+'"</strong>吗?',a=this;a.$confirmInfo(t,function(){Dr({id:e.id}).then(function(e){a.activeProjId="",a.setProjList()}).catch(a.$handleError)})},clickDash:function(e,t,a){var i="/data-visual/dashboard/"+e.id+"/"+t.id;a&&(i=i+"?chartId="+a.id+"&tabId="+a.tabId),this.$router.push(i)},openAddDash:function(){this.dashForm={name:"",remark:"",projId:this.projList.length?this.projList[0].id:"",tagList:[],delTagIdList:[]},this.dashFormTitle="创建仪表盘",this.dashFormVisible=!0},openUpdateDash:function(e,t){this.dashForm={id:t.id,name:t.name,remark:t.remark,projId:e.id,tagList:t.tagList,delTagIdList:[]},this.dashFormTitle="编辑仪表盘",this.dashFormVisible=!0},submitDashForm:function(){var e=this;this.$refs["dashForm"].validate(function(t){if(!t)return!1;fr({id:e.dashForm.id,name:e.dashForm.name,remark:e.dashForm.remark,projId:e.dashForm.projId,addTagList:JSON.stringify(e.dashForm.tagList.filter(function(e){return void 0===e.id})),delTagIdList:e.dashForm.delTagIdList.toString()}).then(function(t){e.dashFormVisible=!1,e.setProjList(e.dashForm.projId,t.data)}).catch(e.$handleError)})},showDashTagInput:function(){this.dashTagInputVisible=!0,this.dashTagValue=""},handleDashTagInputConfirm:function(){if(this.dashTagValue){if(this.dashTagValue.length>50)return void this.$messageWarn("标签长度不能超过50个字符!");this.dashForm.tagList.push({name:this.dashTagValue})}this.dashTagInputVisible=!1,this.dashTagValue=""},handleCloseDashTag:function(e,t){e.id&&this.dashForm.delTagIdList.push(e.id),this.dashForm.tagList.splice(t,1)},openMoveDash:function(e,t){},openDeleteDash:function(e,t){var a='确认删除仪表盘<strong class="d-error">"'+t.name+'"</strong>吗?',i=this;i.$confirmInfo(a,function(){br({id:t.id}).then(function(e){Number(i.activeDashId)===t.id&&(i.activeDashId=""),i.setProjList()}).catch(i.$handleError)})},openCopyDash:function(e,t){},setActive:function(){this.$nextTick(function(){var e=document.getElementById("dash_"+this.activeDashId);e&&e.classList.remove("active"),this.activeProjId=this.$route.params.projId,this.activeDashId=this.$route.params.dashId;var t=document.getElementById("dash_"+this.activeDashId);t.classList.add("active"),this.activeProj({id:this.activeProjId}),this.scrollToActiveDash()})},searchDash:function(){var e=this;this.keyword&&(this.searchResult={chartList:[],dashList:[],projList:[]},this.projList.forEach(function(t){t.name.includes(e.keyword)&&e.searchResult.projList.push({id:t.id,name:t.name}),t.dashList.forEach(function(a){a.name.includes(e.keyword)&&e.searchResult.dashList.push({id:a.id,name:a.name,proj:{id:t.id,name:t.name}}),a.chartList.forEach(function(i){i.name.includes(e.keyword)&&e.searchResult.chartList.push({id:i.id,name:i.name,tabId:i.tabId,proj:{id:t.id,name:t.name},dash:{id:a.id,name:a.name}})})})}))},clickSearchedChart:function(e){this.keyword="",this.clickDash(e.proj,e.dash,e)},clickSearchedDash:function(e){this.keyword="",this.clickDash(e.proj,e)},clickSearchedProj:function(e){this.keyword="";var t=this.projList.filter(function(t){return t.id===e.id})[0];t.dashList.length&&this.clickDash(t,t.dashList[0])},hoverDashItem:function(e,t){var a=document.getElementById("dash_detail_"+t.id);a.style.top=e.clientY-a.clientHeight/2+"px"},hoverProjItem:function(e,t){var a=document.getElementById("proj_detail_"+t.id);a.style.top=e.clientY-a.clientHeight/2+"px"},scrollToActiveDash:function(){var e=document.getElementById("dashSideMenu"),t=document.getElementById("dash_"+this.activeDashId);e.scrollTo(0,t.offsetTop-100)}},watch:{"$route.path":function(){this.setActive()},keyword:"searchDash"},mounted:function(){this.setProjList(this.$route.params.projId,this.$route.params.dashId)}},wr=Ir,Tr=(a("3b1c"),Object(c["a"])(wr,cr,mr,!1,null,null,null)),Nr=Tr.exports,_r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-dash-container"},[a("div",{staticClass:"head"},[a("h2",{staticClass:"title"},[e._v(e._s(e.dash.name))]),a("div",{staticClass:"btn"},[e.dash.editAuth?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.openAddChart}},[a("i",{staticClass:"fa fa-bar-chart-o d-icon"}),e._v("添加图表\n            ")]):e._e(),e.dash.editAuth?a("el-button",{attrs:{type:"text",size:"mini"}},[a("i",{staticClass:"fa fa-bookmark-o d-icon"}),e._v("添加页签\n            ")]):e._e(),a("el-button",{attrs:{type:"text",size:"mini"}},[a("i",{staticClass:"fa fa-expand d-icon"}),e._v("全屏\n            ")]),e.dash.editAuth?a("el-button",{attrs:{type:"text",size:"mini"}},[a("i",{staticClass:"fa fa-filter d-icon"}),e._v("全局筛选\n            ")]):e._e(),a("el-button",{staticClass:"more",attrs:{type:"text",size:"mini",title:"更多操作"}},[a("i",{staticClass:"fa fa-ellipsis-v d-icon"}),a("ul",{staticClass:"d-btn-list"},[a("li",[e._v("导出仪表盘")]),a("li",[e._v("导出Word")]),a("li",[e._v("导出PDF")])])])],1)]),this.dash.globalFilterList&&this.dash.globalFilterList.length?a("div",{staticClass:"filter"},[a("i",{staticClass:"fa fa-filter d-icon"}),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-search"}},[e._v("查询")])],1):e._e(),a("div",{staticClass:"d-dash-main",style:e.dashMainStyle,attrs:{id:"main_"+e.dashId}},[e.hasTab?a("el-tabs",{model:{value:e.activeTabId,callback:function(t){e.activeTabId=t},expression:"activeTabId"}},e._l(e.tabList,function(t){return a("el-tab-pane",{key:t.id,attrs:{label:t.name,name:t.id+""}},[a("DChartList",{attrs:{tabId:t.id,activeTabId:e.activeTabId,activeChartId:e.activeChartId,data:t.chartList,containerWidth:e.containerWidth}})],1)}),1):a("DChartList",{attrs:{tabId:-1,activeTabId:-1,activeChartId:e.activeChartId,data:e.chartList,containerWidth:e.containerWidth}})],1),a("DLoading",{attrs:{loading:e.loading}}),a("el-dialog",{attrs:{visible:e.showAddChartModal,title:"添加图表",width:"360px"},on:{"update:visible":function(t){e.showAddChartModal=t}}},[a("el-row",{staticClass:"d-row"},[e._v("\n            选择图表类型\n        ")]),a("el-row",{staticClass:"d-box-middle d-row"},[a("el-radio-group",{model:{value:e.largeChartType,callback:function(t){e.largeChartType=t},expression:"largeChartType"}},e._l(e.largeChartTypeList,function(t,i){return a("el-radio",{key:t.code,attrs:{label:t.code}},[e._v(e._s(t.name))])}),1)],1),3===e.largeChartType?a("div",[a("el-row",{staticClass:"d-row"},[e._v("\n                外部报表URL\n            ")]),a("el-row",{staticClass:"d-row"},[a("el-input",{attrs:{size:"mini",clearable:"",placeholder:"请输入外部报表URL"},model:{value:e.externalReportUrl,callback:function(t){e.externalReportUrl="string"===typeof t?t.trim():t},expression:"externalReportUrl"}})],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:"",size:"mini"},on:{submit:e.submitExternalReport,cancel:function(t){e.showAddChartModal=!1}},slot:"footer"})],1):a("div",[a("el-row",{staticClass:"d-row"},[e._v("\n                选择工作表\n            ")]),a("el-row",{staticClass:"d-row"},[a("el-input",{attrs:{size:"mini",clearable:"",placeholder:"搜索工作表","suffix-icon":"el-icon-search"},on:{change:e.searchTable},model:{value:e.tableKeyWord,callback:function(t){e.tableKeyWord="string"===typeof t?t.trim():t},expression:"tableKeyWord"}})],1),a("el-row",{staticClass:"d-row"},[a("div",{staticClass:"d-tb-panel"},[a("ul",{staticClass:"d-tb-list"},e._l(e.searchedTableList,function(t,i){return a("li",{key:i,staticClass:"d-tb-item"},[a("h4",{staticClass:"d-tb-title d-ellipsis",attrs:{title:t.dbName+"."+t.tbName}},[e._v(e._s(t.dbName)+"."+e._s(t.tbName))]),a("div",{staticClass:"d-tb-desc d-ellipsis",attrs:{title:t.tbNameCn}},[e._v(e._s(t.tbNameCn))])])}),0)])])],1)],1)],1)},xr=[],kr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-dash-chart",attrs:{id:"dash_tab_"+e.tabId}},[a("ul",{staticClass:"d-chart-item-list",attrs:{id:"container_tab_"+e.tabId}},e._l(e.data,function(t){return a("DChartItem",{key:t.id,ref:"chart_item_"+t.id,refInFor:!0,class:{active:t.id+""===e.activeChartId},attrs:{chart:t,visibled:t.visibled},on:{resizing:function(a,i,r){e.resizeChart(t,a,i,r)},"resize-over":function(a,i,r){e.resizeChartOver(t,a,i,r)},moving:function(a,i,r){e.moveChart(t,a,i,r)},"move-over":function(a,i,r){e.moveChartOver(t,a,i,r)}}})}),1)])},Lr=[],Rr=E.dataVisual.be+"/api/chart",jr={queryData:{api:Rr+"/query-data",name:"查询数据"},addOrUpdateChart:{api:Rr+"/add-or-update",name:"新增或者修改一个图表配置"},deleteChart:{api:Rr+"/delete",name:"删除一个图表"},moveChart:{api:Rr+"/move",name:"移动一个图表"},copyChart:{api:Rr+"/copy",name:"复制一个图表"},updateChartPosition:{api:Rr+"/update-position",name:"修改图标的位置"}},Fr=function(e){return M(jr.queryData.api,e)},Sr=function(e){return M(jr.updateChartPosition.api,e)},Er=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.clickOutside,expression:"clickOutside"}],staticClass:"d-chart-item",class:{"edit-chart":e.chart.editAuth},attrs:{id:"chart_"+e.chart.id},on:{mousedown:e.mouseDownDrag}},[a("DChartContainer",{attrs:{chart:e.chart,globalFilterValue:e.globalFilterValue,resizeCount:e.resizeCount,visibled:e.visibled}}),e.chart.editAuth?a("div",{staticClass:"d-chart-size-btn",attrs:{id:"size_btn_"+e.chart.id},on:{mousedown:e.mouseDownResize}},[a("i",{staticClass:"fa fa-arrow-right"})]):e._e()],1)},Ar=[],Mr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-chart-container"},[a("div",{staticClass:"head"},[a("div",{staticClass:"left d-ellipsis"},["INDEX_CARD"===e.chartMeta.chartType&&e.showChart?e._e():a("span",{staticClass:"title"},[e._v(e._s(e.chart.name))]),a("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[a("el-tooltip",{attrs:{placement:"bottom",effect:"light"}},[a("div",{staticStyle:{width:"300px","max-height":"400px",overflow:"auto"},attrs:{slot:"content"},slot:"content"},[a("el-row",{staticStyle:{margin:"0px"},attrs:{gutter:24}},[a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-detail"},[a("h4",[e._v(e._s(1===e.chart.isCertified?"数据部门已认证,数据质量可靠":"未经过数据部门认证"))])])]),a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("标签")]),a("div",{staticClass:"d-desclist-index-detail d-tag-group"},e._l(e.chart.tagList,function(t){return a("el-tag",{key:t.id,attrs:{size:"mini"}},[e._v(e._s(t.name))])}),1)]),a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("描述")]),a("div",{staticClass:"d-desclist-index-detail"},[e._v(e._s(e.chart.remark))])]),a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("负责人")]),a("div",{staticClass:"d-desclist-index-detail"},[e._v(e._s(e.chart.creatorCn)+"("+e._s(e.chart.creator)+")")])]),a("el-col",{staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v("负责部门")]),a("div",{staticClass:"d-desclist-index-detail"},[e._v(e._s(e.chart.departmentName))])])],1)],1),a("i",{staticClass:"fa fa-trophy grey-icon",class:{"data-certified":1===e.chart.isCertified}})])],1),a("span",[a("el-tooltip",{attrs:{placement:"bottom-start",effect:"light","visible-arrow":!1}},[a("div",{staticStyle:{width:"300px","max-height":"400px",overflow:"auto"},attrs:{slot:"content"},slot:"content"},[a("el-row",{staticStyle:{margin:"0px"},attrs:{gutter:24}},e._l(e.showLabelArr,function(t,i){return""!==t.showLabel&&"全部"!==t.showLabel?a("el-col",{key:i,staticClass:"d-desclist-index"},[a("div",{staticClass:"d-desclist-index-term"},[e._v(e._s(t.showName))]),a("div",{staticClass:"d-desclist-index-detail"},[e._v(e._s(t.showLabel))])]):e._e()}),1)],1),a("span",{staticClass:"d-chart-filter-tip"},e._l(e.showLabelArr,function(t,i){return""!==t.showLabel&&"全部"!==t.showLabel?a("span",{key:i,staticClass:"item"},[a("span",{staticClass:"label"},[e._v(e._s(t.showName))]),a("span",{staticClass:"value"},[e._v(e._s(t.showLabel))])]):e._e()}),0)])],1)]),a("div",{staticClass:"right"},[e.chart.editAuth?a("div",{staticClass:"btn",attrs:{title:"编辑报表"}},[a("i",{staticClass:"fa fa-pencil"})]):e._e(),e.filterMeta.length?a("div",{staticClass:"btn filter-btn",on:{mouseenter:e.mouseEnterFilterBtn,mouseleave:e.mouseLeaveFilterBtn}},[a("i",{staticClass:"fa fa-filter"}),a("div",{staticClass:"d-chart-filter-panel",attrs:{id:"filter_panel_"+e.chart.id}},[a("DFilterList",{attrs:{data:e.filterMeta},on:{inited:e.initedFilterList,change:e.changeCondition}})],1)]):e._e(),e._m(0),e._m(1),a("div",{staticClass:"btn more-btn"},[a("i",{staticClass:"fa fa-ellipsis-v"}),a("ul",{staticClass:"d-chart-btn-more d-btn-list"},[a("li",[e._v("导出EXCEL")]),e.chartMeta.chartType!==e.chartTypeObj.IndexCard.code&&e.chartMeta.chartType!==e.chartTypeObj.Table.code?a("li",[e._v("导出图片")]):e._e(),a("li",[e._v("刷新数据")]),e.chart.editAuth?a("li",[e._v("复制图表")]):e._e(),e.chart.editAuth?a("li",[e._v("移动图表")]):e._e(),a("li",[e._v("查看SQL")])])])])]),a("div",{staticClass:"content d-box-middle"},[e.showChart?a("DChartFactory",{attrs:{id:e.chart.id,meta:e.chartMeta,data:e.data,resizeCount:e.resizeCount},on:{sort:e.sortData}}):a("div",{staticClass:"tip"},[e._v("\n            "+e._s(e.tipMsg)+"\n        ")])],1),a("DLoading",{attrs:{loading:e.loading}})],1)},Or=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btn"},[a("i",{staticClass:"fa fa-line-chart"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btn"},[a("i",{staticClass:"fa fa-sliders"})])}],zr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-chart-factory d-box-middle"},[e.meta.chartType===e.chartTypeObj.IndexCard.code?a("d-index-card",{attrs:{id:e.id,meta:e.meta,data:e.data}}):e._e(),e.meta.chartType===e.chartTypeObj.Table.code?a("d-table",{attrs:{id:e.id,meta:e.meta,data:e.data},on:{sort:e.sortData}}):e._e(),e.meta.chartType===e.chartTypeObj.LineBar.code?a("d-line-bar",{attrs:{id:e.id,meta:e.meta,data:e.data,resizeCount:e.resizeCount}}):e._e(),e.meta.chartType===e.chartTypeObj.Pie.code?a("d-pie",{attrs:{id:e.id,meta:e.meta,data:e.data,resizeCount:e.resizeCount}}):e._e(),e.meta.chartType===e.chartTypeObj.Funnel.code?a("d-funnel",{attrs:{id:e.id,meta:e.meta,data:e.data,resizeCount:e.resizeCount}}):e._e(),e.meta.chartType===e.chartTypeObj.Map.code?a("d-map",{attrs:{id:e.id,meta:e.meta,data:e.data,resizeCount:e.resizeCount}}):e._e()],1)},$r=[],Vr=(a("a481"),a("3b2b"),{parseStrToDate:function(e,t){t&&""!==t||(t="yyyy-MM-dd");var a=new Date;return t.includes("yyyy")&&a.setFullYear(Number(e.substr(t.indexOf("yyyy"),4))),t.includes("MM")&&a.setMonth(Number(e.substr(t.indexOf("MM"),2))-1),t.includes("dd")&&a.setDate(Number(e.substr(t.indexOf("dd"),2))),t.includes("HH")&&a.setHours(Number(e.substr(t.indexOf("HH"),2))),t.includes("mm")&&a.setMinutes(Number(e.substr(t.indexOf("mm"),2))),t.includes("ss")&&a.setSeconds(Number(e.substr(t.indexOf("ss"),2))),t.includes("SSS")&&a.setMilliseconds(Number(e.substr(t.indexOf("SSS"),3))),a},testStrDate:function(e){var t=[new RegExp("\\d{4}-\\d{2}-\\d{2}"),new RegExp("\\d{4}\\d{2}\\d{2}"),new RegExp("\\d{4}-\\d{2}"),new RegExp("\\d{4}\\d{2}"),new RegExp("\\d{4}"),new RegExp("\\d{2}:\\d{2}:\\d{2}"),new RegExp("\\d{2}:\\d{2}"),new RegExp("\\d{2}")];for(var a in t)if(t[a].test(e))return!0;return!1},formatDate:function(e,t){t&&""!==t||(t="yyyy-MM-dd");var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours()%12===0?12:e.getHours()%12,"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},i={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+i[e.getDay()+""])),a)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return t},getDates:function(e,t,a){a&&""!==a||(a="yyyy-MM-dd");var i=[],r=e;while(r<=t)i.push(this.formatDate(r,a)),r=new Date(r.setDate(r.getDate()+1));return i},getDatesByStr:function(e,t,a){a&&""!==a||(a="yyyy-MM-dd");var i=[],r=this.parseStrToDate(e,a),n=this.parseStrToDate(t,a),o=r;while(o<=n)i.push(this.formatDate(o,a)),o=new Date(o.setDate(o.getDate()+1));return i},getDays:function(e,t,a){return a&&""!==a||(a="yyyy-MM-dd"),this.getDates(this.parseStrToDate(e,a),this.parseStrToDate(t,a)).length},addDate:function(e,t,a){var i=this.parseStrToDate(e,a);return i.setDate(i.getDate()+t),this.formatDate(i,a)},addMonth:function(e,t,a){var i=this.parseStrToDate(e,a);return i.setMonth(i.getMonth()+t),this.formatDate(i,a)},addYear:function(e,t){return Number(e)+t+""},getYesterday:function(e){var t=new Date;return t.setDate(t.getDate()-1),this.formatDate(t,e)}}),Br={General:{code:1,name:"普通图表"},GpsMap:{code:2,name:"经纬度地图"},External:{code:3,name:"外部图表"}},Pr={text:{code:"text",name:"文本"},num:{code:"num",name:"数字"},amt:{code:"amt",name:"金额"},rate:{code:"rate",name:"百分比"}},Ur={hb:{code:"hb",name:"环比",sortNum:1},tb_w:{code:"tb_w",name:"周同比",sortNum:2},tb_m:{code:"tb_m",name:"月同比",sortNum:3},tb_y:{code:"tb_y",name:"年同比",sortNum:4}},Hr={GROWTH_VALUE:{code:"GROWTH_VALUE",name:"增长值",showType:Pr.num.code},GROWTH_RATE:{code:"GROWTH_RATE",name:"增长率",showType:Pr.rate.code},CONTRAST_VALUE:{code:"CONTRAST_VALUE",name:"对比值",showType:Pr.num.code}},Yr={year:{code:"year",name:"年",advancedCompute:[Ur.hb],single:[{dateNum:0,name:"今年"},{dateNum:1,name:"去年"}],singleDefaultDateNum:0,range:[{dateNum:0,name:"今年"},{dateNum:1,name:"去年"},{dateNum:3,name:"近3年"}],rangeDefaultDateNum:0,pattern:"yyyy",sortNum:8,getDateStr:function(e,t){var a="",i=Vr.formatDate(new Date,"yyyy");if(t)if(0===e)a=i+","+i;else if(1===e){var r=Vr.addYear(i,-1);a=r+","+r}else a=Vr.addYear(i,-e)+","+i;else a=Vr.addYear(i,-e);return a}},quarter:{code:"quarter",name:"季",advancedCompute:[Ur.hb,Ur.tb_y],single:[{dateNum:0,name:"本季度"},{dateNum:1,name:"上季度"}],singleDefaultDateNum:1,range:[{dateNum:0,name:"本季度"},{dateNum:1,name:"上季度"},{dateNum:4,name:"近4季"}],rangeDefaultDateNum:1,pattern:"",sortNum:7},month:{code:"month",name:"月",advancedCompute:[Ur.hb,Ur.tb_y],single:[{dateNum:0,name:"本月"},{dateNum:1,name:"上月"}],singleDefaultDateNum:1,range:[{dateNum:0,name:"本月"},{dateNum:1,name:"上月"},{dateNum:6,name:"近半年"},{dateNum:12,name:"近一年"}],rangeDefaultDateNum:1,pattern:"yyyy-MM",sortNum:6,getDateStr:function(e,t){var a="",i=Vr.formatDate(new Date,"yyyy-MM");if(t)if(0===e)a=i+","+i;else if(1===e){var r=Vr.addMonth(i,-1,"yyyy-MM");a=r+","+r}else a=Vr.addMonth(i,-e,"yyyy-MM")+","+i;else a=Vr.addMonth(i,-e,"yyyy-MM");return a}},week:{code:"week",name:"周",advancedCompute:[Ur.hb,Ur.tb_y],single:[{dateNum:0,name:"本周"},{dateNum:1,name:"上周"}],singleDefaultDateNum:1,range:[{dateNum:0,name:"本周"},{dateNum:1,name:"上周"},{dateNum:12,name:"近12周"}],rangeDefaultDateNum:1,pattern:"",sortNum:5},day:{code:"day",name:"日",advancedCompute:[Ur.hb,Ur.tb_m,Ur.tb_m,Ur.tb_y],single:[{dateNum:1,name:"昨天"},{dateNum:0,name:"今天"},{dateNum:2,name:"前天"},{dateNum:7,name:"上周"},{dateNum:30,name:"上月"}],singleDefaultDateNum:1,range:[{dateNum:1,name:"昨天"},{dateNum:0,name:"今天"},{dateNum:7,name:"近7天"},{dateNum:30,name:"近30天"},{dateNum:90,name:"近90天"},{dateNum:180,name:"近半年"},{dateNum:365,name:"近一年"}],rangeDefaultDateNum:30,pattern:"yyyy-MM-dd",sortNum:4,getDateStr:function(e,t){var a="",i=Vr.getYesterday();if(t){if(0===e){var r=Vr.formatDate(new Date);a=r+","+r}else a=1===e?i+","+i:Vr.addDate(i,1-e,"yyyy-MM-dd")+","+i;a+=" 23:59:59"}else a=Vr.addDate(i,1-e,"yyyy-MM-dd");return a}},hour:{code:"hour",name:"时",advancedCompute:[Ur.hb]},minute:{code:"minute",name:"分",advancedCompute:[Ur.hb]},second:{code:"second",name:"秒",advancedCompute:[Ur.hb]}},Gr={asc:{code:"asc",name:"正序"},desc:{code:"desc",name:"降序"}},Wr={LeftY:{code:"LeftY",name:"左Y轴"},RightY:{code:"RightY",name:"右Y轴"},DownX:{code:"DownX",name:"底X轴"},UpX:{code:"UpX",name:"上X轴"}},Xr={Table:{code:"TABLE",name:"表格"},IndexCard:{code:"INDEX_CARD",name:"指标卡"},LineBar:{code:"LINE_BAR",name:"折现/柱状图"},Pie:{code:"PIE",name:"饼图"},Funnel:{code:"FUNNEL",name:"漏斗图"},Map:{code:"MAP",name:"地图"},GisMap:{code:"GIS_MAP",name:"GIS地图"}},Jr={date:{code:"date",name:"时间筛选"},select:{code:"select",name:"下拉框筛选"},num:{code:"num",name:"数字框筛选"},text:{code:"text",name:"文本框筛选"}},Kr=[{areaCode:11e4,cityList:[{areaCode:110100,id:1,name:"北京",pid:25760}],id:25760,name:"北京",echartsJsName:"beijing",pid:25794},{areaCode:12e4,cityList:[{areaCode:120100,id:18,name:"天津",pid:25762}],id:25762,name:"天津",echartsJsName:"tianjin",pid:25794},{areaCode:31e4,cityList:[{areaCode:310100,id:2,name:"上海",pid:25793}],id:25793,name:"上海",echartsJsName:"shanghai",pid:25794},{areaCode:71e4,cityList:[{areaCode:71e4,id:2051,name:"台湾",pid:25761},{areaCode:71e4,id:20652,name:"台北",pid:25761},{areaCode:71e4,id:20654,name:"台中",pid:25761},{areaCode:71e4,id:20655,name:"台南",pid:25761},{areaCode:71e4,id:20656,name:"高雄",pid:25761},{areaCode:71e4,id:20657,name:"基隆",pid:25761},{areaCode:71e4,id:20658,name:"新竹",pid:25761},{areaCode:71e4,id:20659,name:"嘉义",pid:25761}],id:25761,name:"台湾",echartsJsName:"taiwan",pid:25794},{areaCode:14e4,cityList:[{areaCode:140100,id:740,name:"太原",pid:25763},{areaCode:141100,id:3222,name:"吕梁",pid:25763},{areaCode:140500,id:3350,name:"晋城",pid:25763},{areaCode:140900,id:3453,name:"忻州",pid:25763},{areaCode:140800,id:5653,name:"运城",pid:25763},{areaCode:141e3,id:5669,name:"临汾",pid:25763},{areaCode:140400,id:6921,name:"长治",pid:25763},{areaCode:140200,id:6964,name:"大同",pid:25763},{areaCode:140300,id:8738,name:"阳泉",pid:25763},{areaCode:140700,id:8832,name:"晋中",pid:25763},{areaCode:140600,id:9869,name:"朔州",pid:25763}],id:25763,name:"山西",echartsJsName:"shanxi",pid:25794},{areaCode:82e4,cityList:[{areaCode:82e4,id:9384,name:"澳门",pid:25764}],id:25764,name:"澳门",echartsJsName:"aomen",pid:25794},{areaCode:62e4,cityList:[{areaCode:620100,id:952,name:"兰州",pid:25765},{areaCode:622900,id:7112,name:"临夏",pid:25765},{areaCode:620800,id:7154,name:"平凉",pid:25765},{areaCode:620300,id:7428,name:"金昌",pid:25765},{areaCode:620500,id:8467,name:"天水",pid:25765},{areaCode:620400,id:10307,name:"白银",pid:25765},{areaCode:621100,id:10320,name:"定西",pid:25765},{areaCode:623e3,id:10337,name:"甘南",pid:25765},{areaCode:620200,id:10356,name:"嘉峪关",pid:25765},{areaCode:620900,id:10381,name:"酒泉",pid:25765},{areaCode:621200,id:10409,name:"陇南",pid:25765},{areaCode:620600,id:10443,name:"武威",pid:25765},{areaCode:620700,id:10449,name:"张掖",pid:25765},{areaCode:621e3,id:10470,name:"庆阳",pid:25765}],id:25765,name:"甘肃",echartsJsName:"gansu",pid:25794},{areaCode:52e4,cityList:[{areaCode:520100,id:2015,name:"贵阳",pid:25766},{areaCode:520400,id:7458,name:"安顺",pid:25766},{areaCode:520300,id:7624,name:"遵义",pid:25766},{areaCode:522600,id:9348,name:"黔东南",pid:25766},{areaCode:520600,id:10419,name:"铜仁",pid:25766},{areaCode:522300,id:10430,name:"黔西南",pid:25766},{areaCode:522700,id:10441,name:"黔南",pid:25766},{areaCode:520200,id:10500,name:"六盘水",pid:25766},{areaCode:520500,id:10553,name:"毕节",pid:25766}],id:25766,name:"贵州",echartsJsName:"guizhou",pid:25794},{areaCode:5e5,cityList:[{areaCode:500100,id:37,name:"重庆",pid:25767}],id:25767,name:"重庆",echartsJsName:"chongqing",pid:25794},{areaCode:61e4,cityList:[{areaCode:610100,id:483,name:"西安",pid:25768},{areaCode:610300,id:2044,name:"宝鸡",pid:25768},{areaCode:610900,id:3157,name:"安康",pid:25768},{areaCode:610700,id:3163,name:"汉中",pid:25768},{areaCode:610500,id:5733,name:"渭南",pid:25768},{areaCode:610800,id:5942,name:"榆林",pid:25768},{areaCode:610400,id:7453,name:"咸阳",pid:25768},{areaCode:610600,id:8951,name:"延安",pid:25768},{areaCode:610200,id:9829,name:"铜川",pid:25768},{areaCode:611e3,id:9851,name:"商洛",pid:25768}],id:25768,name:"陕西",echartsJsName:"shanxi1",pid:25794},{areaCode:81e4,cityList:[{areaCode:81e4,id:2050,name:"香港",pid:25769}],id:25769,name:"香港",echartsJsName:"xianggang",pid:25794},{areaCode:23e4,cityList:[{areaCode:230100,id:202,name:"哈尔滨",pid:25770},{areaCode:230600,id:375,name:"大庆",pid:25770},{areaCode:231e3,id:3489,name:"牡丹江",pid:25770},{areaCode:230200,id:5853,name:"齐齐哈尔",pid:25770},{areaCode:231200,id:6718,name:"绥化",pid:25770},{areaCode:230800,id:6776,name:"佳木斯",pid:25770},{areaCode:230300,id:7289,name:"鸡西",pid:25770},{areaCode:230400,id:9039,name:"鹤岗",pid:25770},{areaCode:230700,id:9765,name:"伊春",pid:25770},{areaCode:230500,id:9836,name:"双鸭山",pid:25770},{areaCode:230900,id:9846,name:"七台河",pid:25770},{areaCode:231100,id:9858,name:"黑河",pid:25770},{areaCode:232700,id:9875,name:"大兴安岭",pid:25770}],id:25770,name:"黑龙江",echartsJsName:"heilongjiang",pid:25794},{areaCode:44e4,cityList:[{areaCode:440100,id:3,name:"广州",pid:25771},{areaCode:440300,id:4,name:"深圳",pid:25771},{areaCode:440600,id:222,name:"佛山",pid:25771},{areaCode:441900,id:413,name:"东莞",pid:25771},{areaCode:440700,id:629,name:"江门",pid:25771},{areaCode:440900,id:679,name:"茂名",pid:25771},{areaCode:441300,id:722,name:"惠州",pid:25771},{areaCode:442e3,id:771,name:"中山",pid:25771},{areaCode:440500,id:783,name:"汕头",pid:25771},{areaCode:440800,id:791,name:"湛江",pid:25771},{areaCode:441200,id:901,name:"肇庆",pid:25771},{areaCode:440400,id:910,name:"珠海",pid:25771},{areaCode:445200,id:927,name:"揭阳",pid:25771},{areaCode:440200,id:2192,name:"韶关",pid:25771},{areaCode:441700,id:2284,name:"阳江",pid:25771},{areaCode:441800,id:7303,name:"清远",pid:25771},{areaCode:441400,id:9374,name:"梅州",pid:25771},{areaCode:441500,id:9441,name:"汕尾",pid:25771},{areaCode:445100,id:10456,name:"潮州",pid:25771},{areaCode:441600,id:10462,name:"河源",pid:25771},{areaCode:445300,id:10480,name:"云浮",pid:25771}],id:25771,name:"广东",echartsJsName:"guangdong",pid:25794},{areaCode:33e4,cityList:[{areaCode:330100,id:79,name:"杭州",pid:25772},{areaCode:330200,id:135,name:"宁波",pid:25772},{areaCode:330300,id:330,name:"温州",pid:25772},{areaCode:330600,id:355,name:"绍兴",pid:25772},{areaCode:331e3,id:403,name:"台州",pid:25772},{areaCode:330400,id:497,name:"嘉兴",pid:25772},{areaCode:330700,id:531,name:"金华",pid:25772},{areaCode:330500,id:831,name:"湖州",pid:25772},{areaCode:330800,id:6793,name:"衢州",pid:25772},{areaCode:331100,id:7923,name:"丽水",pid:25772},{areaCode:330900,id:8470,name:"舟山",pid:25772}],id:25772,name:"浙江",echartsJsName:"zhejiang",pid:25794},{areaCode:42e4,cityList:[{areaCode:420100,id:158,name:"武汉",pid:25773},{areaCode:420500,id:858,name:"宜昌",pid:25773},{areaCode:420600,id:891,name:"襄阳",pid:25773},{areaCode:420200,id:1734,name:"黄石",pid:25773},{areaCode:420300,id:2032,name:"十堰",pid:25773},{areaCode:420800,id:2296,name:"荆门",pid:25773},{areaCode:421100,id:2299,name:"黄冈",pid:25773},{areaCode:422800,id:2302,name:"恩施",pid:25773},{areaCode:420900,id:3434,name:"孝感",pid:25773},{areaCode:421e3,id:3479,name:"荆州",pid:25773},{areaCode:429006,id:9475,name:"天门",pid:25773},{areaCode:429021,id:9597,name:"神农架",pid:25773},{areaCode:421200,id:9616,name:"咸宁",pid:25773},{areaCode:421300,id:9630,name:"随州",pid:25773},{areaCode:429005,id:9655,name:"潜江",pid:25773},{areaCode:420700,id:9702,name:"鄂州",pid:25773},{areaCode:429004,id:9723,name:"仙桃",pid:25773}],id:25773,name:"湖北",echartsJsName:"hubei",pid:25794},{areaCode:43e4,cityList:[{areaCode:430100,id:414,name:"长沙",pid:25774},{areaCode:430600,id:821,name:"岳阳",pid:25774},{areaCode:430700,id:872,name:"常德",pid:25774},{areaCode:430400,id:914,name:"衡阳",pid:25774},{areaCode:430200,id:1086,name:"株洲",pid:25774},{areaCode:430300,id:2047,name:"湘潭",pid:25774},{areaCode:430500,id:2303,name:"邵阳",pid:25774},{areaCode:431100,id:2307,name:"永州",pid:25774},{areaCode:431e3,id:5695,name:"郴州",pid:25774},{areaCode:431200,id:5756,name:"怀化",pid:25774},{areaCode:430800,id:6788,name:"张家界",pid:25774},{areaCode:431300,id:9455,name:"娄底",pid:25774},{areaCode:430900,id:10193,name:"益阳",pid:25774},{areaCode:433100,id:10214,name:"湘西",pid:25774}],id:25774,name:"湖南",echartsJsName:"hunan",pid:25794},{areaCode:22e4,cityList:[{areaCode:220100,id:319,name:"长春",pid:25775},{areaCode:220200,id:700,name:"吉林",pid:25775},{areaCode:220700,id:2315,name:"松原",pid:25775},{areaCode:220400,id:2501,name:"辽源",pid:25775},{areaCode:222400,id:3184,name:"延边",pid:25775},{areaCode:220800,id:5918,name:"白城",pid:25775},{areaCode:220500,id:10157,name:"通化",pid:25775},{areaCode:220300,id:10167,name:"四平",pid:25775},{areaCode:220600,id:10177,name:"白山",pid:25775}],id:25775,name:"吉林",echartsJsName:"jilin",pid:25794},{areaCode:37e4,cityList:[{areaCode:370200,id:122,name:"青岛",pid:25776},{areaCode:370600,id:228,name:"烟台",pid:25776},{areaCode:370100,id:265,name:"济南",pid:25776},{areaCode:370700,id:362,name:"潍坊",pid:25776},{areaCode:370300,id:385,name:"淄博",pid:25776},{areaCode:370800,id:450,name:"济宁",pid:25776},{areaCode:371300,id:505,name:"临沂",pid:25776},{areaCode:371e3,id:518,name:"威海",pid:25776},{areaCode:370500,id:623,name:"东营",pid:25776},{areaCode:370900,id:686,name:"泰安",pid:25776},{areaCode:371400,id:728,name:"德州",pid:25776},{areaCode:371500,id:882,name:"聊城",pid:25776},{areaCode:371600,id:944,name:"滨州",pid:25776},{areaCode:370400,id:961,name:"枣庄",pid:25776},{areaCode:371200,id:2292,name:"莱芜",pid:25776},{areaCode:371100,id:3177,name:"日照",pid:25776},{areaCode:371700,id:5632,name:"菏泽",pid:25776}],id:25776,name:"山东",echartsJsName:"shandong",pid:25794},{areaCode:34e4,cityList:[{areaCode:340100,id:837,name:"合肥",pid:25777},{areaCode:340500,id:2039,name:"马鞍山",pid:25777},{areaCode:340200,id:2045,name:"芜湖",pid:25777},{areaCode:340400,id:2319,name:"淮南",pid:25777},{areaCode:341e3,id:2323,name:"黄山",pid:25777},{areaCode:341200,id:2325,name:"阜阳",pid:25777},{areaCode:341500,id:2328,name:"六安",pid:25777},{areaCode:341600,id:2329,name:"亳州",pid:25777},{areaCode:340800,id:3251,name:"安庆",pid:25777},{areaCode:341300,id:3359,name:"宿州",pid:25777},{areaCode:340300,id:3470,name:"蚌埠",pid:25777},{areaCode:341800,id:5633,name:"宣城",pid:25777},{areaCode:340600,id:9342,name:"淮北",pid:25777},{areaCode:341700,id:10254,name:"池州",pid:25777},{areaCode:341100,id:10260,name:"滁州",pid:25777},{areaCode:340700,id:10279,name:"铜陵",pid:25777}],id:25777,name:"安徽",echartsJsName:"anhui",pid:25794},{areaCode:45e4,cityList:[{areaCode:450100,id:845,name:"南宁",pid:25778},{areaCode:450300,id:1039,name:"桂林",pid:25778},{areaCode:450400,id:2046,name:"梧州",pid:25778},{areaCode:450700,id:2335,name:"钦州",pid:25778},{areaCode:450900,id:2337,name:"玉林",pid:25778},{areaCode:451200,id:2340,name:"河池",pid:25778},{areaCode:450800,id:6770,name:"贵港",pid:25778},{areaCode:450200,id:7133,name:"柳州",pid:25778},{areaCode:451e3,id:10506,name:"百色",pid:25778},{areaCode:450500,id:10510,name:"北海",pid:25778},{areaCode:451400,id:10514,name:"崇左",pid:25778},{areaCode:450600,id:10530,name:"防城港",pid:25778},{areaCode:451100,id:10541,name:"贺州",pid:25778},{areaCode:451300,id:10549,name:"来宾",pid:25778}],id:25778,name:"广西",echartsJsName:"guangxi",pid:25794},{areaCode:41e4,cityList:[{areaCode:410100,id:342,name:"郑州",pid:25779},{areaCode:410300,id:556,name:"洛阳",pid:25779},{areaCode:411300,id:592,name:"南阳",pid:25779},{areaCode:411600,id:933,name:"周口",pid:25779},{areaCode:411e3,id:977,name:"许昌",pid:25779},{areaCode:410400,id:1005,name:"平顶山",pid:25779},{areaCode:410700,id:1016,name:"新乡",pid:25779},{areaCode:411400,id:1029,name:"商丘",pid:25779},{areaCode:411700,id:1067,name:"驻马店",pid:25779},{areaCode:410500,id:1096,name:"安阳",pid:25779},{areaCode:410200,id:2342,name:"开封",pid:25779},{areaCode:410600,id:2344,name:"鹤壁",pid:25779},{areaCode:410900,id:2346,name:"濮阳",pid:25779},{areaCode:411100,id:2347,name:"漯河",pid:25779},{areaCode:410800,id:3266,name:"焦作",pid:25779},{areaCode:411501,id:8531,name:"明港",pid:25779},{areaCode:411500,id:8672,name:"信阳",pid:25779},{areaCode:411200,id:9303,name:"三门峡",pid:25779},{areaCode:419001,id:9894,name:"济源",pid:25779}],id:25779,name:"河南",echartsJsName:"henan",pid:25794},{areaCode:21e4,cityList:[{areaCode:210200,id:147,name:"大连",pid:25780},{areaCode:210100,id:188,name:"沈阳",pid:25780},{areaCode:210300,id:523,name:"鞍山",pid:25780},{areaCode:211e3,id:2038,name:"辽阳",pid:25780},{areaCode:211100,id:2041,name:"盘锦",pid:25780},{areaCode:210700,id:2354,name:"锦州",pid:25780},{areaCode:210600,id:3445,name:"丹东",pid:25780},{areaCode:210400,id:5722,name:"抚顺",pid:25780},{areaCode:210500,id:5845,name:"本溪",pid:25780},{areaCode:210800,id:5898,name:"营口",pid:25780},{areaCode:211200,id:6729,name:"铁岭",pid:25780},{areaCode:211400,id:10083,name:"葫芦岛",pid:25780},{areaCode:210900,id:10093,name:"阜新",pid:25780},{areaCode:211300,id:10102,name:"朝阳",pid:25780}],id:25780,name:"辽宁",echartsJsName:"liaoning",pid:25794},{areaCode:36e4,cityList:[{areaCode:360100,id:669,name:"南昌",pid:25781},{areaCode:360400,id:2247,name:"九江",pid:25781},{areaCode:360300,id:2248,name:"萍乡",pid:25781},{areaCode:360200,id:2360,name:"景德镇",pid:25781},{areaCode:360700,id:2363,name:"赣州",pid:25781},{areaCode:360800,id:2364,name:"吉安",pid:25781},{areaCode:360600,id:3209,name:"鹰潭",pid:25781},{areaCode:360900,id:5709,name:"宜春",pid:25781},{areaCode:360500,id:10111,name:"新余",pid:25781},{areaCode:361100,id:10116,name:"上饶",pid:25781},{areaCode:361e3,id:10138,name:"抚州",pid:25781}],id:25781,name:"江西",echartsJsName:"jiangxi",pid:25794},{areaCode:32e4,cityList:[{areaCode:320500,id:5,name:"苏州",pid:25782},{areaCode:320200,id:93,name:"无锡",pid:25782},{areaCode:320100,id:172,name:"南京",pid:25782},{areaCode:320600,id:394,name:"南通",pid:25782},{areaCode:320400,id:463,name:"常州",pid:25782},{areaCode:320300,id:471,name:"徐州",pid:25782},{areaCode:320900,id:613,name:"盐城",pid:25782},{areaCode:321e3,id:637,name:"扬州",pid:25782},{areaCode:321100,id:645,name:"镇江",pid:25782},{areaCode:321200,id:693,name:"泰州",pid:25782},{areaCode:320800,id:968,name:"淮安",pid:25782},{areaCode:320700,id:2049,name:"连云港",pid:25782},{areaCode:321300,id:2350,name:"宿迁",pid:25782}],id:25782,name:"江苏",echartsJsName:"jiangsu",pid:25794},{areaCode:13e4,cityList:[{areaCode:130100,id:241,name:"石家庄",pid:25783},{areaCode:130200,id:276,name:"唐山",pid:25783},{areaCode:130600,id:424,name:"保定",pid:25783},{areaCode:130400,id:572,name:"邯郸",pid:25783},{areaCode:130900,id:652,name:"沧州",pid:25783},{areaCode:130500,id:751,name:"邢台",pid:25783},{areaCode:131e3,id:772,name:"廊坊",pid:25783},{areaCode:131100,id:993,name:"衡水",pid:25783},{areaCode:130300,id:1078,name:"秦皇岛",pid:25783},{areaCode:130700,id:3328,name:"张家口",pid:25783},{areaCode:130800,id:6760,name:"承德",pid:25783}],id:25783,name:"河北",echartsJsName:"hebei",pid:25794},{areaCode:51e4,cityList:[{areaCode:510100,id:102,name:"成都",pid:25784},{areaCode:510700,id:1057,name:"绵阳",pid:25784},{areaCode:510400,id:2371,name:"攀枝花",pid:25784},{areaCode:510500,id:2372,name:"泸州",pid:25784},{areaCode:510600,id:2373,name:"德阳",pid:25784},{areaCode:511300,id:2378,name:"南充",pid:25784},{areaCode:511500,id:2380,name:"宜宾",pid:25784},{areaCode:511600,id:2381,name:"广安",pid:25784},{areaCode:511100,id:3237,name:"乐山",pid:25784},{areaCode:511e3,id:5928,name:"内江",pid:25784},{areaCode:510300,id:6745,name:"自贡",pid:25784},{areaCode:512e3,id:6803,name:"资阳",pid:25784},{areaCode:511800,id:9676,name:"雅安",pid:25784},{areaCode:510900,id:9695,name:"遂宁",pid:25784},{areaCode:511400,id:9704,name:"眉山",pid:25784},{areaCode:513400,id:9715,name:"凉山",pid:25784},{areaCode:510800,id:9751,name:"广元",pid:25784},{areaCode:513300,id:9760,name:"甘孜",pid:25784},{areaCode:511700,id:9799,name:"达州",pid:25784},{areaCode:511900,id:9808,name:"巴中",pid:25784},{areaCode:513200,id:9814,name:"阿坝",pid:25784}],id:25784,name:"四川",echartsJsName:"sichuan",pid:25794},{areaCode:53e4,cityList:[{areaCode:530100,id:541,name:"昆明",pid:25785},{areaCode:530400,id:2040,name:"玉溪",pid:25785},{areaCode:530300,id:2389,name:"曲靖",pid:25785},{areaCode:530500,id:2390,name:"保山",pid:25785},{areaCode:530700,id:2392,name:"丽江",pid:25785},{areaCode:532300,id:2393,name:"楚雄",pid:25785},{areaCode:532500,id:2394,name:"红河",pid:25785},{areaCode:532600,id:2395,name:"文山",pid:25785},{areaCode:532800,id:2397,name:"西双版纳",pid:25785},{areaCode:532900,id:2398,name:"大理",pid:25785},{areaCode:530600,id:9394,name:"昭通",pid:25785},{areaCode:530900,id:9407,name:"临沧",pid:25785},{areaCode:533400,id:9417,name:"迪庆",pid:25785},{areaCode:533100,id:9422,name:"德宏",pid:25785},{areaCode:530800,id:9429,name:"普洱",pid:25785},{areaCode:533300,id:9452,name:"怒江",pid:25785}],id:25785,name:"云南",echartsJsName:"yunnan",pid:25794},{areaCode:15e4,cityList:[{areaCode:150200,id:801,name:"包头",pid:25786},{areaCode:150100,id:811,name:"呼和浩特",pid:25786},{areaCode:150600,id:2037,name:"鄂尔多斯",pid:25786},{areaCode:150300,id:2404,name:"乌海",pid:25786},{areaCode:152500,id:2408,name:"锡林郭勒",pid:25786},{areaCode:150400,id:6700,name:"赤峰",pid:25786},{areaCode:152200,id:9983,name:"兴安盟",pid:25786},{areaCode:150900,id:9998,name:"乌兰察布",pid:25786},{areaCode:150500,id:10012,name:"通辽",pid:25786},{areaCode:150700,id:10035,name:"呼伦贝尔",pid:25786},{areaCode:150800,id:10063,name:"巴彦淖尔",pid:25786},{areaCode:152900,id:10078,name:"阿拉善盟",pid:25786}],id:25786,name:"内蒙古",echartsJsName:"neimenggu",pid:25794},{areaCode:64e4,cityList:[{areaCode:640100,id:2054,name:"银川",pid:25787},{areaCode:640400,id:2421,name:"固原",pid:25787},{areaCode:640500,id:9949,name:"中卫",pid:25787},{areaCode:640300,id:9959,name:"吴忠",pid:25787},{areaCode:640200,id:9967,name:"石嘴山",pid:25787}],id:25787,name:"宁夏",echartsJsName:"ningxia",pid:25794},{areaCode:35e4,cityList:[{areaCode:350500,id:291,name:"泉州",pid:25788},{areaCode:350100,id:304,name:"福州",pid:25788},{areaCode:350200,id:606,name:"厦门",pid:25788},{areaCode:350600,id:710,name:"漳州",pid:25788},{areaCode:350400,id:2048,name:"三明",pid:25788},{areaCode:350300,id:2429,name:"莆田",pid:25788},{areaCode:350800,id:6752,name:"龙岩",pid:25788},{areaCode:350900,id:7969,name:"宁德",pid:25788},{areaCode:350700,id:10285,name:"南平",pid:25788}],id:25788,name:"福建",echartsJsName:"fujian",pid:25794},{areaCode:46e4,cityList:[{areaCode:460100,id:2053,name:"海口",pid:25789},{areaCode:460200,id:2422,name:"三亚",pid:25789},{areaCode:469001,id:9948,name:"五指山",pid:25789},{areaCode:469005,id:9968,name:"文昌",pid:25789},{areaCode:469006,id:10011,name:"万宁",pid:25789},{areaCode:469022,id:10049,name:"屯昌",pid:25789},{areaCode:469030,id:10060,name:"琼中",pid:25789},{areaCode:469002,id:10130,name:"琼海",pid:25789},{areaCode:469028,id:10166,name:"陵水",pid:25789},{areaCode:469024,id:10196,name:"临高",pid:25789},{areaCode:469027,id:10231,name:"乐东",pid:25789},{areaCode:469007,id:10244,name:"东方",pid:25789},{areaCode:469021,id:10297,name:"定安",pid:25789},{areaCode:469023,id:10316,name:"澄迈",pid:25789},{areaCode:469026,id:10347,name:"昌江",pid:25789},{areaCode:469029,id:10367,name:"保亭",pid:25789},{areaCode:469025,id:10375,name:"白沙",pid:25789},{areaCode:460400,id:10390,name:"儋州",pid:25789},{areaCode:460300,id:13663,name:"三沙",pid:25789}],id:25789,name:"海南",echartsJsName:"hainan",pid:25794},{areaCode:63e4,cityList:[{areaCode:630100,id:2052,name:"西宁",pid:25790},{areaCode:632700,id:9886,name:"玉树",pid:25790},{areaCode:632300,id:9896,name:"黄南",pid:25790},{areaCode:632800,id:9905,name:"海西",pid:25790},{areaCode:630200,id:9921,name:"海东",pid:25790},{areaCode:632200,id:9934,name:"海北",pid:25790},{areaCode:632600,id:9940,name:"果洛",pid:25790},{areaCode:632500,id:10567,name:"海南",pid:25790}],id:25790,name:"青海",echartsJsName:"qinghai",pid:25794},{areaCode:54e4,cityList:[{areaCode:540100,id:2055,name:"拉萨",pid:25791},{areaCode:540500,id:9578,name:"山南",pid:25791},{areaCode:540200,id:9587,name:"日喀则",pid:25791},{areaCode:542400,id:9625,name:"那曲",pid:25791},{areaCode:540400,id:9635,name:"林芝",pid:25791},{areaCode:540300,id:9636,name:"昌都",pid:25791},{areaCode:542500,id:9686,name:"阿里",pid:25791}],id:25791,name:"西藏",echartsJsName:"xizang",pid:25794},{areaCode:65e4,cityList:[{areaCode:650100,id:984,name:"乌鲁木齐",pid:25792},{areaCode:650200,id:2042,name:"克拉玛依",pid:25792},{areaCode:650500,id:7452,name:"哈密",pid:25792},{areaCode:652300,id:8572,name:"昌吉",pid:25792},{areaCode:653100,id:9311,name:"喀什",pid:25792},{areaCode:650400,id:9464,name:"吐鲁番",pid:25792},{areaCode:654e3,id:9465,name:"伊犁",pid:25792},{areaCode:653201,id:9486,name:"和田",pid:25792},{areaCode:652900,id:9510,name:"阿克苏",pid:25792},{areaCode:653e3,id:9527,name:"克孜勒苏",pid:25792},{areaCode:652800,id:9533,name:"巴音郭楞",pid:25792},{areaCode:652700,id:9539,name:"博尔塔拉",pid:25792},{areaCode:659002,id:9545,name:"阿拉尔",pid:25792},{areaCode:659001,id:9556,name:"石河子",pid:25792},{areaCode:659003,id:9563,name:"图木舒克",pid:25792},{areaCode:659004,id:9564,name:"五家渠",pid:25792},{areaCode:654300,id:18804,name:"阿勒泰",pid:25792},{areaCode:654200,id:18812,name:"塔城",pid:25792}],id:25792,name:"新疆",echartsJsName:"xinjiang",pid:25794}],qr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-echarts",attrs:{id:e.domId}})},Zr=[],Qr=(a("55dd"),a("313e")),en=a.n(Qr);a("9fad"),a("28a5");function tn(e,t,a){var i=[],r=(t-1)*a;if(e.length>r){var n=r+a;i=e.slice(r,n)}return i}function an(e){if(void 0===e||null===e||isNaN(e)||""==e.toString().trim())return e;var t=e.toString(),a="";return t.includes(".")&&(a=t.substring(t.indexOf(".")),t=t.substring(0,t.indexOf("."))),t.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+a}function rn(e,t){return void 0===e?1:e>t?1:e===t?0:-1}function nn(e){return Math.round(Math.random()*e)}function on(e){return Math.random()*e}function sn(e){return e.replace(/[^\x00-\xff]/g,"aa").length}var dn=100,ln=function(e,t){var a=this;this.type="scroll",t&&"vertical"!==t||(this.orient="vertical",this.right=10,this.formatter=function(e){return en.a.format.truncateText(e,dn,"14px Microsoft Yahei","...")}),this.top=20,this.bottom=20,this.data=e,this.selected={},e&&e.length&&e.forEach(function(e,t){a.selected[e]=t<10}),this.tooltip={show:!0,formatter:function(e,t,a){return'<span style="color: #606266;">'+e.name+"</span>"}}},cn=function(e){var t;e&&(e=e<2?2:e,t=16*e+30);var a=dn+30;this.left="3%",this.right=void 0!==t?t<a?t:a:"3%",this.bottom="40",this.containLabel=!0},mn=function(){},un=function(e,t){this.trigger=e,this.backgroundColor="#fff",this.extraCssText="box-shadow: 1px 2px 5px 2px #cccccc;",this.axisPointer={type:"cross",label:{backgroundColor:"#6a7985"}},this.formatter=function(e,a,i){return t(e,a,i)}},pn={LeftY:"LeftY",RightY:"RightY",DownX:"DownX",UpX:"UpX"},hn=function(e,t){var a=document.getElementById(e.domId);if(a){e.chartInstance=en.a.getInstanceByDom(a),e.chartInstance||(e.chartInstance=en.a.init(a,"shine")),e.chartInstance.clear(),window.addEventListener("resize",function(){e.chartInstance.resize()});var i=t();e.chartInstance.setOption(i),e.chartInstance.resize()}};function fn(e){return e&&""!==e?"echarts_"+e:"echarts_"+(new Date).getTime()}function bn(e){var t=document.getElementById(fn(e));if(t)return en.a.getInstanceByDom(t)}function yn(e,t,a,i){var r=e;return a||(a=""),isNaN(r)?r="--":((isNaN(i)||""===i.toString().trim()||0===i)&&(i=1),r="amt"===t?an(parseFloat((r/i).toFixed(2))):"rate"===t?parseFloat(Number(r).toFixed(2)):an(parseFloat((r/i).toFixed(2)))),"amt"===t?r="￥"+r+a:r+="rate"===t?"%":a,r}var gn={Legend:ln,Grid:cn,GridAxis:pn,AreaStyle:mn,Tooltip:un,initChart:hn,getChartDomId:fn,getEchartsInstance:bn,formatTooltipValue:yn},Cn={name:"DLineBar",props:{id:[String,Number],meta:Object,data:{type:Array,default:function(){return[]}},resizeCount:{type:Number,default:0},rate100:Boolean},data:function(){return{domId:gn.getChartDomId(this.id),chartInstance:null,legendData:[],columnsObj:{},dimColumns:[],indexColumns:[],category_1:[],category_2:[],hasBar:!1,xAxisDouble:!1,yAxisDouble:!1,series:[],axisRate:{0:!0,1:!0},dataZoom:{thickness:16,defaultSerisDataLenth:100}}},methods:{initChart:function(){this.resetDataProperty(),this.handleMetaData(),this.$nextTick(function(){gn.initChart(this,this.getOption)})},resetDataProperty:function(){this.chartInstance=null,this.legendData=[],this.columnsObj={},this.dimColumns=[],this.indexColumns=[],this.category_1=[],this.category_2=[],this.hasBar=!1,this.xAxisDouble=!1,this.yAxisDouble=!1,this.series=[],this.axisRate={0:!0,1:!0}},handleMetaData:function(){this.handleColumns(),this.handleSeriesData(),this.$forceUpdate()},getOption:function(){var e=this,t=0;"horizontal"!==e.meta.legendOrient&&e.legendData.forEach(function(e){t=e.length>t?e.length:t});var a={type:"slider",handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#2d8cf0",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2}};"y"===e.meta.category?(a.yAxisIndex=[0],a.width=e.dataZoom.thickness):(a.xAxisIndex=[0],a.height=e.dataZoom.thickness);var i={title:{text:e.meta.title},tooltip:new gn.Tooltip("axis",function(t){var a="",i=[];t.name?(a=t.name,i.push({seriesName:t.seriesName,value:e.formatTooltipValue(t.seriesName,t.value),color:t.color})):(a=t[0].name,t.forEach(function(t){(t.value||0===t.value)&&i.push({seriesName:t.seriesName,value:e.formatTooltipValue(t.seriesName,t.value),color:t.color})}));var r='<ul class="d-echarts-tooltip"><li class="d-echarts-tooltip-name">'+a+"</li>";return i.forEach(function(e,t){r=r+'<li style="color: '+e.color+'">'+e.seriesName+" : "+e.value+"</li>"}),r+="</ul>",r}),legend:new gn.Legend(e.legendData,e.meta.legendOrient),grid:new gn.Grid(t),xAxis:e.getXAxis(),yAxis:e.getYAxis(),series:e.series,dataZoom:[a]};return i},formatTooltipValue:function(e,t){var a=t,i="",r="",n=1;return this.columnsObj[e]?(i=this.columnsObj[e].showType?this.columnsObj[e].showType:"",r=this.columnsObj[e].unit?this.columnsObj[e].unit:"",n=this.columnsObj[e].unit?Number(this.columnsObj[e].divisor):1):(i=this.meta.showType?this.meta.showType:"",r=this.meta.unit?this.meta.unit:"",n=this.meta.unit?Number(this.meta.divisor):1),gn.formatTooltipValue(a,i,r,n)},getXAxis:function(){return this.getAxis(this.xAxisDouble,"x",this.meta.downXName,this.meta.upXName)},getYAxis:function(){return this.getAxis(this.yAxisDouble,"y",this.meta.leftYName,this.meta.rightYName)},abridgeValue:function(e){var t=Number(e);return t=t>1e6?1*(t/1e6).toFixed(1)+"M":t>1e4?1*(t/1e4).toFixed(1)+"W":t>1e3?1*(t/1e3).toFixed(1)+"K":1*t.toFixed(1),t},getAxis:function(e,t,a,i){var r=this,n=r.getAxisValueType(t),o=function(e,t,a){var i=r.axisRate[a]&&r.rate100?100*e:e;return r.axisRate[a]?r.abridgeValue(i)+"%":r.abridgeValue(i)},s=function(e,t){var a=r.axisRate[t]&&r.rate100?100*e.value:e.value;return r.axisRate[t]?r.abridgeValue(a)+"%":r.abridgeValue(a)},d=[{type:n,name:a,boundaryGap:"category"===n?r.hasBar:"",data:"category"===n?r.category_1:[],axisLabel:{formatter:"category"===n?null:function(e,t){return o(e,t,0)}},axisPointer:{label:{formatter:"category"===n?null:function(e){return s(e,0)}}}}];return e&&d.push({type:n,name:i,boundaryGap:"category"===n?r.hasBar:"",data:"category"===n?r.category_2:[],axisLabel:{formatter:"category"===n?null:function(e,t){return o(e,t,1)}},axisPointer:{label:{formatter:"category"===n?null:function(e){return s(e,1)}}}}),d},getAxisValueType:function(e){return this.meta.category&&""!==this.meta.category?this.meta.category===e?"category":"value":"x"===e?"category":"value"},handleColumns:function(){this.$nextTick(function(){var e=this;if(this.legendData=[],this.dimColumns=[],this.indexColumns=[],this.hasBar=!1,this.xAxisDouble=!1,this.yAxisDouble=!1,this.meta.columns&&this.meta.columns.forEach(function(t){t.axis||(t.axis=t.dim?gn.GridAxis.DownX:gn.GridAxis.LeftY),e.meta.stack&&(t.stack="all"),"stackBar"===t.type&&(t.stack="typeA",t.type="bar"),"stackBarSecond"===t.type&&(t.stack="typeB",t.type="bar"),t.dim||e.meta.dynamicLegend||(e.legendData.push(t.name),e.indexColumns.push(t)),t.dim&&e.dimColumns.push(t),t.dim||"bar"!==t.type||(e.hasBar=!0),t.axis===gn.GridAxis.UpX&&(e.xAxisDouble=!0),t.axis===gn.GridAxis.RightY&&(e.yAxisDouble=!0),t.axis===gn.GridAxis.UpX||t.axis===gn.GridAxis.RightY?t.dim||t.showType&&"rate"===t.showType||(e.axisRate[1]=!1):t.dim||t.showType&&"rate"===t.showType||(e.axisRate[0]=!1),e.columnsObj[t.name]=t}),this.meta.dynamicLegend){var t=this.meta.columns.findIndex(function(e){return!e.dim});t<=0&&(this.axisRate[0]=!1,this.axisRate[1]=!1)}this.meta.dynamicLegend&&this.data&&this.data.length&&(this.hasBar="bar"===this.meta.type,this.data&&this.data.forEach(function(t){Object.keys(t).forEach(function(t){var a=t||"(空)";-1!==e.dimColumns.findIndex(function(e){return e.key===t})||e.legendData.includes(a)||(e.legendData.push(a),e.indexColumns.push({key:t,name:a,axis:gn.GridAxis.LeftY,type:e.meta.type,stack:e.meta.stack?"all":""}))})}))})},handleSeriesData:function(){var e=this;e.$nextTick(function(){var t={};if(e.category_1=[],e.category_2=[],e.data){var a=JSON.parse(JSON.stringify(e.data)),i=a[0],r=i[e.dimColumns[0].key],n=Vr.testStrDate(r);a="y"!==e.meta.category&&n?a.sort(function(t,a){return t[e.dimColumns[0].key]>=a[e.dimColumns[0].key]?1:-1}):a.sort(function(t,a){var i=0,r=0;return e.indexColumns.forEach(function(e){t[e.key]&&(i+=Number(t[e.key])),a[e.key]&&(r+=Number(a[e.key]))}),i>=r?1:-1}),a.forEach(function(a){e.dimColumns.forEach(function(t){t.axis===gn.GridAxis.DownX||t.axis===gn.GridAxis.LeftY?e.category_1.push(a[t.key]):e.category_2.push(a[t.key])}),e.indexColumns.forEach(function(i){if(!t[i.key]){t[i.key]={name:i.name,type:i.type?i.type:"line",xAxisIndex:i.axis===gn.GridAxis.DownX||i.axis===gn.GridAxis.LeftY||i.axis===gn.GridAxis.RightY?0:1,yAxisIndex:i.axis===gn.GridAxis.LeftY||i.axis===gn.GridAxis.DownX||i.axis===gn.GridAxis.UpX?0:1,data:[]},e.meta.area&&(t[i.key].areaStyle=new gn.AreaStyle),i.stack&&(t[i.key].stack=i.stack);var r=[];e.meta.max&&r.push({type:"max",name:"最大值"}),e.meta.min&&r.push({type:"min",name:"最小值"}),r.length>0&&(t[i.key].markPoint={data:r});var n=[];e.meta.avg&&n.push({type:"average",name:"平均值"}),n.length>0&&(t[i.key].markLine={data:n}),t[i.key].label={show:!1,formatter:function(t){return e.formatTooltipValue(t.seriesName,t.value)}}}t[i.key].data.push(a[i.key]?a[i.key]:0)})})}e.series=Object.values(t)})}},mounted:function(){this.initChart()},watch:{meta:function(){this.initChart()},data:function(){this.initChart()},resizeCount:function(e,t){this.chartInstance&&this.chartInstance.resize()}},beforeDestroy:function(){this.chartInstance.clear()}},vn=Cn,Dn=Object(c["a"])(vn,qr,Zr,!1,null,null,null),In=Dn.exports,wn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-chart-table"},[a("el-table",{ref:"tableChart",attrs:{id:"tableChart",data:e.tableData,border:"","span-method":e.arraySpanMethod,height:"300px","header-cell-class-name":"d-table-header-cell"}},e._l(e.columns,function(t,i){return a("el-table-column",{key:i,attrs:{prop:t.key,"show-overflow-tooltip":"",width:t.width,label:t.name,align:t.dim?"left":"right",fixed:t.fixed},scopedSlots:e._u([{key:"header",fn:function(i){return[a("div",{staticClass:"d-table-header-col"},[a("span",[e._v(e._s(i.column.label))]),a("span",{staticClass:"d-table-header-btn sort",class:{sorted:t.sortType}},[a("i",{staticClass:"asc",class:{active:"asc"===t.sortType},on:{click:function(a){return e.toggleSort(t,"asc")}}}),a("i",{staticClass:"desc",class:{active:"desc"===t.sortType},on:{click:function(a){return e.toggleSort(t,"desc")}}})]),a("span",{staticClass:"d-table-header-btn lock",class:{locked:t.locked},on:{click:function(a){return e.toggleLock(t)}}},[a("i",{staticClass:"fa",class:[t.locked?"fa-lock":"fa-unlock"]})])])]}},{key:"default",fn:function(i){return[i.row.loadMoreBtn?a("div",{staticClass:"d-table-more",style:{"padding-left":e.loadMoreBtnPaddingLeft+"px"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.loadMoreData}},[e._v("加载更多...")])],1):a("DFormatValue",{attrs:{value:i.row[t.key],showType:t.showType,growthSign:t.growthSign}})]}}],null,!0)})}),1)],1)},Tn=[],Nn={name:"DTable",props:{meta:{required:!0,type:Object},data:Array,id:[Number,String]},data:function(){return{columns:[],columnObj:{},pageSize:10,pageNo:1,tableData:[],tableWidth:0,lockedWidth:0,minColWidth:120,loadMoreBtnPaddingLeft:20,sortColKey:""}},methods:{handleMeta:function(){var e=this,t=[];this.meta.columns.forEach(function(a){var i=JSON.parse(JSON.stringify(a));i.unit&&(i.name=i.name+"("+i.unit+")"),i.width=e.computeColWidth(i.name),i.sort&&(e.sortColKey=i.key),t.push(i),i.locked&&t.forEach(function(t){t.fixed=!0,e.lockedWidth=e.lockedWidth+t.width}),i.THB&&i.THB.length&&i.THB.forEach(function(a){var r=i.name+"("+Ur[a].name+")",n=e.computeColWidth(r);t.push({key:i.key+"_"+a,name:r,showType:Hr[i.THBValueType].showType,growthSign:!0,dim:!1,width:n})}),e.columnObj[i.key]=i}),this.columns=t,this.resizeTable()},computeColWidth:function(e){var t=this.minColWidth;return 20*e.length>this.minColWidth&&(t=20*e.length),t+50},handleData:function(){this.pageNo=1,this.tableData=[],this.data&&this.data.length&&this.addTableData()},addTableData:function(){this.tableData.length&&this.tableData.pop();var e=tn(this.data,this.pageNo,this.pageSize);this.tableData=this.tableData.concat(e),e.length===this.pageSize&&this.tableData.push({loadMoreBtn:!0})},loadMoreData:function(){this.pageNo=this.pageNo+1,this.addTableData()},resizeTable:function(){var e=this;setTimeout(function(){var t=document.getElementById("tableChart");t.style.height="100%",e.tableWidth=t.clientWidth,e.setLoadMoreBtnPaddingLeft()},1)},setLoadMoreBtnPaddingLeft:function(){var e=76,t=(this.tableWidth-e)/2;this.loadMoreBtnPaddingLeft=this.lockedWidth&&t>this.lockedWidth?this.lockedWidth-e:t},arraySpanMethod:function(e){var t=e.row,a=(e.column,e.rowIndex,e.columnIndex);if(t.loadMoreBtn)return 0===a?[1,this.columns.length]:[0,0]},toggleLock:function(e){if(this.lockedWidth=0,e.locked){for(var t in this.columns){if(this.columns[t].key===e.key)break;this.columns[t].fixed=!1}e.locked=!1,e.fixed=!1}else{var a=!0;for(var i in this.columns)this.columns[i].key===e.key&&(a=!1),a?(this.columns[i].locked=!1,this.columns[i].fixed=!0,this.lockedWidth=this.lockedWidth+this.columns[i].width):this.columns[i].key!==e.key&&(this.columns[i].locked=!1,this.columns[i].fixed=!1);e.locked=!0,e.fixed=!0,this.lockedWidth=this.lockedWidth+e.width}this.setLoadMoreBtnPaddingLeft(),this.$refs.tableChart.doLayout(),this.$forceUpdate()},toggleSort:function(e,t){if(e.key===this.sortColKey)e.sortType===t?e.sortType="":e.sortType=t;else{for(var a in this.columns)if(this.columns[a].key===this.sortColKey){this.columns[a].sortType="";break}e.sortType=t,this.sortColKey=e.key}this.$emit("sort",e.key,e.sortType)}},watch:{meta:function(){this.handleMeta()},data:function(){this.handleData()}},mounted:function(){var e=this;e.handleMeta(),e.handleData()}},_n=Nn,xn=(a("ae02"),Object(c["a"])(_n,wn,Tn,!1,null,null,null)),kn=xn.exports,Ln=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"d-indexcard d-box-middle",attrs:{id:e.id}},[e.advancedComputeIndexList.length?a("li",{staticClass:"d-advanced-compute-name",attrs:{id:"advancedComputeName"}},[a("div",{staticClass:"index-name"}),a("div",{staticClass:"index-value"}),e._l(e.advancedComputeIndexList,function(t,i){return a("div",{key:i,staticClass:"advanced-value d-ellipsis"},[e._v("\n          "+e._s(t.name)+"\n      ")])})],2):e._e(),e._l(e.columns,function(t,i){return a("li",{key:i,style:e.indexColStyle(t)},[a("div",{staticClass:"index-name d-ellipsis",attrs:{title:t.name}},[e._v(e._s(t.name))]),a("div",{staticClass:"index-value d-ellipsis"},[a("DFormatValue",{attrs:{value:e.oneData[t.key],showType:t.showType,unit:t.unit}})],1),e._l(e.advancedComputeIndexList,function(i,r){return a("div",{key:r,staticClass:"advanced-value d-ellipsis"},[a("DFormatValue",{attrs:{value:e.oneData[t.key+"_"+i.code],showType:e.THBValueTypeObj[t.THBValueType]?e.THBValueTypeObj[t.THBValueType].showType:"",growthSign:""}})],1)})],2)})],2)},Rn=[],jn={name:"DIndexCard",props:{meta:{required:!0,type:Object},data:Array,id:[Number,String]},data:function(){return{columns:[],advancedComputeIndexList:[],advancedComputeNameWidth:0,oneData:{},THBValueTypeObj:Hr}},computed:{},methods:{indexColStyle:function(e){var t=0;this.columns.forEach(function(e){t=e.name.length+t});var a=e.name.length,i=100*a/t;return this.advancedComputeNameWidth?{"max-width":"calc("+i+"% - "+this.advancedComputeNameWidth*a/t+"px)"}:{"max-width":i+"%"}},handleMeta:function(){this.columns=this.meta.columns;var e={};this.meta.columns.forEach(function(t){t.THB&&t.THB.length&&t.THB.forEach(function(t){e[t]=Ur[t]})}),this.advancedComputeIndexList=Object.values(e).sort(function(e,t){return e.sortNum-t.sortNum}),this.$nextTick(function(){this.setAdvancedComputeNameWidth()})},handleData:function(){this.data&&this.data.length?this.oneData=this.data[0]:this.oneData={}},setAdvancedComputeNameWidth:function(){var e=document.getElementById("advancedComputeName");this.advancedComputeNameWidth=e.clientWidth}},watch:{meta:function(){this.handleMeta()},data:function(){this.handleData()}},mounted:function(){this.handleMeta(),this.handleData()}},Fn=jn,Sn=(a("8017"),Object(c["a"])(Fn,Ln,Rn,!1,null,null,null)),En=Sn.exports,An=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-echarts",attrs:{id:e.domId}})},Mn=[],On={name:"DPie",props:{meta:{required:!0,type:Object},data:{type:Array,default:function(){return[]}},id:[Number,String],resizeCount:{type:Number,default:0}},data:function(){return{chartInstance:null,domId:gn.getChartDomId(this.id),showType:"",unit:"",divisor:"",measureName:"数值",legendData:[],seriesData:[],measureColList:[]}},methods:{initChart:function(){this.handleData(),gn.initChart(this,this.getOption)},handleData:function(){var e=this;if(!e.data||!e.data.length)return e.legendData=[],void(e.seriesData=[]);var t=null,a=[];if(e.meta.columns.forEach(function(e){e.dim?t=e:a.push(e)}),e.measureColList=a,t){var i=e.measureColList[0];e.data.forEach(function(a){var r=a[t.key]?a[t.key]:"(空)";e.legendData.push(r),e.seriesData.push({value:a[i.key],name:r})}),e.measureName=i.name}else{var r=this.data[0];e.measureColList.forEach(function(t){e.legendData.push(t.name),e.seriesData.push({value:r[t.key],name:t.name})}),e.measureName="数值"}e.showType=e.measureColList[0].showType,e.unit=e.measureColList[0].unit},getOption:function(){var e=this,t=e.legendData,a={type:"pie",radius:[e.meta.ring?"24%":"0","62%"],center:["42%","50%"],label:{show:!1,formatter:function(t){return e.formatTooltipValue(t.value)+"\n"+t.percent+"%"}},data:e.seriesData},i={tooltip:new gn.Tooltip("item",function(t){var a='<ul style="color: '+t.color+'"><li>'+t.name+"</li><li>"+e.measureName+" : "+e.formatTooltipValue(t.value)+"</li><li>占比 : "+t.percent+"%</li></ul>";return a}),legend:new gn.Legend(t),series:[a]};return i},formatTooltipValue:function(e){return gn.formatTooltipValue(e,this.showType,this.unit)}},mounted:function(){this.initChart()},watch:{meta:function(){this.initChart()},data:function(){this.initChart()},resizeCount:function(e,t){this.chartInstance&&this.chartInstance.resize()}},beforeDestroy:function(){this.chartInstance.clear()}},zn=On,$n=Object(c["a"])(zn,An,Mn,!1,null,null,null),Vn=$n.exports,Bn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-echarts",attrs:{id:e.domId}})},Pn=[],Un=(a("7cdf"),a("ee1d"),{name:"DFunnel",props:{id:[String,Number],meta:Object,data:{type:Array,default:function(){return[]}},resizeCount:{type:Number,default:0}},data:function(){return{chartInstance:null,domId:gn.getChartDomId(this.id),legendData:[],seriesData:[],measureName:"数值"}},methods:{initChart:function(){this.handleMetaData(),this.$nextTick(function(){gn.initChart(this,this.getOption)})},handleMetaData:function(){var e=this,t=null,a=[];if(e.meta.columns.forEach(function(e){e.dim?t=e:a.push(e)}),e.measureColList=a,t){var i=e.measureColList[0];e.data.forEach(function(a){var r=a[t.key]?a[t.key]:"(空)";e.legendData.push(r),e.seriesData.push({value:a[i.key],name:r})}),e.measureName=i.name}else{var r=this.data[0];e.seriesData=[],e.legendData=[],e.meta.columns.forEach(function(t){e.legendData.push(t.name),r&&e.seriesData.push({value:r[t.key]&&""!==r[t.key]?r[t.key]:0,name:t.name})}),e.measureName="数值"}},getOption:function(){var e=this,t={tooltip:new gn.Tooltip("item",function(t){var a='<ul style="color: '+t.color+'"><li>'+t.name+"</li><li>"+e.measureName+" : "+e.formatTooltipValue(t.value)+"</li>",i="";return""!==(i=e.getConvertRate(t))&&(a=a+"<li>转化率 : "+i+"%</li>"),a+="</ul>",a}),legend:{show:!1},series:[e.getSerie(),e.getSerie({normal:{position:"inside",formatter:"{c}"}}),e.getSerie({normal:{position:"left",formatter:function(t){var a="",i="";return""!==(i=e.getConvertRate(t))&&(a="转化率 : "+i+"%"),a}}})]};return t},formatTooltipValue:function(e){return gn.formatTooltipValue(e,this.meta.showType,this.meta.unit,this.meta.divisor)},getSerie:function(e){var t=this,a={name:"漏斗图",type:"funnel",sort:"none",left:"10%",width:"80%",maxSize:"80%",data:t.seriesData};return e&&(a.label=e),a},getConvertRate:function(e){var t=this;if(e.dataIndex<t.seriesData.length-1){if(0===t.seriesData[e.dataIndex+1].value||Number.isNaN(t.seriesData[e.dataIndex+1].value))return"-";var a=100*t.seriesData[e.dataIndex+1].value/e.value;return a=Number.isInteger(a)?a:a.toFixed(2),a}return""}},mounted:function(){this.initChart()},watch:{meta:function(){this.initChart()},data:function(){this.initChart()},resizeCount:function(e,t){this.chartInstance&&this.chartInstance.resize()}},beforeDestroy:function(){this.chartInstance.clear()}}),Hn=Un,Yn=Object(c["a"])(Hn,Bn,Pn,!1,null,null,null),Gn=Yn.exports,Wn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-echarts",attrs:{id:e.domId}})},Xn=[],Jn=(a("3139"),a("e29b"),a("e10e"),a("e8bf"),a("b8e4"),a("4aa21"),a("ba08"),a("2de2"),a("4210"),a("cdf0"),a("9cfe"),a("bef7"),a("82d9"),a("7940"),a("1c8b"),a("70bf"),a("7c62"),a("c0c9"),a("8545"),a("7a8a"),a("012b"),a("869c"),a("4a4a"),a("a389"),a("f4d3"),a("1e29"),a("c6e6"),a("d71a"),a("a700"),a("fae8"),a("4b76"),a("7713"),a("dce8"),a("684d"),a("4045"),{name:"DMap",props:{id:[String,Number],meta:Object,data:{type:Array,default:function(){return[]}},resizeCount:{type:Number,default:0}},data:function(){return{chartInstance:null,domId:gn.getChartDomId(this.id),showType:"",unit:"",divisor:""}},methods:{initChart:function(){this.$nextTick(function(){gn.initChart(this,this.getOption)})},getOption:function(){var e=this,t=[],a={name:e.meta.title,type:"map",mapType:e.meta.mapType,label:{normal:{show:!0},emphasis:{show:!0}},data:[]},i=0;if(e.data&&e.data.length){var r={},n={};e.meta.columns.forEach(function(e){e.dim?r=e:n=e}),t.push(n.name),e.data.forEach(function(e){e[n.key]>i&&(i=Math.round(e[n.key])),a.data.push({value:e[n.key],name:e[r.key]})}),e.showType=n.showType,e.unit=n.unit,e.divisor=n.divisor,a.name=n.name}var o={tooltip:new gn.Tooltip("item",function(t){var a='<ul><li class="d-echarts-tooltip-name">'+t.name+'</li><li class="d-echarts-tooltip-value">'+t.seriesName+" : "+e.formatTooltipValue(t.value)+"</li></ul>";return a}),legend:new gn.Legend(t),visualMap:{min:0,max:i,left:"left",top:"bottom",text:["高","低"],calculable:!0},series:[a]};return o},formatTooltipValue:function(e){return gn.formatTooltipValue(e,this.showType,this.unit,this.divisor)}},mounted:function(){this.initChart()},watch:{meta:function(){this.initChart()},data:function(){this.initChart()},resizeCount:function(e,t){this.chartInstance&&this.chartInstance.resize()}},beforeDestroy:function(){this.chartInstance.clear()}}),Kn=Jn,qn=Object(c["a"])(Kn,Wn,Xn,!1,null,null,null),Zn=qn.exports,Qn={name:"DChartFactory",components:{DLineBar:In,DTable:kn,DIndexCard:En,DPie:Vn,DFunnel:Gn,DMap:Zn},props:{id:[String,Number],meta:Object,data:Array,resizeCount:{type:Number,default:0}},data:function(){return{chartTypeObj:Xr}},methods:{sortData:function(e,t){this.$emit("sort",e,t)}}},eo=Qn,to=(a("8fae"),Object(c["a"])(eo,zr,$r,!1,null,null,null)),ao=to.exports,io=ao,ro=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"d-chart-filter-list",style:e.filterListStyle},e._l(e.data,function(t,i){return a("DFilterItem",{key:i,attrs:{meta:t,labelWidth:e.labelWidth},on:{inited:function(a,i){return e.initedCondition(t,a,i)},change:function(a,i){return e.changeCondition(t,a,i)}}})}),1)},no=[],oo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"d-chart-filter-item"},[a("div",{staticClass:"label",style:{width:e.labelWidth+"px"}},[e._v("\n        "+e._s(e.meta.showName)+"\n    ")]),a("div",{staticClass:"control"},[e.filterControlTypeObj.date.code===e.meta.filterConfig.controlType?a("DDatePicker",{attrs:{type:e.meta.filterConfig.dateType,range:"",value:e.meta.filterConfig.defaultValue,width:e.controlWidth},on:{inited:e.initedCondition,change:e.changeCondition}}):e._e(),e.filterControlTypeObj.select.code===e.meta.filterConfig.controlType?a("DSelect",{attrs:{width:e.controlWidth,value:e.meta.filterConfig.defaultValue,data:e.selectData},on:{focus:e.setSelectData,inited:e.initedCondition,change:e.changeCondition}}):e._e(),e.filterControlTypeObj.num.code===e.meta.filterConfig.controlType?a("DInputNumber",{attrs:{width:e.controlWidth,value:e.meta.filterConfig.defaultValue},on:{inited:e.initedCondition,change:e.changeCondition}}):e._e(),e.filterControlTypeObj.text.code===e.meta.filterConfig.controlType?a("DInputText",{attrs:{width:e.controlWidth,value:e.meta.filterConfig.defaultValue},on:{inited:e.initedCondition,change:e.changeCondition}}):e._e(),a("DLoading",{staticStyle:{height:"100px"},attrs:{loading:e.loading}})],1)])},so=[],lo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{width:e.width+"px"}},[a("el-select",{ref:"Select",style:{width:e.width+"px"},attrs:{size:"mini","popper-append-to-body":!1},on:{change:e.changeDateOption},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},[a("el-option",{attrs:{value:e.allValue,label:"全部"}},[e._v("全部")]),e._l(e.optionList,function(t,i){return a("el-option",{key:i,attrs:{value:t.dateNum,label:t.name}},[e._v(e._s(t.name))])}),a("el-option",{attrs:{value:e.customDateOptionValue,label:"自定义时间"}},[e._v("自定义时间")])],2),a("el-dialog",{attrs:{visible:e.customDateForm.showModal,title:"自定义时间",width:"720px","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){return e.$set(e.customDateForm,"showModal",t)}}},[a("div",{staticClass:"d-box-middle"},[a("el-date-picker",{staticStyle:{width:"324px"},attrs:{size:"mini",editable:!1,type:e.datePickerType,"value-format":e.dateValueFormat,placeholder:"开始时间","default-time":"00:00:00"},on:{change:e.changStartDate},model:{value:e.customDateForm.startDate,callback:function(t){e.$set(e.customDateForm,"startDate",t)},expression:"customDateForm.startDate"}}),e.range?a("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[e._v("~")]):e._e(),e.range?a("el-date-picker",{staticStyle:{width:"324px"},attrs:{size:"mini",editable:!1,type:e.datePickerType,"value-format":e.dateValueFormat,placeholder:"结束时间","default-time":"23:59:59"},on:{change:e.changEndDate},model:{value:e.customDateForm.endDate,callback:function(t){e.$set(e.customDateForm,"endDate",t)},expression:"customDateForm.endDate"}}):e._e()],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("DSubmitCancel",{attrs:{nohr:""},on:{submit:e.saveCustomDate,cancel:e.cancelEditCustomDate}})],1)])],1)},co=[],mo={name:"DDatePicker",props:{type:{type:String,required:!0,validator:function(e){return e===Yr.day.code||e===Yr.month.code||e===Yr.year.code}},range:Boolean,value:[String,Number],width:Number},data:function(){return{customDateForm:{showModal:!1,startDate:"",endDate:""},allValue:"全部",customDateOptionValue:-99,lastSelectOptionValue:"",showLabel:"",currentValue:"",currentDateStr:"",optionList:[]}},computed:{datePickerType:function(){return this.type===Yr.day.code?this.range?"datetime":"date":this.type===Yr.month.code?"month":this.type===Yr.year.code?"year":""},dateValueFormat:function(){return this.type===Yr.day.code?this.range?"yyyy-MM-dd HH:mm:ss":"yyyy-MM-dd":this.type===Yr.month.code?"yyyy-MM":this.type===Yr.year.code?"yyyy":"yyyy-MM-dd"}},methods:{initData:function(){if(this.type===Yr.day.code||this.type===Yr.month.code||this.type===Yr.year.code){this.range?this.optionList=Yr[this.type].range:this.optionList=Yr[this.type].single;var e=this.value;if(void 0!==e&&""!==e||(e=this.allValue),this.optionList.findIndex(function(t){return t.dateNum===Number(e)})>=0){this.currentDateStr=Yr[this.type].getDateStr(e,this.range);var t=this.optionList.filter(function(t){return t.dateNum===Number(e)});t.length&&(this.showLabel=t[0].name,this.lastSelectOptionValue=Number(e),this.currentValue=Number(e))}else if(e===this.allValue)this.showLabel="",this.currentDateStr="",this.currentValue=e;else{if(this.currentDateStr=e,this.lastSelectOptionValue=this.customDateOptionValue,this.range){var a=e.split(",");this.customDateForm.startDate=a[0],this.type===Yr.day.code&&10===this.customDateForm.startDate.length&&(this.customDateForm.startDate=this.customDateForm.startDate+" 00:00:00"),this.customDateForm.endDate=a[1],this.showLabel=a[0]+"~"+a[1]}else this.customDateForm.startDate=e,this.showLabel=e;this.$nextTick(function(){this.currentValue=this.showLabel})}this.$emit("inited",this.currentDateStr,this.showLabel)}else console.warn("目前只支持日月年的类型")},changeDateOption:function(e){if(e===this.allValue)this.$emit("change","",""),this.lastSelectOptionValue=e;else if(e===this.customDateOptionValue)this.openCustomDateForm();else{var t=this.optionList.filter(function(t){return t.dateNum===e})[0];this.showLabel=t.name,this.currentDateStr=Yr[this.type].getDateStr(e,this.range),this.$emit("change",this.currentDateStr,this.showLabel),this.lastSelectOptionValue=e}},changStartDate:function(e){},changEndDate:function(e){},openCustomDateForm:function(){this.customDateForm.showModal=!0},validCustomDateForm:function(){if(!this.customDateForm.startDate)return this.$messageWarn("请选择开始时间!"),!1;if(this.range){if(!this.customDateForm.endDate)return this.$messageWarn("请选择结束时间!"),!1;if(this.customDateForm.startDate>this.customDateForm.endDate)return this.$messageWarn("结束时间必须大于或等于开始时间!"),!1}return!0},saveCustomDate:function(){if(this.validCustomDateForm()){var e=this.customDateForm.startDate;e.includes("00:00:00")&&(e=e.substr(0,10)),this.currentDateStr=e,this.showLabel=e,this.range&&(this.currentDateStr=this.currentDateStr+","+this.customDateForm.endDate,this.showLabel=this.showLabel+"~"+this.customDateForm.endDate),this.$emit("change",this.currentDateStr,this.showLabel),this.lastSelectOptionValue=this.customDateOptionValue,this.customDateForm.showModal=!1,this.currentValue=this.showLabel}},cancelEditCustomDate:function(){this.customDateForm.showModal=!1,this.lastSelectOptionValue===this.customDateOptionValue?this.currentValue=this.showLabel:this.currentValue=this.lastSelectOptionValue}},watch:{range:function(){this.initData()},type:function(){this.initData()}},mounted:function(){this.initData()}},uo=mo,po=Object(c["a"])(uo,lo,co,!1,null,null,null),ho=po.exports,fo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{ref:"Select",staticClass:"d-select",style:{width:e.width+"px"},attrs:{size:"mini",multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"可输入关键词搜索","remote-method":e.filterOptions,"popper-append-to-body":!1},on:{focus:e.focusInput,change:e.changeOption},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[a("el-option",{attrs:{value:e.allValue,label:"全部"}},[e._v("全部")]),e._l(e.optionList,function(t,i){return a("el-option",{key:i,attrs:{value:t,label:t}},[e._v(e._s(t))])})],2)},bo=[],yo={name:"DSelect",props:{value:String,data:Array,width:Number},data:function(){return{optionList:[],selectValue:[],allValue:"全部",maxListSize:25}},methods:{initData:function(){var e=this.value;void 0!==e&&""!==e.trim()||(e=this.allValue),this.selectValue=e.split(","),this.$refs.Select.$refs.input.placeholder="可输入关键词搜索",e===this.allValue?this.$emit("inited","",""):this.$emit("inited",e,e),this.filterOptions()},filterOptions:function(e){this.optionList=e?this.data.filter(function(t){return t.includes(e)}).slice(0,this.maxListSize):this.data.slice(0,this.maxListSize)},changeOption:function(e){if(0===e.length)this.selectValue=[this.allValue];else if(e.length>1)if(e[e.length-1]===this.allValue)this.selectValue=[this.allValue];else{var t=this.selectValue.indexOf(this.allValue);t>-1&&this.selectValue.splice(t,1)}var a=this.selectValue.toString();a===this.allValue?this.$emit("change","",""):this.$emit("change",a,a)},focusInput:function(e){this.$emit("focus",e)}},watch:{data:function(){this.filterOptions()}},mounted:function(){this.initData()}},go=yo,Co=(a("372d"),Object(c["a"])(go,fo,bo,!1,null,null,null)),vo=Co.exports,Do=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{width:e.width+"px"}},[a("el-input",{style:{width:e.width/2-14+"px"},attrs:{size:"mini",placeholder:"大于等于"},on:{change:e.changeStart},model:{value:e.start,callback:function(t){e.start=t},expression:"start"}}),a("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[e._v("~")]),a("el-input",{style:{width:e.width/2-14+"px"},attrs:{size:"mini",placeholder:"小于等于"},on:{change:e.changeEnd},model:{value:e.end,callback:function(t){e.end=t},expression:"end"}})],1)},Io=[],wo={name:"DInputNumber",props:{value:String,width:Number},data:function(){return{start:"",end:""}},methods:{initData:function(){if(void 0!==this.value&&""!==this.value.trim()){var e=this.value.split(",");this.start=e[0],this.end=e[1];var t=this.getShowLabel();this.$emit("inited",this.start+","+this.end,t)}else this.$emit("inited","","")},changeStart:function(e){""!==e&&isNaN(e)&&(this.start=""),this.changeValue()},changeEnd:function(e){""!==e&&isNaN(e)&&(this.end=""),this.changeValue()},getShowLabel:function(){var e="";return""!==this.start&&(e=e+"大于等于"+this.start),""!==this.end&&(e=e+"小于等于"+this.end),e},changeValue:function(){var e=this.getShowLabel(),t="";""!==e&&(t=this.start+","+this.end),this.$emit("change",t,e)}},mounted:function(){this.initData()}},To=wo,No=Object(c["a"])(To,Do,Io,!1,null,null,null),_o=No.exports,xo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-input",{style:{width:e.width+"px"},attrs:{size:"mini",placeholder:"请输入关键词"},on:{change:e.changeInput},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})},ko=[],Lo={name:"DInputText",props:{value:String,width:Number},data:function(){return{inputValue:""}},methods:{initData:function(){this.inputValue=this.value,this.$emit("inited",this.inputValue,this.inputValue)},changeInput:function(e){this.$emit("change",e,e)}},mounted:function(){this.initData()}},Ro=Lo,jo=Object(c["a"])(Ro,xo,ko,!1,null,null,null),Fo=jo.exports,So=E.dataVisual.be+"/api/filter",Eo={querySelectData:{api:So+"/query-select-data",name:"查询下拉框枚举数据"}},Ao=function(e){return M(Eo.querySelectData.api,e)},Mo={name:"DFilterItem",components:{DDatePicker:ho,DSelect:vo,DInputNumber:_o,DInputText:Fo},props:{meta:Object,labelWidth:Number},data:function(){return{filterControlTypeObj:Jr,controlWidth:200,selectData:[],initedSelectData:!1,loading:!1,cascadeConditionValue:""}},methods:{initedCondition:function(e,t){this.$emit("inited",e,t)},changeCondition:function(e,t){this.$emit("change",e,t)},setSelectData:function(){var e=this;this.initedSelectData||(this.loading=!0,Ao({tbId:this.meta.tbId,tbName:this.meta.tbName,dbName:this.meta.dbName,colName:this.meta.colName,conditionValue:this.cascadeConditionValue}).then(function(t){e.initedSelectData=!0,e.loading=!1,e.selectData=t.data}).catch(function(t){e.$handleError(t),e.loading=!1}))}}},Oo=Mo,zo=(a("62c5"),Object(c["a"])(Oo,oo,so,!1,null,null,null)),$o=zo.exports,Vo={name:"DFilterList",components:{DFilterItem:$o},props:{data:{type:Array,default:function(){return[]}},horizontal:Boolean},data:function(){return{labelWidth:null,initFilterNum:0,conditionValueObj:{},showLabelObj:{}}},computed:{filterListStyle:function(){var e={};return this.horizontal&&(e={display:"flex",flexWrap:"wrap"}),e}},methods:{setLabelWidth:function(){if(!this.horizontal){var e=0;this.data.forEach(function(t){var a=sn(t.showName);e=a>e?a:e}),this.labelWidth=6*e}},initedCondition:function(e,t,a){this.initFilterNum=this.initFilterNum+1,this.updateColFilter(e,t,a),this.data.length===this.initFilterNum&&this.$emit("inited",Object.values(this.conditionValueObj),Object.values(this.showLabelObj))},changeCondition:function(e,t,a){this.updateColFilter(e,t,a),this.$emit("change",Object.values(this.conditionValueObj),Object.values(this.showLabelObj))},updateColFilter:function(e,t,a){this.conditionValueObj[e.colName]={colName:e.colName,tbId:e.tbId,tbName:e.tbName,dbName:e.dbName,oper:e.filterConfig.oper,dataType:e.dataType,value:t},this.showLabelObj[e.colName]={showName:e.showName,showLabel:a}}},mounted:function(){this.setLabelWidth()}},Bo=Vo,Po=Object(c["a"])(Bo,ro,no,!1,null,null,null),Uo=Po.exports,Ho={name:"DChartContainer",components:{DChartFactory:io,DFilterList:Uo},props:{chart:Object,globalFilterValue:String,resizeCount:{type:Number,default:0},visibled:Boolean},data:function(){return{chartTypeObj:Xr,chartMeta:{},filterMeta:[],data:[],showChart:!1,tipMsg:"",loading:!1,sortFieldKey:"",sortType:"",chartFilterValue:"[]",lastChartFilterValue:"",conditionValueArr:[],showLabelArr:[],filterInited:!1,filterOperating:!1}},methods:{handleMeta:function(){var e=JSON.parse(this.chart.meta);this.chartMeta=e.chartMeta,this.filterMeta=e.filterMeta?e.filterMeta:[],0===this.filterMeta.length&&(this.filterInited=!0)},sortData:function(e,t){this.sortFieldKey=e,this.sortType=t,this.setData()},setData:function(){var e=this;this.visibled&&this.filterInited&&this.lastChartFilterValue!==this.chartFilterValue&&(this.loading=!0,this.lastChartFilterValue=this.chartFilterValue,Fr({id:this.chart.id,chartFilterValue:this.chartFilterValue,globalFilterValue:this.globalFilterValue,sortFieldKey:this.sortFieldKey,sortType:this.sortType}).then(function(t){e.loading=!1,e.data=t.data,t.data.length?e.showChart=!0:(e.showChart=!1,e.tipMsg="此图表暂无数据")}).catch(function(t){e.$handleError(t),e.loading=!1,e.showChart=!1,e.tipMsg=t.msg,e.data=[]}))},initedFilterList:function(e,t){this.conditionValueArr=e,this.chartFilterValue=JSON.stringify(e),this.showLabelArr=t,this.filterInited=!0,this.setData()},changeCondition:function(e,t){this.conditionValueArr=e,this.chartFilterValue=JSON.stringify(e),this.showLabelArr=t},mouseEnterFilterBtn:function(e){this.filterOperating=!0;var t=window.innerWidth,a=e.clientX,i=document.getElementById("filter_panel_"+this.chart.id);t-a<200?i.style.right="-20px":a-220<200?i.style.left="-20px":i.style.right=-i.clientWidth/2+"px"},mouseLeaveFilterBtn:function(){var e=this;e.filterOperating=!1,setTimeout(function(){e.setData()},100)}},watch:{visibled:function(){this.setData()}},mounted:function(){this.handleMeta()}},Yo=Ho,Go=(a("33c7"),Object(c["a"])(Yo,Mr,Or,!1,null,null,null)),Wo=Go.exports,Xo={bind:function(e,t,a){function i(a){if(e.contains(a.target))return!1;t.expression&&t.value(a)}e.__vueClickOutside__=i,document.addEventListener("click",i)},update:function(){},unbind:function(e,t){document.removeEventListener("click",e.__vueClickOutside__),delete e.__vueClickOutside__}},Jo={name:"DChartItem",components:{DChartContainer:Wo},directives:{clickoutside:Xo},props:{chart:Object,globalFilterValue:String,visibled:Boolean},data:function(){return{count:0,resizeCount:0,dom:null,isResizing:!1,isMoved:!1}},methods:{clickOutside:function(){this.count=this.count+1,this.count>1&&document.getElementById("chart_"+this.chart.id).classList.remove("active")},mouseMoveResize:function(e){var t=this;t.resizeCount=t.resizeCount+1,t.$emit("resizing",t.dom,e.clientX,e.clientY)},mouseUpResize:function(e){var t=this;t.isResizing=!1,t.$emit("resize-over",t.dom,e.clientX,e.clientY),document.documentElement.removeEventListener("mousemove",t.mouseMoveResize),document.documentElement.removeEventListener("mouseup",t.mouseUpResize)},mouseDownResize:function(e){var t=this;t.isResizing=!0,t.dom=document.getElementById("chart_"+this.chart.id),t.chart.resizeX=e.clientX,t.chart.resizeY=e.clientY,document.documentElement.addEventListener("mousemove",t.mouseMoveResize),document.documentElement.addEventListener("mouseup",t.mouseUpResize)},mouseDownDrag:function(e){var t=this;!t.isResizing&&t.chart.editAuth&&(t.chart.dragStartX=e.clientX,t.chart.dragStartY=e.clientY,t.dom=document.getElementById("chart_"+this.chart.id),t.chart.dragStartLeft=t.dom.offsetLeft,t.chart.dragStartTop=t.dom.offsetTop,document.documentElement.addEventListener("mousemove",t.mouseMoveDrag),document.documentElement.addEventListener("mouseup",t.mouseUpDrag))},mouseUpDrag:function(e){var t=this;t.isMoved&&t.$emit("move-over",t.dom,e.clientX,e.clientY),t.isMoved=!1,document.documentElement.removeEventListener("mousemove",t.mouseMoveDrag),document.documentElement.removeEventListener("mouseup",t.mouseUpDrag)},mouseMoveDrag:function(e){var t=this;t.chart.dragStartX===e.clientX&&t.chart.dragStartY===e.clientY||(t.isMoved=!0),t.$emit("moving",t.dom,e.clientX,e.clientY)},addResizeCount:function(){this.resizeCount=this.resizeCount+1}},mounted:function(){}},Ko=Jo,qo=(a("30d3"),Object(c["a"])(Ko,Er,Ar,!1,null,null,null)),Zo=qo.exports,Qo={name:"DChartList",components:{DChartItem:Zo},props:{containerWidth:Number,tabId:Number,data:Array,activeTabId:[Number,String],activeChartId:[Number,String]},data:function(){return{chartMargin:4,minContainerWidth:980,datumWidth:0,lastScrollTop:0}},methods:{setStyle:function(){this.$nextTick(function(){var e=this;this.data&&(this.datumWidth=this.minContainerWidth>this.containerWidth?this.minContainerWidth:this.containerWidth,this.setContainerHeight(),this.data.forEach(function(t){e.setChartItemStyle(t)}),this.scrollToActiveChart(),this.setChartVisibled())})},setChartItemStyle:function(e){var t=this.datumWidth,a=(t-this.chartMargin*(Math.round(12/e.sizeX)-1))*e.sizeX/12,i=0;e.col>0&&(i=(t-this.chartMargin*(Math.round(12/e.col)-1))*e.col/12+this.chartMargin);var r=t/14*e.sizeY+(e.sizeY-1)*this.chartMargin,n=t/14*e.row+e.row*this.chartMargin,o=document.getElementById("chart_"+e.id);o.style.width=a+"px",o.style.height=r+"px",o.style.top=n+"px",o.style.left=i+"px"},buildOtherChartNewPoisitionFromResize:function(e,t,a,i,r){var n=this,o=this.getChartNewPosition(e,t,a,i,r),s=o.newSizeX,d=o.newSizeY,l=o.newRow,c=o.newCol,m=this.findRightAndDown(e,l,c,s,d),u={};m.forEach(function(e){u[e.id]=e}),m.forEach(function(e){n.recursionFindDown(e,u)}),Object.values(u).forEach(function(e){e.row=e.row+e.addRow,n.setChartItemStyle(e)})},getChartNewPosition:function(e,t,a,i,r){var n=e.sizeX,o=e.sizeY,s=this.datumWidth;t>0&&(n=Math.round(12*(t+this.chartMargin)/(s+this.chartMargin)),n<2&&(n=2)),a>0&&(o=Math.round((a+this.chartMargin)/(s/14+this.chartMargin)),o<2&&(o=2));var d=e.row,l=e.col;return i>=0&&(l=Math.round(12*(i+2*this.chartMargin)/(s+this.chartMargin))),r>=0&&(d=Math.round(r/(s/14+this.chartMargin))),{newRow:d,newCol:l,newSizeX:n,newSizeY:o}},recursionFindDown:function(e,t){var a=this;this.data.forEach(function(i){a.checkChartUpDownOneByOne(e,i)&&(e.addRow>0?t[i.id]?i.addRow=e.addRow>i.addRow?e.addRow:i.addRow:(t[i.id]=i,i.addRow=e.addRow,a.recursionFindDown(i,t)):(e.col>=i.col&&e.col<i.col+i.sizeX||e.col+e.sizeX>i.col&&e.col+e.sizeX<=i.col+i.sizeX||e.col<=i.col&&e.col+e.sizeX>=i.col+i.sizeX)&&(t[i.id]?i.addRow=e.addRow<i.addRow?e.addRow:i.addRow:(t[i.id]=i,i.addRow=e.addRow,a.recursionFindDown(i,t))))})},checkChartUpDownOneByOne:function(e,t){if(t.row===e.row+e.sizeY){if(t.col<e.col+e.sizeX&&t.col>=e.col)return!0;if(e.col<t.col+t.sizeX&&e.col>=t.col)return!0}return!1},checkChartLeftRightOneByOne:function(e,t){if(t.col===e.col+e.sizeX){if(t.row<e.row+e.sizeY&&t.row>=e.row)return!0;if(e.row<t.row+t.sizeY&&e.row>=t.row)return!0}return!1},checkChartVerticalCross:function(e,t){return e.col>=t.col&&e.col<t.col+t.sizeX||e.col+e.sizeX>t.col&&e.col+e.sizeX<=t.col+t.sizeX||e.col<=t.col&&e.col+e.sizeX>=t.col+t.sizeX},findRightAndDown:function(e,t,a,i,r){var n=this,o=[],s=r-e.sizeY;return this.data.forEach(function(d){if(n.checkChartUpDownOneByOne(e,d))if(r>e.sizeY)d.addRow=s,o.push(d);else if(r<e.sizeY||i<e.sizeX){var l={row:0,col:d.col,sizeX:d.sizeX,sizeY:0};n.data.forEach(function(o){if(o.row+o.sizeY<=d.row)if(o.id!==e.id)n.checkChartVerticalCross(d,o)&&l.row+l.sizeY<o.row+o.sizeY&&(l=o);else{var s={row:t,col:a,sizeX:i,sizeY:r};n.checkChartVerticalCross(d,s)&&l.row+l.sizeY<o.row+o.sizeY&&(l={row:t,col:a,sizeX:i,sizeY:r})}}),d.addRow=l.row+l.sizeY-d.row,0!==d.addRow&&o.push(d)}n.checkChartLeftRightOneByOne(e,d)&&i>e.sizeX&&(d.addRow=e.row+r-d.row,o.push(d))}),o},setContainerHeight:function(){var e,t=this.data;t.forEach(function(t){e?e.row+e.sizeY<t.row+t.sizeY&&(e=t):e=t});var a=document.getElementById("container_tab_"+this.tabId),i=this.datumWidth;if(e){var r=e.row+e.sizeY,n=i/14*r+(r-1)*this.chartMargin;a.style.height=n+"px"}},scrollToActiveChart:function(){if(this.activeChartId){var e=document.getElementById("dash_tab_"+this.tabId),t=document.getElementById("chart_"+this.activeChartId);t&&e.scrollTo(0,t.offsetTop)}},setChartVisibled:function(){var e=this,t=document.getElementById("dash_tab_"+this.tabId);this.data.forEach(function(a){var i=document.getElementById("chart_"+a.id),r=0;r=t.scrollTop>=e.lastScrollTop?i.offsetTop+50-t.offsetTop:i.offsetTop+i.clientHeight-50-t.offsetTop;var n=t.scrollTop,o=t.clientHeight;e.tabId===Number(e.activeTabId)&&r>=n&&r<=n+o&&(a.visibled=!0)}),this.lastScrollTop=t.scrollTop,this.$forceUpdate()},resizeChart:function(e,t,a,i){var r=this.getResizeChartNewStyle(e,t,a,i);t.style.width=r.width+"px",t.style.height=r.height+"px",this.buildOtherChartNewPoisitionFromResize(e,r.width,r.height,r.left,r.top),this.setContainerHeight(),this.$nextTick(function(){e.resizeX=a,e.resizeY=i})},getResizeChartNewStyle:function(e,t,a,i){var r=t.clientWidth-(e.resizeX-a),n=t.clientHeight-(e.resizeY-i),o=t.offsetLeft,s=t.offsetTop;return{width:r,height:n,left:o,top:s}},resizeChartOver:function(e,t,a,i){var r=this.getResizeChartNewStyle(e,t,a,i),n=this.getChartNewPosition(e,r.width,r.height,r.left,r.top);e.row=n.newRow,e.col=n.newCol,e.sizeX=n.newSizeX,e.sizeY=n.newSizeY,this.setChartItemStyle(e);var o=this.$refs["chart_item_"+e.id][0];o.addResizeCount(),this.setContainerHeight(),this.updateChartPositions()},getMoveChartNewStyle:function(e,t,a,i){var r=a-e.dragStartX+e.dragStartLeft;r<0?r=0:r>this.datumWidth-t.clientWidth&&(r=this.datumWidth-t.clientWidth);var n=i-e.dragStartY+e.dragStartTop;return n<0&&(n=0),{width:t.clientWidth,height:t.clientHeight,left:r,top:n}},moveChart:function(e,t,a,i){var r=this.getMoveChartNewStyle(e,t,a,i);t.style.left=r.left+"px",t.style.top=r.top+"px"},moveChartOver:function(e,t,a,i){var r=this.getMoveChartNewStyle(e,t,a,i),n=this.getChartNewPosition(e,r.width,r.height,r.left,r.top);e.row=n.newRow,e.col=n.newCol,e.sizeX=n.newSizeX,e.sizeY=n.newSizeY,this.setChartItemStyle(e),this.setContainerHeight(),this.updateChartPositions()},updateChartPositions:function(){var e=[];this.data.forEach(function(t){e.push({id:t.id,row:t.row,col:t.col,sizeX:t.sizeX,sizeY:t.sizeY})}),Sr({positions:JSON.stringify(e)}).catch(this.$handleError)},scrollListener:function(){this.setChartVisibled()},resizeWindowListener:function(){this.setChartVisibled()}},watch:{activeTabId:function(){this.setChartVisibled()},data:function(){this.setStyle()},containerWidth:function(){this.setStyle()}},mounted:function(){var e=this;e.setStyle(),document.getElementById("dash_tab_"+e.tabId).addEventListener("scroll",e.scrollListener),window.addEventListener("resize",e.resizeWindowListener)},beforeDestroy:function(){var e=this,t=document.getElementById("dash_tab_"+e.tabId);t&&t.removeEventListener("scroll",e.scrollListener),window.removeEventListener("resize",e.resizeWindowListener)}},es=Qo,ts=(a("5002"),Object(c["a"])(es,kr,Lr,!1,null,null,null)),as=ts.exports,is={name:"DDashContainer",components:{DChartList:as},data:function(){return{projId:"",dashId:"",activeChartId:"",activeTabId:"",dash:{},loading:!1,hasTab:!1,chartList:[],tabList:[],chartMargin:4,containerWidth:980,minContainerWidth:980,showAddChartModal:!1,largeChartType:Br.General.code,largeChartTypeList:Object.values(Br),tableKeyWord:"",searchedTableList:[],externalReportUrl:""}},computed:{dashMainStyle:function(){var e=45;return this.dash.globalFilterList&&this.dash.globalFilterList.length&&(e+=40),{height:"calc(100% - "+e+"px)"}}},methods:{renderDash:function(){var e=this;e.projId=e.$route.params.projId,e.dashId=e.$route.params.dashId,e.activeChartId=e.$route.query.chartId,e.activeTabId=e.$route.query.tabId,e.loading=!0,e.hasTab=!1,e.chartList=[],e.tabList=[],yr({id:e.dashId}).then(function(t){e.loading=!1,e.dash=t.data,e.dash.tabList&&(e.dash.tabList.length>1||1===e.dash.tabList.length&&-1!==e.dash.tabList[0].id)?(e.hasTab=!0,e.tabList=e.dash.tabList,e.activeTabId||(e.activeTabId=e.tabList[0].id+"")):e.dash.tabList&&e.dash.tabList.length&&(e.chartList=e.dash.tabList[0].chartList)}).catch(e.$handleError)},setContainerWidth:function(){this.$nextTick(function(){var e=document.getElementById("main_"+this.dashId);e&&(this.containerWidth=e.clientWidth-30)})},openAddChart:function(){this.showAddChartModal=!0,this.searchTable()},searchTable:function(){var e=this;Fa({tbName:this.tableKeyWord,pageNo:1,pageSize:15}).then(function(t){e.searchedTableList=t.data.data}).catch(this.$handleError)},submitExternalReport:function(){}},watch:{"$route.path":function(){this.renderDash()}},mounted:function(){var e=this;e.renderDash(),e.setContainerWidth(),window.addEventListener("resize",function(){e.setContainerWidth()})}},rs=is,ns=(a("b139"),Object(c["a"])(rs,_r,xr,!1,null,null,null)),os=ns.exports;Nr.Container=os;var ss=Nr,ds=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("DMenuNav",{attrs:{slot:"side",data:e.sideMenuList,mode:"vertical"},slot:"side"}),a("div",{staticClass:"d-chart-container d-box-middle d-chart-full-screen",staticStyle:{overflow:"auto"}},[a("router-view")],1)],1)},ls=[],cs={name:"DChartDemo",data:function(){return{sideMenuList:[{name:"指标卡",path:"/data-visual/chart-demo/indexcard"},{name:"表格",path:"/data-visual/chart-demo/table"},{name:"双轴图",path:"/data-visual/chart-demo/line-bar"},{name:"非日期双轴图",path:"/data-visual/chart-demo/line-bar-not-date"},{name:"折现图",path:"/data-visual/chart-demo/line"},{name:"非日期折现图",path:"/data-visual/chart-demo/line-not-date"},{name:"柱状图",path:"/data-visual/chart-demo/bar"},{name:"非日期柱状图",path:"/data-visual/chart-demo/bar-not-date"},{name:"堆积柱状图",path:"/data-visual/chart-demo/bar-stack"},{name:"堆积top图",path:"/data-visual/chart-demo/bar-stack-top"},{name:"条形top图",path:"/data-visual/chart-demo/bar-top"},{name:"面积图",path:"/data-visual/chart-demo/area"},{name:"非日期面积图",path:"/data-visual/chart-demo/area-not-date"},{name:"饼图",path:"/data-visual/chart-demo/pie"},{name:"环形图",path:"/data-visual/chart-demo/pie-ring"},{name:"漏斗图(零维度)",path:"/data-visual/chart-demo/funnel"},{name:"漏斗图(一维度)",path:"/data-visual/chart-demo/funnel-dim"},{name:"地图",path:"/data-visual/chart-demo/map"},{name:"筛选控件",path:"/data-visual/chart-demo/filter"}]}}},ms=cs,us=(a("abd3"),Object(c["a"])(ms,ds,ls,!1,null,null,null)),ps=us.exports,hs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{data:e.data,meta:e.meta,id:"1"}})},fs=[];function bs(e){var t=[],a=!1;e.columns.forEach(function(e,t){e.dim&&e.dataType===qi.date.code&&(a=!0)});var i=Vr.getDatesByStr("2019-04-13","2019-07-13","yyyy-MM-dd"),r=Kr.map(function(e){return e.name}),n=1;if(e.chartType===Xr.IndexCard.code)n=1;else if(e.chartType===Xr.Table.code)i=i.concat(i),r=r.concat(r).concat(r).concat(r),n=i.length;else if(e.chartType===Xr.Map.code){if("china"!==e.mapType){var o=Kr.filter(function(t){return t.name===e.mapType})[0];r=o.cityList.map(function(e){return e.name+(e.name.includes("自治州")?"":"市")})}n=r.length}else e.chartType===Xr.Funnel.code?(r=["第一步","第二步","第三步","第四步"],n=r.length):n=a?i.length:r.length;for(var s=function(a){var n={};e.columns.forEach(function(e,t){e.dim?e.dataType===qi.date.code?n[e.key]=i[a]:n[e.key]=r[a]:(e.showType===Pr.rate.code?n[e.key]=1*on(100).toFixed(2):e.showType===Pr.num.code?n[e.key]=1*nn(1e4):e.showType===Pr.amt.code&&(n[e.key]=1*on(1e4).toFixed(2)),e.THB&&e.THB.length&&e.THB.forEach(function(t){e.THBValueType===Hr.CONTRAST_VALUE.code?n[e.key+"_"+t]=on(100).toFixed(2)*(nn(100)%2===0?1:-1):e.THBValueType===Hr.GROWTH_VALUE.code?n[e.key+"_"+t]=nn(1e4)*(nn(100)%2===0?1:-1):e.THBValueType===Hr.GROWTH_RATE.code&&(n[e.key+"_"+t]=on(100).toFixed(2)*(nn(100)%2===0?1:-1))}))}),t.push(n)},d=0;d<n;d++)s(d);return t}var ys={chartType:Xr.IndexCard.code,columns:[{key:"col1",name:"订单量",showType:Pr.num.code,unit:"",THB:[Ur.hb.code,Ur.tb_w.code,Ur.tb_m.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_RATE.code,dim:!1},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,dim:!1},{key:"col3",name:"下单率",showType:Pr.rate.code,unit:"",dim:!1}]},gs={name:"DIndexCardDemo",components:{DChartFactory:io},data:function(){return{meta:ys,data:bs(ys)}}},Cs=gs,vs=Object(c["a"])(Cs,hs,fs,!1,null,null,null),Ds=vs.exports,Is=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data},on:{sort:e.sortData}})},ws=[],Ts={chartType:Xr.Table.code,columns:[{key:"col1",name:"日期",showType:Pr.text.code,dataType:qi.date.code,dim:!0},{key:"col2",name:"大区",showType:Pr.text.code,dim:!0},{key:"col3",name:"省份",showType:Pr.text.code,dim:!0},{key:"col4",name:"城市",showType:Pr.text.code,locked:!0,dim:!0},{key:"col5",name:"订单量",showType:Pr.num.code,unit:"",THB:[Ur.hb.code],THBValueType:Hr.GROWTH_RATE.code,sortType:"asc",dim:!1},{key:"col6",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code],THBValueType:Hr.GROWTH_VALUE.code,dim:!1},{key:"col7",name:"订单率",showType:Pr.rate.code,unit:"",THB:[Ur.hb.code],THBValueType:Hr.CONTRAST_VALUE.code,dim:!1},{key:"col8",name:"用户量",showType:Pr.num.code,unit:"",dim:!1},{key:"col9",name:"PV",showType:Pr.num.code,unit:"",dim:!1},{key:"col10",name:"GMV",showType:Pr.amt.code,unit:"",dim:!1}]},Ns={name:"DTableDemo",components:{DChartFactory:io},data:function(){return{meta:Ts,data:bs(Ts)}},methods:{sortData:function(e,t){var a=!1;for(var i in this.meta.columns)this.meta.columns[i].key===e&&(a=this.meta.columns[i].showType===Pr.text.code);var r=JSON.parse(JSON.stringify(this.data));this.data=t?r.sort(function(i,r){return a?t===Gr.asc.code?rn(i[e],r[e]):rn(r[e],i[e]):t===Gr.asc.code?i[e]-r[e]:r[e]-i[e]}):r}}},_s=Ns,xs=Object(c["a"])(_s,Is,ws,!1,null,null,null),ks=xs.exports,Ls=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"line1"}})},Rs=[],js={chartType:Xr.LineBar.code,columns:[{key:"col1",name:"日期",showType:Pr.text.code,dataType:qi.date.code,dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,type:"line",dim:!1},{key:"col3",name:"支付金额",showType:Pr.amt.code,unit:"元",type:"line",dim:!1}]},Fs={name:"DLineDemo",components:{DChartFactory:io},data:function(){return{meta:js,data:bs(js)}}},Ss=Fs,Es=Object(c["a"])(Ss,Ls,Rs,!1,null,null,null),As=Es.exports,Ms=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"line4"}})},Os=[],zs={chartType:Xr.LineBar.code,columns:[{key:"col1",name:"省份",showType:Pr.text.code,dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,type:"line",dim:!1}]},$s={name:"DLineNotDateDemo",components:{DChartFactory:io},data:function(){return{meta:zs,data:bs(zs)}}},Vs=$s,Bs=Object(c["a"])(Vs,Ms,Os,!1,null,null,null),Ps=Bs.exports,Us=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"bar1"}})},Hs=[],Ys={chartType:Xr.LineBar.code,columns:[{key:"col1",name:"日期",showType:Pr.text.code,dataType:qi.date.code,dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,type:"bar",dim:!1},{key:"col3",name:"支付金额",showType:Pr.amt.code,unit:"元",type:"bar",dim:!1}]},Gs={name:"DBarDemo",components:{DChartFactory:io},data:function(){return{meta:Ys,data:bs(Ys)}}},Ws=Gs,Xs=Object(c["a"])(Ws,Us,Hs,!1,null,null,null),Js=Xs.exports,Ks=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"bar3"}})},qs=[],Zs={chartType:Xr.LineBar.code,columns:[{key:"col1",name:"日期",showType:Pr.text.code,dataType:qi.date.code,dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,type:"bar",dim:!1},{key:"col3",name:"支付金额",showType:Pr.amt.code,unit:"元",type:"bar",dim:!1}],stack:!0},Qs={name:"DBarStackDemo",components:{DChartFactory:io},data:function(){return{meta:Zs,data:bs(Zs)}}},ed=Qs,td=Object(c["a"])(ed,Ks,qs,!1,null,null,null),ad=td.exports,id=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"bar4"}})},rd=[],nd={chartType:Xr.LineBar.code,columns:[{key:"col1",name:"城市",showType:Pr.text.code,dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,type:"bar",dim:!1},{key:"col3",name:"支付金额",showType:Pr.amt.code,unit:"元",type:"bar",dim:!1}],category:"y",stack:!0},od={name:"DBarStackTopDemo",components:{DChartFactory:io},data:function(){return{meta:nd,data:bs(nd)}}},sd=od,dd=Object(c["a"])(sd,id,rd,!1,null,null,null),ld=dd.exports,cd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"bar5"}})},md=[],ud={chartType:Xr.LineBar.code,columns:[{key:"col1",name:"省份",showType:Pr.text.code,dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,type:"bar",dim:!1}],category:"y"},pd={name:"DBarTopDemo",components:{DChartFactory:io},data:function(){return{meta:ud,data:bs(ud)}}},hd=pd,fd=Object(c["a"])(hd,cd,md,!1,null,null,null),bd=fd.exports,yd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"bar2"}})},gd=[],Cd={chartType:Xr.LineBar.code,columns:[{key:"col1",name:"省份",showType:Pr.text.code,dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,type:"bar",dim:!1}]},vd={name:"DBarNotDateDemo",components:{DChartFactory:io},data:function(){return{meta:Cd,data:bs(Cd)}}},Dd=vd,Id=Object(c["a"])(Dd,yd,gd,!1,null,null,null),wd=Id.exports,Td=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"area1"}})},Nd=[],_d={chartType:Xr.LineBar.code,columns:[{key:"col1",name:"日期",showType:Pr.text.code,dataType:qi.date.code,dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,type:"line",dim:!1}],area:!0},xd={name:"DAreaDemo",components:{DChartFactory:io},data:function(){return{meta:_d,data:bs(_d)}}},kd=xd,Ld=Object(c["a"])(kd,Td,Nd,!1,null,null,null),Rd=Ld.exports,jd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"area2"}})},Fd=[],Sd={chartType:Xr.LineBar.code,columns:[{key:"col1",name:"日期",showType:Pr.text.code,dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,type:"line",dim:!1}],area:!0},Ed={name:"DAreaNotDateDemo",components:{DChartFactory:io},data:function(){return{meta:Sd,data:bs(Sd)}}},Ad=Ed,Md=Object(c["a"])(Ad,jd,Fd,!1,null,null,null),Od=Md.exports,zd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"line3"}})},$d=[],Vd={chartType:Xr.LineBar.code,columns:[{key:"col1",name:"省份",showType:Pr.text.code,dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,type:"bar",dim:!1,axis:Wr.LeftY.code},{key:"col3",name:"订单量",showType:Pr.num.code,unit:"",type:"line",dim:!1,axis:Wr.RightY.code}]},Bd={name:"DLineBarNotDateDemo",components:{DChartFactory:io},data:function(){return{meta:Vd,data:bs(Vd)}}},Pd=Bd,Ud=Object(c["a"])(Pd,zd,$d,!1,null,null,null),Hd=Ud.exports,Yd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"linebar"}})},Gd=[],Wd={chartType:Xr.LineBar.code,columns:[{key:"col1",name:"日期",showType:Pr.text.code,dataType:qi.date.code,dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,type:"bar",dim:!1,axis:Wr.LeftY.code},{key:"col3",name:"订单率",showType:Pr.rate.code,unit:"",type:"line",dim:!1,axis:Wr.RightY.code}]},Xd={name:"DLineBarDemo",components:{DChartFactory:io},data:function(){return{meta:Wd,data:bs(Wd)}}},Jd=Xd,Kd=Object(c["a"])(Jd,Yd,Gd,!1,null,null,null),qd=Kd.exports,Zd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"pie1"}})},Qd=[],el={chartType:Xr.Pie.code,columns:[{key:"col1",name:"订单量",showType:Pr.num.code,unit:"",THB:[Ur.hb.code,Ur.tb_w.code,Ur.tb_m.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_RATE.code,dim:!1},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,dim:!1},{key:"col3",name:"下单率",showType:Pr.rate.code,unit:"",dim:!1}],ring:!1},tl={name:"DPieDemo",components:{DChartFactory:io},data:function(){return{meta:el,data:bs(el)}}},al=tl,il=Object(c["a"])(al,Zd,Qd,!1,null,null,null),rl=il.exports,nl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"ring"}})},ol=[],sl={chartType:Xr.Pie.code,columns:[{key:"col1",name:"城市",showType:Pr.text.code,dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",dim:!1}],ring:!0},dl={name:"DPieRingDemo",components:{DChartFactory:io},data:function(){return{meta:sl,data:bs(sl)}}},ll=dl,cl=Object(c["a"])(ll,nl,ol,!1,null,null,null),ml=cl.exports,ul=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"funnel"}})},pl=[],hl={chartType:Xr.Funnel.code,columns:[{key:"col1",name:"点击量",showType:Pr.num.code,unit:"",dim:!1},{key:"col2",name:"注册量",showType:Pr.num.code,unit:"",dim:!1},{key:"col3",name:"下单量",showType:Pr.num.code,unit:"",dim:!1},{key:"col4",name:"支付量",showType:Pr.num.code,unit:"",dim:!1}],ring:!1},fl={name:"DFunnelDemo",components:{DChartFactory:io},data:function(){return{meta:hl,data:bs(hl)}}},bl=fl,yl=Object(c["a"])(bl,ul,pl,!1,null,null,null),gl=yl.exports,Cl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:"funnel2"}})},vl=[],Dl={chartType:Xr.Funnel.code,columns:[{key:"col1",name:"渠道",showType:Pr.text.code,unit:"",dim:!0},{key:"col2",name:"下单金额",showType:Pr.amt.code,unit:"元",dim:!1}],ring:!1},Il={name:"DFunnelDimDemo",components:{DChartFactory:io},data:function(){return{meta:Dl,data:bs(Dl)}}},wl=Il,Tl=Object(c["a"])(wl,Cl,vl,!1,null,null,null),Nl=Tl.exports,_l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",height:"100%"}},[a("div",{staticStyle:{height:"32px"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeProvince},model:{value:e.mapType,callback:function(t){e.mapType=t},expression:"mapType"}},[a("el-option",{attrs:{label:"全国",value:"china"}}),e._l(e.proviceCityList,function(e){return a("el-option",{key:e.mapType,attrs:{label:e.name,value:e.name}})})],2)],1),a("div",{staticStyle:{width:"100%",height:"calc(100% - 32px)"}},[a("DChartFactory",{attrs:{meta:e.meta,data:e.data,id:e.mapType}})],1)])},xl=[],kl={chartType:Xr.Map.code,columns:[{key:"col1",name:"城市",showType:Pr.text.code,unit:"",dim:!0},{key:"col2",name:"订单金额",showType:Pr.amt.code,unit:"元",THB:[Ur.hb.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_VALUE.code,dim:!1}],mapType:"china"},Ll={name:"DMapDemo",components:{DChartFactory:io},data:function(){return{proviceCityList:Kr,meta:{},data:[],mapType:"china"}},methods:{changeProvince:function(){this.setMeta(),this.setData()},setMeta:function(){this.meta=kl,this.meta.mapType=this.mapType},setData:function(){this.data=bs(this.meta)}},mounted:function(){this.mapType="china",this.changeProvince()}},Rl=Ll,jl=Object(c["a"])(Rl,_l,xl,!1,null,null,null),Fl=jl.exports,Sl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",height:"100%"}},[a("el-row",[a("h2",[e._v("筛选项列表：纵向")])]),a("el-row",[a("div",{staticClass:"d-ellipsis"},[a("span",{staticClass:"d-chart-filter-tip"},e._l(e.showLabelArr,function(t,i){return""!==t.value&&"全部"!==t.value?a("span",{key:i,staticClass:"item"},[a("span",{staticClass:"label"},[e._v(e._s(t.showName))]),a("span",{staticClass:"value"},[e._v(e._s(t.showLabel))])]):e._e()}),0)]),a("DFilterList",{attrs:{data:e.filterList},on:{inited:e.initedFilterList,change:e.changeCondition}})],1),a("el-row",[a("h2",[e._v("筛选项列表：水平")])]),a("el-row",[a("DFilterList",{attrs:{data:e.filterList,horizontal:""}})],1),a("el-row",[a("h2",[e._v("日期")])]),a("el-row",[a("el-col",{staticClass:"d-desclist-index",attrs:{span:12}},[a("div",{staticClass:"d-desclist-index-term"},[e._v("单选")]),a("div",{staticClass:"d-desclist-index-detail"},[a("div",[a("span",[e._v("条件值: "+e._s(e.singleDayValue))]),e._v("\n                        \n                    "),a("span",[e._v("显示: "+e._s(e.singleDayLabel))])]),a("DDatePicker",{attrs:{type:"day",value:1,width:300},on:{inited:e.changeDay,change:e.changeDay}})],1)]),a("el-col",{staticClass:"d-desclist-index",attrs:{span:12}},[a("div",{staticClass:"d-desclist-index-term"},[e._v("区间选")]),a("div",{staticClass:"d-desclist-index-detail"},[a("div",[a("span",[e._v("条件值: "+e._s(e.rangeDayValue))]),e._v("\n                        \n                    "),a("span",[e._v("显示: "+e._s(e.rangeDayLabel))])]),a("DDatePicker",{attrs:{type:"day",range:"",value:"2019-08-01,2019-08-08 12:10:11",width:300},on:{inited:e.changeDayRange,change:e.changeDayRange}})],1)])],1),a("el-row",[a("h2",[e._v("月")])]),a("el-row",[a("el-col",{staticClass:"d-desclist-index",attrs:{span:12}},[a("div",{staticClass:"d-desclist-index-term"},[e._v("单选")]),a("div",{staticClass:"d-desclist-index-detail"},[a("div",[a("span",[e._v("条件值: "+e._s(e.singleMonthValue))]),e._v("\n                        \n                    "),a("span",[e._v("显示: "+e._s(e.singleMonthLabel))])]),a("DDatePicker",{attrs:{type:"month",value:0,width:300},on:{inited:e.changeMonth,change:e.changeMonth}})],1)]),a("el-col",{staticClass:"d-desclist-index",attrs:{span:12}},[a("div",{staticClass:"d-desclist-index-term"},[e._v("区间选")]),a("div",{staticClass:"d-desclist-index-detail"},[a("div",[a("span",[e._v("条件值: "+e._s(e.rangeMonthValue))]),e._v("\n                        \n                    "),a("span",[e._v("显示: "+e._s(e.rangeMonthLabel))])]),a("DDatePicker",{attrs:{type:"month",range:"",value:1,width:300},on:{inited:e.changeMonthRange,change:e.changeMonthRange}})],1)])],1),a("el-row",[a("h2",[e._v("年")])]),a("el-row",[a("el-col",{staticClass:"d-desclist-index",attrs:{span:12}},[a("div",{staticClass:"d-desclist-index-term"},[e._v("单选")]),a("div",{staticClass:"d-desclist-index-detail"},[a("div",[a("span",[e._v("条件值: "+e._s(e.singleYearValue))]),e._v("\n                        \n                    "),a("span",[e._v("显示: "+e._s(e.singleYearLabel))])]),a("DDatePicker",{attrs:{type:"year",value:"2018",width:300},on:{inited:e.changeYear,change:e.changeYear}})],1)]),a("el-col",{staticClass:"d-desclist-index",attrs:{span:12}},[a("div",{staticClass:"d-desclist-index-term"},[e._v("区间选")]),a("div",{staticClass:"d-desclist-index-detail"},[a("div",[a("span",[e._v("条件值: "+e._s(e.rangeYearValue))]),e._v("\n                        \n                    "),a("span",[e._v("显示: "+e._s(e.rangeYearLabel))])]),a("DDatePicker",{attrs:{type:"year",range:"",value:3,width:300},on:{inited:e.changeYearRange,change:e.changeYearRange}})],1)])],1),a("el-row",[a("h2",[e._v("下拉框")])]),a("el-row",[a("el-col",{staticClass:"d-desclist-index",attrs:{span:12}},[a("div",{staticClass:"d-desclist-index-detail"},[a("div",[a("span",[e._v("条件值: "+e._s(e.selectValue))]),e._v("\n                        \n                    "),a("span",[e._v("显示: "+e._s(e.selectValue))])]),a("DSelect",{attrs:{width:300,value:"",data:e.selectData},on:{inited:e.changeSelect,change:e.changeSelect}})],1)])],1),a("el-row",[a("h2",[e._v("数字框")])]),a("el-row",[a("el-col",{staticClass:"d-desclist-index",attrs:{span:12}},[a("div",{staticClass:"d-desclist-index-detail"},[a("div",[a("span",[e._v("条件值: "+e._s(e.numValue))]),e._v("\n                        \n                    "),a("span",[e._v("显示: "+e._s(e.numLabel))])]),a("DInputNumber",{attrs:{width:300,value:"1,"},on:{inited:e.changeNumber,change:e.changeNumber}})],1)])],1),a("el-row",[a("h2",[e._v("文本框")])]),a("el-row",[a("div",{staticClass:"d-desclist-index-detail"},[a("div",[a("span",[e._v("条件值: "+e._s(e.inputValue))]),e._v("\n                    \n                "),a("span",[e._v("显示: "+e._s(e.inputValue))])]),a("DInputText",{attrs:{width:300,value:"小学生"},on:{inited:e.changeInput,change:e.changeInput}})],1)])],1)},El=[],Al={showName:"时间字段",colName:"createtime",tbId:1,dbName:"dw",tbName:"tb",filterConfig:{controlType:Jr.date.code,defaultValue:7,dateType:Yr.day.code,dataType:qi.date.code}},Ml={showName:"数字字段的所产生的",colName:"amt",tbId:1,dbName:"dw",tbName:"tb",filterConfig:{controlType:Jr.num.code,defaultValue:"1,5",dataType:qi.num.code}},Ol={showName:"枚举字段",colName:"state",tbId:1,dbName:"dw",tbName:"tb",filterConfig:{controlType:Jr.select.code,defaultValue:"北京",dataType:qi.text.code}},zl={showName:"文本字段",colName:"addr",tbId:1,dbName:"dw",tbName:"tb",filterConfig:{controlType:Jr.text.code,defaultValue:"xiao",dataType:qi.text.code}},$l={name:"DChartFilterDemo",components:{DDatePicker:ho,DSelect:vo,DInputNumber:_o,DInputText:Fo,DFilterItem:$o,DFilterList:Uo},data:function(){return{singleDayValue:"",singleDayLabel:"",rangeDayValue:"",rangeDayLabel:"",singleMonthValue:"",singleMonthLabel:"",rangeMonthValue:"",rangeMonthLabel:"",singleYearValue:"",singleYearLabel:"",rangeYearValue:"",rangeYearLabel:"",selectData:["开始","的说法","定时","dsfa","的为","的说法为","权威","ytry","复旦复华","挂号费v","贵好几倍v","到生产","萨达","下单","请遵守","规范化","奥德赛"],selectValue:"",numValue:"",numLabel:"",inputValue:"",labelWidth:130,dateFilterColumn:Al,numberFilterColumn:Ml,selectFilterColumn:Ol,textFilterColumn:zl,filterList:[Al,Ml,Ol,zl],conditionValueArr:[],showLabelArr:[]}},methods:{changeDay:function(e,t){this.singleDayValue=e,this.singleDayLabel=t},changeDayRange:function(e,t){this.rangeDayValue=e,this.rangeDayLabel=t},changeMonth:function(e,t){this.singleMonthValue=e,this.singleMonthLabel=t},changeMonthRange:function(e,t){this.rangeMonthValue=e,this.rangeMonthLabel=t},changeYear:function(e,t){this.singleYearValue=e,this.singleYearLabel=t},changeYearRange:function(e,t){this.rangeYearValue=e,this.rangeYearLabel=t},changeSelect:function(e,t){this.selectValue=e},changeNumber:function(e,t){this.numValue=e,this.numLabel=t},changeInput:function(e,t){this.inputValue=e},initedFilterList:function(e,t){this.conditionValueArr=e,this.showLabelArr=t},changeCondition:function(e,t){this.conditionValueArr=e,this.showLabelArr=t}}},Vl=$l,Bl=(a("2e05"),Object(c["a"])(Vl,Sl,El,!1,null,null,null)),Pl=Bl.exports;ps.IndexCard=Ds,ps.Table=ks,ps.Line=As,ps.LineNotDate=Ps,ps.Bar=Js,ps.BarStack=ad,ps.BarStackTop=ld,ps.BarTop=bd,ps.BarNotDate=wd,ps.Area=Rd,ps.AreaNotDate=Od,ps.LineBar=qd,ps.LineBarNotDate=Hd,ps.Pie=rl,ps.PieRing=ml,ps.Funnel=gl,ps.FunnelDim=Nl,ps.Map=Fl,ps.ChartFilter=Pl;var Ul=ps;lr.Dashboard=ss,lr.ChartDemo=Ul;var Hl=lr,Yl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-login d-box-middle"},[a("div",{staticStyle:{width:"300px"}},[a("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginFormRules,"label-width":"0px"}},[a("el-form-item",{attrs:{prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1)],1),a("el-row",[a("el-button",{staticClass:"d-login-btn",attrs:{type:"primary"},on:{click:e.doLogin}},[e._v("登录")])],1)],1)])},Gl=[],Wl=E.sso.be+"/api",Xl={login:{api:Wl+"/login",name:"登录"},logout:{api:Wl+"/logout",name:"退出登录"}},Jl=function(e){return M(Xl.login.api,e)},Kl={data:function(){return{loginForm:{userName:"",password:""},loginFormRules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{type:"string",pattern:/^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]*$/,message:"只能包含数字、字母、下划线,字母开头",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{doLogin:function(){var e=this;this.$refs["loginForm"].validate(function(t){t&&Jl({username:e.username,password:e.password}).then(function(t){var a=e.$route.query.redirect;a?window.location.href=a:e.$router.push("/auth")}).catch(e.handleError)})}}},ql=Kl,Zl=(a("67d4"),Object(c["a"])(ql,Yl,Gl,!1,null,null,null)),Ql=Zl.exports,ec=Ql,tc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DPageContent",[i("el-row",{staticStyle:{height:"100%"}},[i("el-col",{staticClass:"d-col",staticStyle:{height:"100%"}},[i("el-card",{staticStyle:{height:"100%"},attrs:{shadow:"never"}},[i("div",{staticClass:"d-user"},[i("img",{attrs:{src:a("b0df")}}),i("div",{staticClass:"d-user-name",staticStyle:{"margin-bottom":"20px"}},[e._v("小平")])]),i("div",{staticClass:"d-box-middle"},[i("div",{staticClass:"d-me"},[i("el-row",{staticClass:"d-row"},[i("i",{staticClass:"el-icon-suitcase d-me-icon"}),i("span",[e._v("我就是个敲代码的")])]),i("el-row",{staticClass:"d-row"},[i("i",{staticClass:"fa fa-wechat d-me-icon"}),i("span",[e._v("136291865")])]),i("el-row",{staticClass:"d-row"},[i("i",{staticClass:"el-icon-location-outline d-me-icon"}),i("span",[e._v("58到家")])]),i("el-row",{staticClass:"d-row"},[i("i",{staticClass:"fa fa-github d-me-icon"}),i("a",{attrs:{href:"https://github.com/xiaoping1988",target:"_blank"}},[e._v("https://github.com/xiaoping1988")])]),i("el-row",{staticClass:"d-row"},[i("i",{staticClass:"fa fa-share-alt d-me-icon"}),i("a",{attrs:{href:"https://blog.csdn.net/xiaoping_1988",target:"_blank"}},[e._v("https://blog.csdn.net/xiaoping_1988")])])],1)])])],1)],1)],1)},ac=[],ic={name:"DAboutMe"},rc=ic,nc=(a("068f"),Object(c["a"])(rc,tc,ac,!1,null,null,null)),oc=nc.exports,sc={Home:C,Auth:Lt,Search:$t,Message:ha,DataMap:ir,DataVisual:Hl,SSO:ec,AboutMe:oc};i["default"].use(p["a"]);var dc=new p["a"]({routes:[{path:"/",component:sc.Home,redirect:"/data-visual"},{path:"*",redirect:"/data-visual"},{path:"/sso/login",component:sc.SSO},{path:"/about-me",component:sc.AboutMe},{path:"/auth",component:sc.Auth,children:[{path:"resource",component:sc.Auth.Resource},{path:"role",component:sc.Auth.Role},{path:"user",component:sc.Auth.User},{path:"console",component:sc.Auth.Console}],redirect:"/auth/console"},{path:"/search",component:sc.Search},{path:"/message",component:sc.Message,children:[{path:"onsite",component:sc.Message.Onsite},{path:"receive-manage",component:sc.Message.ReceiveManage}],redirect:"/message/onsite"},{path:"/data-map",component:sc.DataMap,children:[{path:"my-tb",component:sc.DataMap.MyTb,children:[{path:"own",component:sc.DataMap.MyTb.Own},{path:"manage",component:sc.DataMap.MyTb.Manage},{path:"auth",component:sc.DataMap.MyTb.Auth}],redirect:"/data-map/my-tb/own"},{path:"ds-manage",component:sc.DataMap.DsManager},{path:"ds-manage/:id",component:sc.DataMap.DsManager.Detail},{path:"db-manage/:id",component:sc.DataMap.DbManager.Detail},{path:"tb-manage",component:sc.DataMap.TbManager},{path:"tb-manage/:id",component:sc.DataMap.TbManager.Detail}],redirect:"/data-map/my-tb/own"},{path:"/data-visual",component:sc.DataVisual,children:[{path:"dashboard",component:sc.DataVisual.Dashboard,children:[{path:":projId/:dashId",component:sc.DataVisual.Dashboard.Container}]},{path:"chart-demo",component:sc.DataVisual.ChartDemo,children:[{path:"indexcard",component:sc.DataVisual.ChartDemo.IndexCard},{path:"table",component:sc.DataVisual.ChartDemo.Table},{path:"line-bar",component:sc.DataVisual.ChartDemo.LineBar},{path:"line-bar-not-date",component:sc.DataVisual.ChartDemo.LineBarNotDate},{path:"line",component:sc.DataVisual.ChartDemo.Line},{path:"line-not-date",component:sc.DataVisual.ChartDemo.LineNotDate},{path:"bar",component:sc.DataVisual.ChartDemo.Bar},{path:"bar-stack",component:sc.DataVisual.ChartDemo.BarStack},{path:"bar-stack-top",component:sc.DataVisual.ChartDemo.BarStackTop},{path:"bar-top",component:sc.DataVisual.ChartDemo.BarTop},{path:"bar-not-date",component:sc.DataVisual.ChartDemo.BarNotDate},{path:"area",component:sc.DataVisual.ChartDemo.Area},{path:"area-not-date",component:sc.DataVisual.ChartDemo.AreaNotDate},{path:"pie",component:sc.DataVisual.ChartDemo.Pie},{path:"pie-ring",component:sc.DataVisual.ChartDemo.PieRing},{path:"funnel",component:sc.DataVisual.ChartDemo.Funnel},{path:"funnel-dim",component:sc.DataVisual.ChartDemo.FunnelDim},{path:"map",component:sc.DataVisual.ChartDemo.Map},{path:"filter",component:sc.DataVisual.ChartDemo.ChartFilter}],redirect:"/data-visual/chart-demo/indexcard"}],redirect:"/data-visual/dashboard"}]}),lc=dc,cc=a("94db"),mc=a.n(cc),uc=[{id:2,name:"数据地图",code:"DATA_MAP",creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:3,name:"权限中心",code:"AUTH",creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:4,name:"数据API",code:"DATA_API",creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:1,name:"数据可视化",code:"REPORT",creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"}],pc={bootstrap:function(e){fm.get(e,z.listProjectAuth.name,z.listProjectAuth.api,function(){var e=[];return uc.forEach(function(t){e.push({id:t.id,name:t.name,code:t.code})}),e=e.reverse(),e}),fm.post(e,z.getProjectById.name,z.getProjectById.api,function(e){var t={};return uc.forEach(function(a){a.id===e.id&&(t=a)}),t}),fm.post(e,z.saveOrUpdateProj.name,z.saveOrUpdateProj.api,function(e){var t;return e.id?(t=e.id,uc.forEach(function(t){t.id===e.id&&(t.name=e.name,t.code=e.code.toUpperCase(),t.updator="sanshang",t.updateTime=Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"))})):(t=(new Date).getTime(),uc.push({id:t,name:e.name,code:e.code.toUpperCase(),creator:"xiaoping",updator:"xiaoping",createTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),updateTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")})),t}),fm.post(e,z.deleteProj.name,z.deleteProj.api,function(e){var t=uc.findIndex(function(t){return e.id===t.id});return uc.splice(t,1),""})}},hc=[{id:1,pid:0,name:"仪表盘",code:"REPORT_DASH",feRouter:"/report/dash",type:"MENU",projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:2,pid:1,name:"只读",code:"",feRouter:"",type:"MENU",projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:3,pid:1,name:"新增",code:"REPORT_DASH_ADD",feRouter:"",type:"BUTTON",projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:4,pid:0,name:"模板",code:"REPORT_TPL",feRouter:"/report/tpl",type:"MENU",projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:5,pid:4,name:"只读",code:"",feRouter:"",type:"MENU",projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:6,pid:4,name:"新增",code:"REPORT_TPL_ADD",feRouter:"",type:"BUTTON",projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"}],fc=[{id:1,name:"查询一条记录",url:"/api/resource/get-by-id",resourceId:1},{id:2,name:"查询资源树",url:"/api/resource/get-by-id",resourceId:1}],bc=[{id:1,name:"模板",code:"TPL",url:"https://localhost:8080/api/tpl",projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:2,name:"库表",code:"DB_TABLE",url:"https://localhost:8080/api/db-table",projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:3,name:"服务",code:"SERVICE",url:"https://localhost:8080/api/service",projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"}],yc=[{id:1,name:"查询仪表盘",type:1,url:"/api/dash/list",projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:2,name:"仪表盘页面",type:2,url:"/report/dash",projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"}];function gc(e){var t={id:0,label:"root",children:[]};return Cc(t,e),t.children}function Cc(e,t){var a=t.filter(function(t){return t.pid==e.id});a&&a.length&&a.forEach(function(a){var i={id:a.id,label:a.name,children:[]};Cc(i,t),e.children.push(i)})}var vc={mockDataResource:function(e,t){fm.get(e,t.name,t.url,function(e){return[{id:"1_db",realId:"1",label:"db_1",type:"db",children:[{id:"1_table",realId:"1",label:"tb_1",type:"table"},{id:"2_table",realId:"2",label:"tb_2",type:"table"},{id:"3_table",realId:"3",label:"tb_3",type:"table"},{id:"4_table",realId:"4",label:"tb_4",type:"table"}]},{id:"2_db",realId:"2",label:"db_2",type:"db",children:[{id:"5_table",realId:"5",label:"tb_5",type:"table"},{id:"6_table",realId:"6",label:"tb_6",type:"table"},{id:"7_table",realId:"7",label:"tb_7",type:"table"},{id:"8_table",realId:"8",label:"tb_8",type:"table"}]},{id:"3_db",realId:"3",label:"db_3",type:"db",children:[{id:"9_table",realId:"9",label:"tb_9",type:"table"},{id:"10_table",realId:"10",label:"tb_10",type:"table"},{id:"11_table",realId:"11",label:"tb_11",type:"table"},{id:"12_table",realId:"12",label:"tb_12",type:"table"}]}]})},bootstrap:function(e){var t=this;bc.forEach(function(a){t.mockDataResource(e,a)}),fm.post(e,G.listStaticResourceTree.name,G.listStaticResourceTree.api,function(e){var t=hc.filter(function(t){return t.projId===e.projId});return gc(t)}),fm.post(e,G.getStaticResource.name,G.getStaticResource.api,function(e){var t={};return hc.forEach(function(a){a.id===e.id&&(t=a,t.beApiList=fc.filter(function(e){return e.resourceId===a.id}))}),t}),fm.post(e,G.saveOrUpdateStaticResource.name,G.saveOrUpdateStaticResource.api,function(e){var t;if(e.id)t=e.id,hc.forEach(function(a){if(a.id===e.id){a.name=e.name,a.code=e.code.toUpperCase(),a.type=e.type,a.feRouter=e.feRouter,a.updator="sanshang",a.updateTime=Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss");var i=JSON.parse(e.beApiList),r=[];fc.forEach(function(e,t){var a=i.findIndex(function(t){return e.id===t.id});-1===a?r.push(t):(e.name=i[a].name,e.url=i[a].url)}),r.forEach(function(e,t){fc.splice(e-t,1)}),i.forEach(function(e,a){e.id||fc.push({id:(new Date).getTime()+a,name:e.name,url:e.url,resourceId:t})})}});else{t=(new Date).getTime(),hc.push({projId:e.projId,id:t,pid:e.pid,name:e.name,code:e.code.toUpperCase(),type:e.type,feRouter:e.feRouter,creator:"xiaoping",createTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),updator:"xiaoping",updateTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")});var a=JSON.parse(e.beApiList);a.forEach(function(e,a){fc.push({id:(new Date).getTime()+a,name:e.name,url:e.url,resourceId:t})})}return t}),fm.post(e,G.deleteStaticResource.name,G.deleteStaticResource.api,function(e){var t=hc.findIndex(function(t){return t.id===e.id});return hc.splice(t,1),""}),fm.post(e,G.listDataResource.name,G.listDataResource.api,function(e){var t=bc.filter(function(t){return t.projId===e.projId});return t}),fm.post(e,G.saveOrUpdateDataResource.name,G.saveOrUpdateDataResource.api,function(a){var i;return a.id?(i=a.id,bc.forEach(function(e){e.id===a.id&&(e.name=a.name,e.code=a.code.toUpperCase(),e.url=a.url,e.updator="sanshang",e.updateTime=Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"))})):(i=(new Date).getTime(),bc.push({projId:a.projId,id:i,name:a.name,code:a.code.toUpperCase(),url:a.url,creator:"xiaoping",createTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),updator:"xiaoping",updateTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")})),t.mockDataResource(e,a),i}),fm.post(e,G.deleteDataResource.name,G.deleteDataResource.api,function(e){var t=bc.findIndex(function(t){return t.id===e.id});return bc.splice(t,1),""}),fm.post(e,G.listWhiteListResource.name,G.listWhiteListResource.api,function(e){var t=yc.filter(function(t){return t.projId===e.projId});return t.forEach(function(e){1===e.type?e.typeName="后端":e.typeName="前端"}),t}),fm.post(e,G.saveOrUpdateWhiteListResource.name,G.saveOrUpdateWhiteListResource.api,function(e){var t;return e.id?(t=e.id,yc.forEach(function(t){t.id===e.id&&(t.type=e.type,t.name=e.name,t.url=e.url,t.updator="sanshang",t.updateTime=Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"))})):(t=(new Date).getTime(),yc.push({projId:e.projId,id:t,name:e.name,type:e.type,url:e.url,creator:"xiaoping",createTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),updator:"xiaoping",updateTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")})),t}),fm.post(e,G.deleteWhiteListResource.name,G.deleteWhiteListResource.api,function(e){var t=yc.findIndex(function(t){return t.id===e.id});return yc.splice(t,1),""})}},Dc=[{id:1,name:"超级系统管理员",code:"AUTH_SUPER_ADMIN",remark:"什么都能干",grade:Ae.SUPER.code,type:Me.STATIC.code,operPrivilege:"",projId:3,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:2,name:"数据权限管理员",code:"AUTH_DATA_ADMIN",remark:"什么都能干",grade:Ae.ORDINARY.code,type:Me.STATIC.code,operPrivilege:"",projId:3,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:3,name:"运营",code:"REPORT_YY",remark:"什么都能干",grade:Ae.ORDINARY.code,type:Me.DATA.code,operPrivilege:Oe.READ_ONLY.code,projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:4,name:"人力",code:"REPORT_HR",remark:"什么都能干",grade:Ae.ORDINARY.code,type:Me.DATA.code,operPrivilege:Oe.READ_WRITE.code,projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:5,name:"管理员",code:"REPORT_ADMIN",remark:"什么都能干",grade:Ae.ADMIN.code,type:Me.STATIC.code,operPrivilege:"",projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:6,name:"市场部",code:"REPORT_MARKET",remark:"什么都能干",grade:Ae.ORDINARY.code,type:Me.DATA.code,operPrivilege:Oe.CREATE_TABLE.code,projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:7,name:"数据部",code:"REPORT_MARKET",remark:"什么都能干",grade:Ae.ORDINARY.code,type:Me.DATA.code,operPrivilege:Oe.CREATE_TABLE.code,projId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:8,name:"XXXX",code:"DATA_API_MARKET",remark:"什么都能干",grade:Ae.ORDINARY.code,type:Me.DATA.code,operPrivilege:Oe.CREATE_TABLE.code,projId:4,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"}],Ic=[{id:1,roleId:5,resourceId:1,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:2,roleId:5,resourceId:2,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:3,roleId:5,resourceId:3,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:4,roleId:5,resourceId:4,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:5,roleId:5,resourceId:5,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"},{id:6,roleId:5,resourceId:6,creator:"liujiangping",createTime:"2019-05-10 10:23:21",updator:"sanshang",updateTime:"2019-05-12 10:23:21"}],wc=[{id:1,roleId:3,userName:"xiaoyi",userNameCn:"小一"},{id:2,roleId:3,userName:"xiaoer",userNameCn:"小二"},{id:3,roleId:3,userName:"xiaosan",userNameCn:"小三"},{id:4,roleId:3,userName:"xiaosi",userNameCn:"小四"},{id:5,roleId:7,userName:"xiaoyi",userNameCn:"小一"},{id:6,roleId:8,userName:"xiaoyi",userNameCn:"小一"}],Tc=[{id:1,roleId:3,dataResourceId:1,resourceId:"1_db",pid:"",realId:"1",label:"db_1",type:"db"},{id:2,roleId:3,dataResourceId:1,resourceId:"5_table",pid:"1_db",realId:"5",label:"table_5",type:"table"},{id:3,roleId:3,dataResourceId:1,resourceId:"6_table",pid:"1_db",realId:"6",label:"table_6",type:"table"},{id:4,roleId:3,dataResourceId:1,resourceId:"0_table",pid:"1_db",realId:"0",label:"table_0",type:"table"},{id:5,roleId:3,dataResourceId:1,resourceId:"7_table",pid:"1_db",realId:"7",label:"table_7",type:"table"}];function Nc(e,t){var a={};return Object.values(t).forEach(function(t){e===t.code&&(a=t)}),a}var _c={bootstrap:function(e){fm.post(e,Ee.listRole.name,Ee.listRole.api,function(e){var t=Dc.filter(function(t){return t.projId===e.projId});return t.forEach(function(e){e.gradeName=Nc(e.grade,Ae).name,e.typeName=Nc(e.type,Me).name,e.operPrivilegeName=Nc(e.operPrivilege,Oe).name}),t}),fm.post(e,Ee.listProjRole.name,Ee.listProjRole.api,function(e){var t={};return Dc.forEach(function(e){if(!t[e.projId]){var a=uc.filter(function(t){return t.id===e.projId})[0];t[e.projId]={projId:a.id,projName:a.name,roleList:[]}}7!=e.id&&t[e.projId].roleList.push({roleId:e.id,roleName:e.name})}),t=Object.values(t),t}),fm.post(e,Ee.addStaticRole.name,Ee.addStaticRole.api,function(e){var t=(new Date).getTime();if(Dc.push({id:t,projId:e.projId,name:e.name,code:e.code.toUpperCase(),remark:e.remark,grade:e.grade,type:Me.STATIC.code,operPrivilege:"",creator:"xiaoping",createTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),updator:"xiaoping",updateTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")}),e.resourceIdList){var a=e.resourceIdList.split(",");a.forEach(function(e,a){Ic.push({id:(new Date).getTime()+a,roleId:t,resourceId:e,creator:"xiaoping",createTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),updator:"xiaoping",updateTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")})})}return t}),fm.post(e,Ee.updateRoleBase.name,Ee.updateRoleBase.api,function(e){var t=e.id;return Dc.forEach(function(t){t.id===e.id&&(t.name=e.name,t.code=e.code.toUpperCase(),t.remark=e.remark,t.updator="sanshang",t.updateTime=Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"))}),t}),fm.post(e,Ee.listStaticRoleResourceRelation.name,Ee.listStaticRoleResourceRelation.api,function(e){var t=Ic.filter(function(t){return t.roleId===e.roleId});return t}),fm.post(e,Ee.grantStaticRoleAuth.name,Ee.grantStaticRoleAuth.api,function(e){var t=e.roleId;if(Dc.forEach(function(t){t.id===e.roleId&&(t.grade=e.grade)}),e.addResourceIdList){var a=e.addResourceIdList.split(",");a.forEach(function(t,a){Ic.push({id:(new Date).getTime()+a,roleId:e.roleId,resourceId:Number(t)})})}if(e.delRelationIdList){var i=e.delRelationIdList.split(","),r=[];Ic.forEach(function(e,t){i.includes(e.id+"")&&r.push(t)}),r.forEach(function(e,t){Ic.splice(e-t,1)})}return t}),fm.post(e,Ee.deleteRole.name,Ee.deleteRole.api,function(e){var t=Dc.findIndex(function(t){return t.id===e.id});return t>-1&&Dc.splice(t,1),""}),fm.post(e,Ee.listRoleUser.name,Ee.listRoleUser.api,function(e){var t=wc.filter(function(t){return t.roleId===e.id});return t}),fm.post(e,Ee.addRoleUser.name,Ee.addRoleUser.api,function(e){var t=(new Date).getTime();return wc.push({id:t,roleId:e.roleId,userName:e.userName,userNameCn:e.userNameCn}),t}),fm.post(e,Ee.deleteRoleUser.name,Ee.deleteRoleUser.api,function(e){var t=wc.findIndex(function(t){return t.id===e.roleUserId});return t>-1&&wc.splice(t,1),""}),fm.post(e,Ee.addDataRole.name,Ee.addDataRole.api,function(e){var t=(new Date).getTime();if(Dc.push({id:t,projId:e.projId,name:e.name,code:"",remark:e.remark,grade:Ae.ORDINARY.code,type:Me.DATA.code,operPrivilege:e.operPrivilege,creator:"xiaoping",createTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),updator:"xiaoping",updateTime:Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")}),e.resourceIdList){var a=JSON.parse(e.resourceIdList),i=0;Object.keys(a).forEach(function(e){a[e].forEach(function(a){i+=1,Tc.push({id:t+i,roleId:t,dataResourceId:Number(e),resourceId:a.resourceId,realId:a.realId,label:a.label,type:a.type,pid:a.pid})})})}return t}),fm.post(e,Ee.listDataRoleResourceRelation.name,Ee.listDataRoleResourceRelation.api,function(e){var t={},a=Tc.filter(function(t){return t.roleId===e.roleId});return a.forEach(function(e){t[e.dataResourceId]||(t[e.dataResourceId]=[]),t[e.dataResourceId].push(e)}),t}),fm.post(e,Ee.grantDataRoleAuth.name,Ee.grantDataRoleAuth.api,function(e){var t=e.roleId;if(Dc.forEach(function(t){t.id===e.roleId&&(t.operPrivilege=e.operPrivilege)}),e.addResourceIdList){var a=JSON.parse(e.addResourceIdList),i=0;Object.keys(a).forEach(function(e){a[e].forEach(function(a){i+=1,Tc.push({id:t+i,roleId:t,dataResourceId:Number(e),resourceId:a.resourceId,realId:a.realId,label:a.label,type:a.type,pid:a.pid})})})}if(e.delRelationIdList){var r=e.delRelationIdList.split(","),n=[];Tc.forEach(function(e,t){r.includes(e.id+"")&&n.push(t)}),n.forEach(function(e,t){Tc.splice(e-t,1)})}return t})}},xc=[{userName:"xiaoyi",userNameCn:"小一",phone:"13800000001",email:"xiaoyi@xxx.com",departmentName:"总裁办-秘书室",position:"秘书",city:"北京",headPic:""},{userName:"xiaoer",userNameCn:"小二",phone:"13800000002",email:"xiaoer@xxx.com",departmentName:"总裁办-秘书室",position:"秘书",city:"北京",headPic:""},{userName:"xiaosan",userNameCn:"小三",phone:"13800000003",email:"xiaosan@xxx.com",departmentName:"总裁办-秘书室",position:"秘书",city:"北京",headPic:""},{userName:"xiaosi",userNameCn:"小四",phone:"13800000004",email:"xiaosi@xxx.com",departmentName:"总裁办-秘书室",position:"秘书",city:"北京",headPic:""},{userName:"xiaowu",userNameCn:"小五",phone:"13800000005",email:"xiaowu@xxx.com",departmentName:"总裁办-秘书室",position:"秘书",city:"北京",headPic:""},{userName:"xiaoliu",userNameCn:"小六",phone:"13800000006",email:"xiaoliu@xxx.com",departmentName:"总裁办-秘书室",position:"秘书",city:"北京",headPic:""},{userName:"xiaoqi",userNameCn:"小七",phone:"13800000007",email:"xiaoqi@xxx.com",departmentName:"总裁办-秘书室",position:"秘书",city:"北京",headPic:""},{userName:"xiaoba",userNameCn:"小八",phone:"13800000008",email:"xiaoba@xxx.com",departmentName:"总裁办-秘书室",position:"秘书",city:"北京",headPic:""},{userName:"xiaojiu",userNameCn:"小九",phone:"13800000009",email:"xiaojiu@xxx.com",departmentName:"总裁办-秘书室",position:"秘书",city:"北京",headPic:""},{userName:"xiaoshi",userNameCn:"小十",phone:"13800000010",email:"xiaoshi@xxx.com",departmentName:"总裁办-秘书室",position:"秘书",city:"北京",headPic:""}],kc=[{id:1,userName:"xiaoyi",cityId:-99,cityName:"全国"},{id:2,userName:"xiaoer",cityId:1,cityName:"北京"},{id:3,userName:"xiaoer",cityId:2,cityName:"上海"},{id:4,userName:"xiaoer",cityId:3,cityName:"广州"}],Lc={bootstrap:function(e){fm.post(e,_e.searchUser.name,_e.searchUser.api,function(e){var t=xc.filter(function(t){return t.userName.includes(e.keyword.toLowerCase())||t.userNameCn.includes(e.keyword)});return t}),fm.post(e,_e.getUserBase.name,_e.getUserBase.api,function(e){e||(e={userName:"xiaoyi"});var t=xc.filter(function(t){return t.userName===e.userName})[0];return t}),fm.post(e,_e.listUserRole.name,_e.listUserRole.api,function(e){e||(e={userName:"xiaoyi"});var t={},a=wc.filter(function(t){return t.userName===e.userName});return a.forEach(function(e){var a=Dc.filter(function(t){return e.roleId===t.id})[0];if(!t[a.projId]){var i=uc.filter(function(e){return e.id===a.projId})[0];t[a.projId]={projId:i.id,projName:i.name,roleList:[]}}t[a.projId].roleList.push({roleUserId:e.id,roleId:a.id,roleName:a.name})}),t=Object.values(t),t}),fm.post(e,_e.listUserCity.name,_e.listUserCity.api,function(e){e||(e={userName:"xiaoyi"});var t=kc.filter(function(t){return t.userName===e.userName});return t}),fm.post(e,_e.grantUserRole.name,_e.grantUserRole.api,function(e){var t=e.delRelationIdList;if(t){var a=t.split(","),i=[];wc.forEach(function(e,t){a.includes(e.id+"")&&i.push(t)}),i.forEach(function(e,t){wc.splice(e-t,1)})}var r=e.userName,n=e.userNameCn,o=e.addRoleIdList;if(o){var s=o.split(","),d=(new Date).getTime();s.forEach(function(e,t){wc.push({id:d+t,roleId:Number(e),userName:r,userNameCn:n})})}return""}),fm.post(e,_e.grantUserCity.name,_e.grantUserCity.api,function(e){var t=e.delRelationIdList;if(t){var a=t.split(","),i=[];kc.forEach(function(e,t){a.includes(e.id+"")&&i.push(t)}),i.forEach(function(e,t){kc.splice(e-t,1)})}var r=e.userName,n=JSON.parse(e.addCityList);return n.forEach(function(e,t){var a=(new Date).getTime();kc.push({id:a+t,cityId:Number(e.cityId),cityName:e.cityName,userName:r})}),""})}},Rc=[{areaCode:11e4,cityList:[{areaCode:110100,id:1,name:"北京",pid:25760}],id:25760,name:"北京",pid:25794},{areaCode:12e4,cityList:[{areaCode:120100,id:18,name:"天津",pid:25762}],id:25762,name:"天津",pid:25794},{areaCode:31e4,cityList:[{areaCode:310100,id:2,name:"上海",pid:25793}],id:25793,name:"上海",pid:25794},{areaCode:71e4,cityList:[{areaCode:71e4,id:2051,name:"台湾",pid:25761},{areaCode:71e4,id:20652,name:"台北",pid:25761},{areaCode:71e4,id:20654,name:"台中",pid:25761},{areaCode:71e4,id:20655,name:"台南",pid:25761},{areaCode:71e4,id:20656,name:"高雄",pid:25761},{areaCode:71e4,id:20657,name:"基隆",pid:25761},{areaCode:71e4,id:20658,name:"新竹",pid:25761},{areaCode:71e4,id:20659,name:"嘉义",pid:25761}],id:25761,name:"台湾",pid:25794},{areaCode:14e4,cityList:[{areaCode:140100,id:740,name:"太原",pid:25763},{areaCode:141100,id:3222,name:"吕梁",pid:25763},{areaCode:140500,id:3350,name:"晋城",pid:25763},{areaCode:140900,id:3453,name:"忻州",pid:25763},{areaCode:140800,id:5653,name:"运城",pid:25763},{areaCode:141e3,id:5669,name:"临汾",pid:25763},{areaCode:140400,id:6921,name:"长治",pid:25763},{areaCode:140200,id:6964,name:"大同",pid:25763},{areaCode:140300,id:8738,name:"阳泉",pid:25763},{areaCode:140700,id:8832,name:"晋中",pid:25763},{areaCode:140600,id:9869,name:"朔州",pid:25763}],id:25763,name:"山西",pid:25794},{areaCode:82e4,cityList:[{areaCode:82e4,id:9384,name:"澳门",pid:25764}],id:25764,name:"澳门",pid:25794},{areaCode:62e4,cityList:[{areaCode:620100,id:952,name:"兰州",pid:25765},{areaCode:622900,id:7112,name:"临夏",pid:25765},{areaCode:620800,id:7154,name:"平凉",pid:25765},{areaCode:620300,id:7428,name:"金昌",pid:25765},{areaCode:620500,id:8467,name:"天水",pid:25765},{areaCode:620400,id:10307,name:"白银",pid:25765},{areaCode:621100,id:10320,name:"定西",pid:25765},{areaCode:623e3,id:10337,name:"甘南",pid:25765},{areaCode:620200,id:10356,name:"嘉峪关",pid:25765},{areaCode:620900,id:10381,name:"酒泉",pid:25765},{areaCode:621200,id:10409,name:"陇南",pid:25765},{areaCode:620600,id:10443,name:"武威",pid:25765},{areaCode:620700,id:10449,name:"张掖",pid:25765},{areaCode:621e3,id:10470,name:"庆阳",pid:25765}],id:25765,name:"甘肃",pid:25794},{areaCode:52e4,cityList:[{areaCode:520100,id:2015,name:"贵阳",pid:25766},{areaCode:520400,id:7458,name:"安顺",pid:25766},{areaCode:520300,id:7624,name:"遵义",pid:25766},{areaCode:522600,id:9348,name:"黔东南",pid:25766},{areaCode:520600,id:10419,name:"铜仁",pid:25766},{areaCode:522300,id:10430,name:"黔西南",pid:25766},{areaCode:522700,id:10441,name:"黔南",pid:25766},{areaCode:520200,id:10500,name:"六盘水",pid:25766},{areaCode:520500,id:10553,name:"毕节",pid:25766}],id:25766,name:"贵州",pid:25794},{areaCode:5e5,cityList:[{areaCode:500100,id:37,name:"重庆",pid:25767}],id:25767,name:"重庆",pid:25794},{areaCode:61e4,cityList:[{areaCode:610100,id:483,name:"西安",pid:25768},{areaCode:610300,id:2044,name:"宝鸡",pid:25768},{areaCode:610900,id:3157,name:"安康",pid:25768},{areaCode:610700,id:3163,name:"汉中",pid:25768},{areaCode:610500,id:5733,name:"渭南",pid:25768},{areaCode:610800,id:5942,name:"榆林",pid:25768},{areaCode:610400,id:7453,name:"咸阳",pid:25768},{areaCode:610600,id:8951,name:"延安",pid:25768},{areaCode:610200,id:9829,name:"铜川",pid:25768},{areaCode:611e3,id:9851,name:"商洛",pid:25768}],id:25768,name:"陕西",pid:25794},{areaCode:81e4,cityList:[{areaCode:81e4,id:2050,name:"香港",pid:25769}],id:25769,name:"香港",pid:25794},{areaCode:23e4,cityList:[{areaCode:230100,id:202,name:"哈尔滨",pid:25770},{areaCode:230600,id:375,name:"大庆",pid:25770},{areaCode:231e3,id:3489,name:"牡丹江",pid:25770},{areaCode:230200,id:5853,name:"齐齐哈尔",pid:25770},{areaCode:231200,id:6718,name:"绥化",pid:25770},{areaCode:230800,id:6776,name:"佳木斯",pid:25770},{areaCode:230300,id:7289,name:"鸡西",pid:25770},{areaCode:230400,id:9039,name:"鹤岗",pid:25770},{areaCode:230700,id:9765,name:"伊春",pid:25770},{areaCode:230500,id:9836,name:"双鸭山",pid:25770},{areaCode:230900,id:9846,name:"七台河",pid:25770},{areaCode:231100,id:9858,name:"黑河",pid:25770},{areaCode:232700,id:9875,name:"大兴安岭",pid:25770}],id:25770,name:"黑龙江",pid:25794},{areaCode:44e4,cityList:[{areaCode:440100,id:3,name:"广州",pid:25771},{areaCode:440300,id:4,name:"深圳",pid:25771},{areaCode:440600,id:222,name:"佛山",pid:25771},{areaCode:441900,id:413,name:"东莞",pid:25771},{areaCode:440700,id:629,name:"江门",pid:25771},{areaCode:440900,id:679,name:"茂名",pid:25771},{areaCode:441300,id:722,name:"惠州",pid:25771},{areaCode:442e3,id:771,name:"中山",pid:25771},{areaCode:440500,id:783,name:"汕头",pid:25771},{areaCode:440800,id:791,name:"湛江",pid:25771},{areaCode:441200,id:901,name:"肇庆",pid:25771},{areaCode:440400,id:910,name:"珠海",pid:25771},{areaCode:445200,id:927,name:"揭阳",pid:25771},{areaCode:440200,id:2192,name:"韶关",pid:25771},{areaCode:441700,id:2284,name:"阳江",pid:25771},{areaCode:441800,id:7303,name:"清远",pid:25771},{areaCode:441400,id:9374,name:"梅州",pid:25771},{areaCode:441500,id:9441,name:"汕尾",pid:25771},{areaCode:445100,id:10456,name:"潮州",pid:25771},{areaCode:441600,id:10462,name:"河源",pid:25771},{areaCode:445300,id:10480,name:"云浮",pid:25771}],id:25771,name:"广东",pid:25794},{areaCode:33e4,cityList:[{areaCode:330100,id:79,name:"杭州",pid:25772},{areaCode:330200,id:135,name:"宁波",pid:25772},{areaCode:330300,id:330,name:"温州",pid:25772},{areaCode:330600,id:355,name:"绍兴",pid:25772},{areaCode:331e3,id:403,name:"台州",pid:25772},{areaCode:330400,id:497,name:"嘉兴",pid:25772},{areaCode:330700,id:531,name:"金华",pid:25772},{areaCode:330500,id:831,name:"湖州",pid:25772},{areaCode:330800,id:6793,name:"衢州",pid:25772},{areaCode:331100,id:7923,name:"丽水",pid:25772},{areaCode:330900,id:8470,name:"舟山",pid:25772}],id:25772,name:"浙江",pid:25794},{areaCode:42e4,cityList:[{areaCode:420100,id:158,name:"武汉",pid:25773},{areaCode:420500,id:858,name:"宜昌",pid:25773},{areaCode:420600,id:891,name:"襄阳",pid:25773},{areaCode:420200,id:1734,name:"黄石",pid:25773},{areaCode:420300,id:2032,name:"十堰",pid:25773},{areaCode:420800,id:2296,name:"荆门",pid:25773},{areaCode:421100,id:2299,name:"黄冈",pid:25773},{areaCode:422800,id:2302,name:"恩施",pid:25773},{areaCode:420900,id:3434,name:"孝感",pid:25773},{areaCode:421e3,id:3479,name:"荆州",pid:25773},{areaCode:429006,id:9475,name:"天门",pid:25773},{areaCode:429021,id:9597,name:"神农架",pid:25773},{areaCode:421200,id:9616,name:"咸宁",pid:25773},{areaCode:421300,id:9630,name:"随州",pid:25773},{areaCode:429005,id:9655,name:"潜江",pid:25773},{areaCode:420700,id:9702,name:"鄂州",pid:25773},{areaCode:429004,id:9723,name:"仙桃",pid:25773}],id:25773,name:"湖北",pid:25794},{areaCode:43e4,cityList:[{areaCode:430100,id:414,name:"长沙",pid:25774},{areaCode:430600,id:821,name:"岳阳",pid:25774},{areaCode:430700,id:872,name:"常德",pid:25774},{areaCode:430400,id:914,name:"衡阳",pid:25774},{areaCode:430200,id:1086,name:"株洲",pid:25774},{areaCode:430300,id:2047,name:"湘潭",pid:25774},{areaCode:430500,id:2303,name:"邵阳",pid:25774},{areaCode:431100,id:2307,name:"永州",pid:25774},{areaCode:431e3,id:5695,name:"郴州",pid:25774},{areaCode:431200,id:5756,name:"怀化",pid:25774},{areaCode:430800,id:6788,name:"张家界",pid:25774},{areaCode:431300,id:9455,name:"娄底",pid:25774},{areaCode:430900,id:10193,name:"益阳",pid:25774},{areaCode:433100,id:10214,name:"湘西",pid:25774}],id:25774,name:"湖南",pid:25794},{areaCode:22e4,cityList:[{areaCode:220100,id:319,name:"长春",pid:25775},{areaCode:220200,id:700,name:"吉林",pid:25775},{areaCode:220700,id:2315,name:"松原",pid:25775},{areaCode:220400,id:2501,name:"辽源",pid:25775},{areaCode:222400,id:3184,name:"延边",pid:25775},{areaCode:220800,id:5918,name:"白城",pid:25775},{areaCode:220500,id:10157,name:"通化",pid:25775},{areaCode:220300,id:10167,name:"四平",pid:25775},{areaCode:220600,id:10177,name:"白山",pid:25775}],id:25775,name:"吉林",pid:25794},{areaCode:37e4,cityList:[{areaCode:370200,id:122,name:"青岛",pid:25776},{areaCode:370600,id:228,name:"烟台",pid:25776},{areaCode:370100,id:265,name:"济南",pid:25776},{areaCode:370700,id:362,name:"潍坊",pid:25776},{areaCode:370300,id:385,name:"淄博",pid:25776},{areaCode:370800,id:450,name:"济宁",pid:25776},{areaCode:371300,id:505,name:"临沂",pid:25776},{areaCode:371e3,id:518,name:"威海",pid:25776},{areaCode:370500,id:623,name:"东营",pid:25776},{areaCode:370900,id:686,name:"泰安",pid:25776},{areaCode:371400,id:728,name:"德州",pid:25776},{areaCode:371500,id:882,name:"聊城",pid:25776},{areaCode:371600,id:944,name:"滨州",pid:25776},{areaCode:370400,id:961,name:"枣庄",pid:25776},{areaCode:371200,id:2292,name:"莱芜",pid:25776},{areaCode:371100,id:3177,name:"日照",pid:25776},{areaCode:371700,id:5632,name:"菏泽",pid:25776}],id:25776,name:"山东",pid:25794},{areaCode:34e4,cityList:[{areaCode:340100,id:837,name:"合肥",pid:25777},{areaCode:340500,id:2039,name:"马鞍山",pid:25777},{areaCode:340200,id:2045,name:"芜湖",pid:25777},{areaCode:340400,id:2319,name:"淮南",pid:25777},{areaCode:341e3,id:2323,name:"黄山",pid:25777},{areaCode:341200,id:2325,name:"阜阳",pid:25777},{areaCode:341500,id:2328,name:"六安",pid:25777},{areaCode:341600,id:2329,name:"亳州",pid:25777},{areaCode:340800,id:3251,name:"安庆",pid:25777},{areaCode:341300,id:3359,name:"宿州",pid:25777},{areaCode:340300,id:3470,name:"蚌埠",pid:25777},{areaCode:341800,id:5633,name:"宣城",pid:25777},{areaCode:340600,id:9342,name:"淮北",pid:25777},{areaCode:341700,id:10254,name:"池州",pid:25777},{areaCode:341100,id:10260,name:"滁州",pid:25777},{areaCode:340700,id:10279,name:"铜陵",pid:25777}],id:25777,name:"安徽",pid:25794},{areaCode:45e4,cityList:[{areaCode:450100,id:845,name:"南宁",pid:25778},{areaCode:450300,id:1039,name:"桂林",pid:25778},{areaCode:450400,id:2046,name:"梧州",pid:25778},{areaCode:450700,id:2335,name:"钦州",pid:25778},{areaCode:450900,id:2337,name:"玉林",pid:25778},{areaCode:451200,id:2340,name:"河池",pid:25778},{areaCode:450800,id:6770,name:"贵港",pid:25778},{areaCode:450200,id:7133,name:"柳州",pid:25778},{areaCode:451e3,id:10506,name:"百色",pid:25778},{areaCode:450500,id:10510,name:"北海",pid:25778},{areaCode:451400,id:10514,name:"崇左",pid:25778},{areaCode:450600,id:10530,name:"防城港",pid:25778},{areaCode:451100,id:10541,name:"贺州",pid:25778},{areaCode:451300,id:10549,name:"来宾",pid:25778}],id:25778,name:"广西",pid:25794},{areaCode:41e4,cityList:[{areaCode:410100,id:342,name:"郑州",pid:25779},{areaCode:410300,id:556,name:"洛阳",pid:25779},{areaCode:411300,id:592,name:"南阳",pid:25779},{areaCode:411600,id:933,name:"周口",pid:25779},{areaCode:411e3,id:977,name:"许昌",pid:25779},{areaCode:410400,id:1005,name:"平顶山",pid:25779},{areaCode:410700,id:1016,name:"新乡",pid:25779},{areaCode:411400,id:1029,name:"商丘",pid:25779},{areaCode:411700,id:1067,name:"驻马店",pid:25779},{areaCode:410500,id:1096,name:"安阳",pid:25779},{areaCode:410200,id:2342,name:"开封",pid:25779},{areaCode:410600,id:2344,name:"鹤壁",pid:25779},{areaCode:410900,id:2346,name:"濮阳",pid:25779},{areaCode:411100,id:2347,name:"漯河",pid:25779},{areaCode:410800,id:3266,name:"焦作",pid:25779},{areaCode:411501,id:8531,name:"明港",pid:25779},{areaCode:411500,id:8672,name:"信阳",pid:25779},{areaCode:411200,id:9303,name:"三门峡",pid:25779},{areaCode:419001,id:9894,name:"济源",pid:25779}],id:25779,name:"河南",pid:25794},{areaCode:21e4,cityList:[{areaCode:210200,id:147,name:"大连",pid:25780},{areaCode:210100,id:188,name:"沈阳",pid:25780},{areaCode:210300,id:523,name:"鞍山",pid:25780},{areaCode:211e3,id:2038,name:"辽阳",pid:25780},{areaCode:211100,id:2041,name:"盘锦",pid:25780},{areaCode:210700,id:2354,name:"锦州",pid:25780},{areaCode:210600,id:3445,name:"丹东",pid:25780},{areaCode:210400,id:5722,name:"抚顺",pid:25780},{areaCode:210500,id:5845,name:"本溪",pid:25780},{areaCode:210800,id:5898,name:"营口",pid:25780},{areaCode:211200,id:6729,name:"铁岭",pid:25780},{areaCode:211400,id:10083,name:"葫芦岛",pid:25780},{areaCode:210900,id:10093,name:"阜新",pid:25780},{areaCode:211300,id:10102,name:"朝阳",pid:25780}],id:25780,name:"辽宁",pid:25794},{areaCode:36e4,cityList:[{areaCode:360100,id:669,name:"南昌",pid:25781},{areaCode:360400,id:2247,name:"九江",pid:25781},{areaCode:360300,id:2248,name:"萍乡",pid:25781},{areaCode:360200,id:2360,name:"景德镇",pid:25781},{areaCode:360700,id:2363,name:"赣州",pid:25781},{areaCode:360800,id:2364,name:"吉安",pid:25781},{areaCode:360600,id:3209,name:"鹰潭",pid:25781},{areaCode:360900,id:5709,name:"宜春",pid:25781},{areaCode:360500,id:10111,name:"新余",pid:25781},{areaCode:361100,id:10116,name:"上饶",pid:25781},{areaCode:361e3,id:10138,name:"抚州",pid:25781}],id:25781,name:"江西",pid:25794},{areaCode:32e4,cityList:[{areaCode:320500,id:5,name:"苏州",pid:25782},{areaCode:320200,id:93,name:"无锡",pid:25782},{areaCode:320100,id:172,name:"南京",pid:25782},{areaCode:320600,id:394,name:"南通",pid:25782},{areaCode:320400,id:463,name:"常州",pid:25782},{areaCode:320300,id:471,name:"徐州",pid:25782},{areaCode:320900,id:613,name:"盐城",pid:25782},{areaCode:321e3,id:637,name:"扬州",pid:25782},{areaCode:321100,id:645,name:"镇江",pid:25782},{areaCode:321200,id:693,name:"泰州",pid:25782},{areaCode:320800,id:968,name:"淮安",pid:25782},{areaCode:320700,id:2049,name:"连云港",pid:25782},{areaCode:321300,id:2350,name:"宿迁",pid:25782}],id:25782,name:"江苏",pid:25794},{areaCode:13e4,cityList:[{areaCode:130100,id:241,name:"石家庄",pid:25783},{areaCode:130200,id:276,name:"唐山",pid:25783},{areaCode:130600,id:424,name:"保定",pid:25783},{areaCode:130400,id:572,name:"邯郸",pid:25783},{areaCode:130900,id:652,name:"沧州",pid:25783},{areaCode:130500,id:751,name:"邢台",pid:25783},{areaCode:131e3,id:772,name:"廊坊",pid:25783},{areaCode:131100,id:993,name:"衡水",pid:25783},{areaCode:130300,id:1078,name:"秦皇岛",pid:25783},{areaCode:130700,id:3328,name:"张家口",pid:25783},{areaCode:130800,id:6760,name:"承德",pid:25783}],id:25783,name:"河北",pid:25794},{areaCode:51e4,cityList:[{areaCode:510100,id:102,name:"成都",pid:25784},{areaCode:510700,id:1057,name:"绵阳",pid:25784},{areaCode:510400,id:2371,name:"攀枝花",pid:25784},{areaCode:510500,id:2372,name:"泸州",pid:25784},{areaCode:510600,id:2373,name:"德阳",pid:25784},{areaCode:511300,id:2378,name:"南充",pid:25784},{areaCode:511500,id:2380,name:"宜宾",pid:25784},{areaCode:511600,id:2381,name:"广安",pid:25784},{areaCode:511100,id:3237,name:"乐山",pid:25784},{areaCode:511e3,id:5928,name:"内江",pid:25784},{areaCode:510300,id:6745,name:"自贡",pid:25784},{areaCode:512e3,id:6803,name:"资阳",pid:25784},{areaCode:511800,id:9676,name:"雅安",pid:25784},{areaCode:510900,id:9695,name:"遂宁",pid:25784},{areaCode:511400,id:9704,name:"眉山",pid:25784},{areaCode:513400,id:9715,name:"凉山",pid:25784},{areaCode:510800,id:9751,name:"广元",pid:25784},{areaCode:513300,id:9760,name:"甘孜",pid:25784},{areaCode:511700,id:9799,name:"达州",pid:25784},{areaCode:511900,id:9808,name:"巴中",pid:25784},{areaCode:513200,id:9814,name:"阿坝",pid:25784}],id:25784,name:"四川",pid:25794},{areaCode:53e4,cityList:[{areaCode:530100,id:541,name:"昆明",pid:25785},{areaCode:530400,id:2040,name:"玉溪",pid:25785},{areaCode:530300,id:2389,name:"曲靖",pid:25785},{areaCode:530500,id:2390,name:"保山",pid:25785},{areaCode:530700,id:2392,name:"丽江",pid:25785},{areaCode:532300,id:2393,name:"楚雄",pid:25785},{areaCode:532500,id:2394,name:"红河",pid:25785},{areaCode:532600,id:2395,name:"文山",pid:25785},{areaCode:532800,id:2397,name:"西双版纳",pid:25785},{areaCode:532900,id:2398,name:"大理",pid:25785},{areaCode:530600,id:9394,name:"昭通",pid:25785},{areaCode:530900,id:9407,name:"临沧",pid:25785},{areaCode:533400,id:9417,name:"迪庆",pid:25785},{areaCode:533100,id:9422,name:"德宏",pid:25785},{areaCode:530800,id:9429,name:"普洱",pid:25785},{areaCode:533300,id:9452,name:"怒江",pid:25785}],id:25785,name:"云南",pid:25794},{areaCode:15e4,cityList:[{areaCode:150200,id:801,name:"包头",pid:25786},{areaCode:150100,id:811,name:"呼和浩特",pid:25786},{areaCode:150600,id:2037,name:"鄂尔多斯",pid:25786},{areaCode:150300,id:2404,name:"乌海",pid:25786},{areaCode:152500,id:2408,name:"锡林郭勒",pid:25786},{areaCode:150400,id:6700,name:"赤峰",pid:25786},{areaCode:152200,id:9983,name:"兴安盟",pid:25786},{areaCode:150900,id:9998,name:"乌兰察布",pid:25786},{areaCode:150500,id:10012,name:"通辽",pid:25786},{areaCode:150700,id:10035,name:"呼伦贝尔",pid:25786},{areaCode:150800,id:10063,name:"巴彦淖尔",pid:25786},{areaCode:152900,id:10078,name:"阿拉善盟",pid:25786}],id:25786,name:"内蒙古",pid:25794},{areaCode:64e4,cityList:[{areaCode:640100,id:2054,name:"银川",pid:25787},{areaCode:640400,id:2421,name:"固原",pid:25787},{areaCode:640500,id:9949,name:"中卫",pid:25787},{areaCode:640300,id:9959,name:"吴忠",pid:25787},{areaCode:640200,id:9967,name:"石嘴山",pid:25787}],id:25787,name:"宁夏",pid:25794},{areaCode:35e4,cityList:[{areaCode:350500,id:291,name:"泉州",pid:25788},{areaCode:350100,id:304,name:"福州",pid:25788},{areaCode:350200,id:606,name:"厦门",pid:25788},{areaCode:350600,id:710,name:"漳州",pid:25788},{areaCode:350400,id:2048,name:"三明",pid:25788},{areaCode:350300,id:2429,name:"莆田",pid:25788},{areaCode:350800,id:6752,name:"龙岩",pid:25788},{areaCode:350900,id:7969,name:"宁德",pid:25788},{areaCode:350700,id:10285,name:"南平",pid:25788}],id:25788,name:"福建",pid:25794},{areaCode:46e4,cityList:[{areaCode:460100,id:2053,name:"海口",pid:25789},{areaCode:460200,id:2422,name:"三亚",pid:25789},{areaCode:469001,id:9948,name:"五指山",pid:25789},{areaCode:469005,id:9968,name:"文昌",pid:25789},{areaCode:469006,id:10011,name:"万宁",pid:25789},{areaCode:469022,id:10049,name:"屯昌",pid:25789},{areaCode:469030,id:10060,name:"琼中",pid:25789},{areaCode:469002,id:10130,name:"琼海",pid:25789},{areaCode:469028,id:10166,name:"陵水",pid:25789},{areaCode:469024,id:10196,name:"临高",pid:25789},{areaCode:469027,id:10231,name:"乐东",pid:25789},{areaCode:469007,id:10244,name:"东方",pid:25789},{areaCode:469021,id:10297,name:"定安",pid:25789},{areaCode:469023,id:10316,name:"澄迈",pid:25789},{areaCode:469026,id:10347,name:"昌江",pid:25789},{areaCode:469029,id:10367,name:"保亭",pid:25789},{areaCode:469025,id:10375,name:"白沙",pid:25789},{areaCode:460400,id:10390,name:"儋州",pid:25789},{areaCode:460300,id:13663,name:"三沙",pid:25789}],id:25789,name:"海南",pid:25794},{areaCode:63e4,cityList:[{areaCode:630100,id:2052,name:"西宁",pid:25790},{areaCode:632700,id:9886,name:"玉树",pid:25790},{areaCode:632300,id:9896,name:"黄南",pid:25790},{areaCode:632800,id:9905,name:"海西",pid:25790},{areaCode:630200,id:9921,name:"海东",pid:25790},{areaCode:632200,id:9934,name:"海北",pid:25790},{areaCode:632600,id:9940,name:"果洛",pid:25790},{areaCode:632500,id:10567,name:"海南",pid:25790}],id:25790,name:"青海",pid:25794},{areaCode:54e4,cityList:[{areaCode:540100,id:2055,name:"拉萨",pid:25791},{areaCode:540500,id:9578,name:"山南",pid:25791},{areaCode:540200,id:9587,name:"日喀则",pid:25791},{areaCode:542400,id:9625,name:"那曲",pid:25791},{areaCode:540400,id:9635,name:"林芝",pid:25791},{areaCode:540300,id:9636,name:"昌都",pid:25791},{areaCode:542500,id:9686,name:"阿里",pid:25791}],id:25791,name:"西藏",pid:25794},{areaCode:65e4,cityList:[{areaCode:650100,id:984,name:"乌鲁木齐",pid:25792},{areaCode:650200,id:2042,name:"克拉玛依",pid:25792},{areaCode:650500,id:7452,name:"哈密",pid:25792},{areaCode:652300,id:8572,name:"昌吉",pid:25792},{areaCode:653100,id:9311,name:"喀什",pid:25792},{areaCode:650400,id:9464,name:"吐鲁番",pid:25792},{areaCode:654e3,id:9465,name:"伊犁",pid:25792},{areaCode:653201,id:9486,name:"和田",pid:25792},{areaCode:652900,id:9510,name:"阿克苏",pid:25792},{areaCode:653e3,id:9527,name:"克孜勒苏",pid:25792},{areaCode:652800,id:9533,name:"巴音郭楞",pid:25792},{areaCode:652700,id:9539,name:"博尔塔拉",pid:25792},{areaCode:659002,id:9545,name:"阿拉尔",pid:25792},{areaCode:659001,id:9556,name:"石河子",pid:25792},{areaCode:659003,id:9563,name:"图木舒克",pid:25792},{areaCode:659004,id:9564,name:"五家渠",pid:25792},{areaCode:654300,id:18804,name:"阿勒泰",pid:25792},{areaCode:654200,id:18812,name:"塔城",pid:25792}],id:25792,name:"新疆",pid:25794}],jc={bootstrap:function(e){fm.post(e,ut.listProvinceCity.name,ut.listProvinceCity.api,function(e){return Rc})}},Fc={bootstrap:function(e){pc.bootstrap(e),vc.bootstrap(e),_c.bootstrap(e),Lc.bootstrap(e),jc.bootstrap(e)}},Sc=[{title:"角色",intro:"角色相关",url:E.auth.fe+"#/auth/role",score:1},{title:"用户",intro:"用户相关",url:E.auth.fe+"#/auth/user",score:1},{title:"资源",intro:"资源相关",url:E.auth.fe+"#/auth/resource",score:1},{title:"个人中心",intro:"个人中心相关",url:E.auth.fe+"#/auth/console",score:1},{title:"站内消息",intro:"站内消息相关",url:E.message.fe+"#/message/onsite",score:1},{title:"妈妈叫你回家吃饭",intro:"妈妈叫你回家吃饭相关",url:E.message.fe+"#/message/onsite?id=2",score:1}],Ec={bootstrap:function(e){fm.post(e,St.search.name,St.search.api,function(e){var t={total:0,result:[]};return e.keyword&&(t.total=1300,t.result=Sc.map(function(t){var a=JSON.parse(JSON.stringify(t));return a.title=a.title+"<strong>"+e.keyword+"</strong>",a.intro="<strong>"+e.keyword+"</strong>"+a.intro,a.updateTime=Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),a})),t})}},Ac=[{id:1,title:"导出excel",content:"导出excel导出excel导出excel导出excel导出excel导出excel导出excel导出excel",isRead:0,createTime:"2019-05-18 12:01:22"},{id:2,title:"妈妈叫你回家吃饭",content:"妈妈叫你回家吃饭妈妈叫你回家吃饭妈妈叫你回家吃饭妈妈叫你回家吃饭妈妈叫你回家吃饭妈妈叫你回家吃饭",isRead:0,createTime:"2019-05-17 12:01:22"},{id:3,title:"回家啦",content:"回家啦回家啦回家啦回家啦回家啦回家啦回家啦",isRead:0,createTime:"2019-05-16 12:01:22"},{id:4,title:"任务完成了",content:"片子下好任务完成了任务完成了任务完成了任务完成了任务完成了任务完成了了",isRead:0,createTime:"2019-05-15 12:01:22"},{id:5,title:"出来玩了,兴奋不兴奋",content:"出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋",isRead:0,createTime:"2019-05-14 12:01:22"},{id:6,title:"出来玩了,兴奋不兴奋",content:"出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋",isRead:1,createTime:"2019-05-14 12:01:22"},{id:7,title:"出来玩了,兴奋不兴奋",content:"出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋",isRead:1,createTime:"2019-05-14 12:01:22"},{id:8,title:"出来玩了,兴奋不兴奋",content:"出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋",isRead:1,createTime:"2019-05-14 12:01:22"},{id:9,title:"出来玩了,兴奋不兴奋",content:"出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋",isRead:1,createTime:"2019-05-14 12:01:22"},{id:10,title:"出来玩了,兴奋不兴奋",content:"出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋出来玩了,兴奋不兴奋",isRead:0,createTime:"2019-05-14 12:01:22"}],Mc={bootstrap:function(e){fm.post(e,Jt.listMsg.name,Jt.listMsg.api,function(e){var t=[],a=0;-1===e.isRead?(t=Ac,a=130):0===e.isRead?(t=Ac.filter(function(e){return 0===e.isRead}),a=85):(t=Ac.filter(function(e){return 1===e.isRead}),a=45);for(var i=e.pageSize/10,r=[],n=0;n<i;n++)r=r.concat(t);r=r.reverse();var o={total:a,data:r};return o}),fm.post(e,Jt.getMsg.name,Jt.getMsg.api,function(e){var t={};return Ac.forEach(function(a){Number(e.id)===a.id&&(a.isRead=1,t=a)}),t}),fm.post(e,Jt.getUnReadCount.name,Jt.getUnReadCount.api,function(e){var t=Ac.filter(function(e){return 0===e.isRead});return t.length}),fm.post(e,Jt.markReadedAll.name,Jt.markReadedAll.api,function(e){return Ac.forEach(function(e){0===e.isRead&&(e.isRead=1)}),""}),fm.post(e,Jt.markReadedByIds.name,Jt.markReadedByIds.api,function(e){var t=e.idList.split(",");return Ac.forEach(function(e){t.includes(e.id+"")&&0===e.isRead&&(e.isRead=1)}),""}),fm.post(e,Jt.deleteAll.name,Jt.deleteAll.api,function(e){return Ac=[],""}),fm.post(e,Jt.deleteByIds.name,Jt.deleteByIds.api,function(e){var t=e.idList.split(","),a=[];return Ac.forEach(function(e,i){t.includes(e.id+"")&&a.push(i)}),a.forEach(function(e,t){Ac.splice(e-t,1)}),""})}},Oc={bootstrap:function(e){Mc.bootstrap(e)}},zc=[{id:1,tbId:1,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:2,tbId:2,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:3,tbId:3,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:4,tbId:4,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:5,tbId:5,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:6,tbId:6,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:7,tbId:7,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:8,tbId:8,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:9,tbId:9,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:10,tbId:10,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:11,tbId:11,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:12,tbId:12,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:13,tbId:13,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:14,tbId:14,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:15,tbId:15,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:16,tbId:16,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:17,tbId:17,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:18,tbId:18,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:19,tbId:19,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:20,tbId:20,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:21,tbId:21,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:73,tbId:22,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:74,tbId:22,colName:"col_2",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:23,tbId:23,colName:"col_1",colComment:"字段描述信息",colLabel:"订单ID",originalDataType:"VARCHAR",dataType:qi.text.code},{id:24,tbId:1,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:25,tbId:2,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:26,tbId:3,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:27,tbId:4,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:28,tbId:5,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:29,tbId:6,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:30,tbId:7,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:31,tbId:8,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:32,tbId:9,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:33,tbId:10,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:34,tbId:11,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:35,tbId:12,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:36,tbId:13,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:37,tbId:14,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:38,tbId:15,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:39,tbId:16,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:40,tbId:17,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:41,tbId:18,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:42,tbId:19,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:43,tbId:20,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:44,tbId:21,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:45,tbId:23,colName:"col_2",colComment:"字段描述信息",colLabel:"订单金额",originalDataType:"BIGINT",dataType:qi.num.code},{id:46,tbId:1,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:47,tbId:2,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:48,tbId:3,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:49,tbId:4,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:50,tbId:5,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:51,tbId:6,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:52,tbId:7,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:53,tbId:8,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:54,tbId:9,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:55,tbId:10,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:56,tbId:11,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:57,tbId:12,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:58,tbId:13,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:59,tbId:14,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:60,tbId:15,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:61,tbId:16,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:62,tbId:17,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:63,tbId:18,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:64,tbId:19,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:65,tbId:20,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:66,tbId:21,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:67,tbId:23,colName:"col_3",colComment:"字段描述信息",colLabel:"创建时间",originalDataType:"DATETIME",dataType:qi.date.code},{id:68,tbId:23,colName:"col_4",colComment:"字段描述信息",colLabel:"统计日期",originalDataType:"VARCHAR",dataType:qi.text_day_8.code},{id:69,tbId:23,colName:"col_5",colComment:"字段描述信息",colLabel:"创建日期",originalDataType:"VARCHAR",dataType:qi.text_day_10.code},{id:70,tbId:23,colName:"col_6",colComment:"字段描述信息",colLabel:"创建月份",originalDataType:"VARCHAR",dataType:qi.text_month_7.code},{id:71,tbId:23,colName:"col_7",colComment:"字段描述信息",colLabel:"统计月份",originalDataType:"VARCHAR",dataType:qi.text_month_6.code},{id:72,tbId:23,colName:"col_8",colComment:"字段描述信息",colLabel:"年",originalDataType:"VARCHAR",dataType:qi.text_year.code}],$c=[{id:1,tbName:"tb_1",tbNameCn:"订单表1",dbId:1,isLogical:0,remark:"大家撒离开的风景线"},{id:2,tbName:"tb_2",tbNameCn:"用户表1",dbId:1,isLogical:0,remark:"大家撒离开的风景线"},{id:3,tbName:"tb_3",tbNameCn:"订单表2",dbId:1,isLogical:0,remark:"大家撒离开的风景线"},{id:4,tbName:"tb_4",tbNameCn:"用户表2",dbId:1,isLogical:0,remark:"大家撒离开的风景线"},{id:5,tbName:"tb_5",tbNameCn:"订单表3",dbId:2,isLogical:0,remark:"大家撒离开的风景线"},{id:6,tbName:"tb_6",tbNameCn:"用户表3",dbId:2,isLogical:0,remark:"大家撒离开的风景线"},{id:7,tbName:"tb_7",tbNameCn:"订单表4",dbId:2,isLogical:0,remark:"大家撒离开的风景线"},{id:8,tbName:"tb_8",tbNameCn:"用户表4",dbId:2,isLogical:0,remark:"大家撒离开的风景线"},{id:9,tbName:"tb_9",tbNameCn:"订单表5",dbId:3,isLogical:0,remark:"大家撒离开的风景线"},{id:10,tbName:"tb_10",tbNameCn:"用户表5",dbId:3,isLogical:0,remark:"大家撒离开的风景线"},{id:11,tbName:"tb_11",tbNameCn:"订单表6",dbId:3,isLogical:0,remark:"大家撒离开的风景线"},{id:12,tbName:"tb_12",tbNameCn:"用户表6",dbId:4,isLogical:0,remark:"大家撒离开的风景线"},{id:13,tbName:"tb_13",tbNameCn:"订单表7",dbId:4,isLogical:0,remark:"大家撒离开的风景线"},{id:14,tbName:"tb_14",tbNameCn:"用户表7",dbId:5,isLogical:0,remark:"大家撒离开的风景线"},{id:15,tbName:"tb_15",tbNameCn:"订单表8",dbId:6,isLogical:0,remark:"大家撒离开的风景线"},{id:16,tbName:"tb_16",tbNameCn:"用户表8",dbId:7,isLogical:0,remark:"大家撒离开的风景线"},{id:17,tbName:"tb_17",tbNameCn:"订单表9",dbId:7,isLogical:0,remark:"大家撒离开的风景线"},{id:18,tbName:"tb_18",tbNameCn:"用户表9",dbId:8,isLogical:0,remark:"大家撒离开的风景线"},{id:19,tbName:"tb_19",tbNameCn:"订单表10",dbId:9,isLogical:0,remark:"大家撒离开的风景线"},{id:20,tbName:"tb_20",tbNameCn:"用户表10",dbId:10,isLogical:0,remark:"大家撒离开的风景线"},{id:21,tbName:"tb_21",tbNameCn:"订单表11",dbId:11,isLogical:0,remark:"大家撒离开的风景线"},{id:22,tbName:"tb_22",tbNameCn:"用户表11",dbId:12,isLogical:0,remark:"大家撒离开的风景线"},{id:23,tbName:"tb_23",tbNameCn:"订单表13",dbId:12,isLogical:0,remark:"大家撒离开的风景线"}],Vc=[{id:1,name:"订单",tbId:1},{id:2,name:"用户",tbId:1},{id:3,name:"订单",tbId:2},{id:4,name:"用户",tbId:2},{id:5,name:"订单",tbId:3},{id:6,name:"用户",tbId:3},{id:7,name:"订单",tbId:4},{id:8,name:"用户",tbId:4},{id:9,name:"订单",tbId:5},{id:10,name:"用户",tbId:5},{id:11,name:"订单",tbId:6},{id:12,name:"用户",tbId:6},{id:13,name:"订单",tbId:7},{id:14,name:"用户",tbId:7},{id:15,name:"订单",tbId:8},{id:16,name:"用户",tbId:8},{id:17,name:"订单",tbId:9},{id:18,name:"用户",tbId:9},{id:19,name:"订单",tbId:10},{id:20,name:"用户",tbId:10},{id:21,name:"订单",tbId:11},{id:22,name:"用户",tbId:11},{id:23,name:"订单",tbId:12},{id:24,name:"用户",tbId:12},{id:25,name:"订单",tbId:13},{id:26,name:"用户",tbId:13},{id:27,name:"订单",tbId:14},{id:28,name:"用户",tbId:14},{id:29,name:"订单",tbId:15},{id:30,name:"用户",tbId:15},{id:31,name:"订单",tbId:16},{id:32,name:"用户",tbId:16},{id:33,name:"订单",tbId:17},{id:34,name:"用户",tbId:17},{id:35,name:"订单",tbId:18},{id:36,name:"用户",tbId:18},{id:37,name:"订单",tbId:19},{id:38,name:"用户",tbId:19},{id:39,name:"订单",tbId:20},{id:40,name:"用户",tbId:20},{id:41,name:"订单",tbId:21},{id:42,name:"用户",tbId:21},{id:43,name:"订单",tbId:22},{id:44,name:"用户",tbId:22},{id:45,name:"订单",tbId:23},{id:46,name:"用户",tbId:23},{id:47,name:"支付",tbId:23},{id:48,name:"交易",tbId:23}],Bc=[{id:1,userName:"xiaoyi",userNameCn:"小一",tbId:18},{id:2,userName:"xiaoyi",userNameCn:"小一",tbId:22},{id:3,userName:"xiaoyi",userNameCn:"小一",tbId:23},{id:4,userName:"xiaoer",userNameCn:"小二",tbId:1},{id:5,userName:"xiaoer",userNameCn:"小二",tbId:2},{id:6,userName:"xiaoer",userNameCn:"小二",tbId:3}],Pc={bootstrap:function(e){fm.post(e,Ra.searchTb.name,Ra.searchTb.api,function(e){var t=e.pageNo,a=e.pageSize,i=$c.filter(function(t){return e.dbId?t.dbId===e.dbId&&(!e.tbName||!(!t.tbName.includes(e.tbName.toLowerCase())&&!t.remark.includes(e.tbName))):!e.tbName||!(!t.tbName.includes(e.tbName.toLowerCase())&&!t.remark.includes(e.tbName))}),r=tn(i,t,a);r.forEach(function(e){var t=Uc.filter(function(t){return t.id===e.dbId})[0];e.dbName=t.dbName,e.tagList=Vc.filter(function(t){return t.tbId===e.id});var a=Gc.findIndex(function(e){return e.dsId===t.dsId&&"xiaoyi"===e.ownerName});if(-1===a){var i=Bc.findIndex(function(t){return t.tbId===e.id&&"xiaoyi"===t.userName});e.hasAuth=-1!==i}else e.hasAuth=!0});var n={total:i.length,data:r};return n}),fm.post(e,Ra.getTb.name,Ra.getTb.api,function(e){var t=$c.filter(function(t){return t.id===Number(e.id)})[0],a=JSON.parse(JSON.stringify(t));a.colList=zc.filter(function(e){return e.tbId===a.id}),a.lastDataModifiedTime=Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss");var i=Uc.filter(function(e){return e.id===a.dbId})[0];a.dbName=i.dbName;var r=Yc.filter(function(e){return e.id===i.dsId})[0];a.dsName=r.name;var n=Yc.filter(function(e){return e.baseDsId===r.id}).sort(function(e,t){return t.priority-e.priority}),o="";n.forEach(function(e){o=o+","+e.type}),o=o+","+r.type,o=o.replace(",",""),a.queryEngineTypeList=o,a.readCount=100;var s=Gc.findIndex(function(e){return e.dsId===r.id&&"xiaoyi"===e.ownerName});if(-1===s){var d=Bc.findIndex(function(e){return e.tbId===t.id&&"xiaoyi"===e.userName});a.hasAuth=-1!==d}else a.hasAuth=!0;return a.tagList=Vc.filter(function(e){return e.tbId===a.id}),a}),fm.post(e,Ra.previewTbData.name,Ra.previewTbData.api,function(e){var t=$c.filter(function(t){return t.id===Number(e.id)})[0],a=JSON.parse(JSON.stringify(t)),i=Uc.filter(function(e){return e.id===a.dbId})[0];a.dbName=i.dbName,a.colList=zc.filter(function(e){return e.tbId===a.id}),a.lastDataModifiedTime=Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),a.data=[];for(var r=function(e){var t={};a.colList.forEach(function(e){e.dataType===qi.date.code?t[e.colName]=Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"):e.dataType===qi.text_day_10.code?t[e.colName]=Vr.formatDate(new Date,"yyyy-MM-dd"):e.dataType===qi.text_day_8.code?t[e.colName]=Vr.formatDate(new Date,"yyyyMMdd"):e.dataType===qi.text_month_7.code?t[e.colName]=Vr.formatDate(new Date,"yyyy-MM"):e.dataType===qi.text_month_6.code?t[e.colName]=Vr.formatDate(new Date,"yyyyMM"):e.dataType===qi.text_year.code?t[e.colName]=Vr.formatDate(new Date,"yyyy"):e.dataType===qi.num.code?t[e.colName]=Math.round(1e4*Math.random()):e.dataType===qi.text.code&&(t[e.colName]="xxxx")}),a.data.push(t)},n=0;n<50;n++)r(n);return a}),fm.post(e,Ra.listMyTbOwn.name,Ra.listMyTbOwn.api,function(e){var t={},a=[],i=Gc.filter(function(e){return"xiaoyi"===e.ownerName}).map(function(e){return e.dsId}),r=Bc.filter(function(e){return"xiaoyi"===e.userName}).map(function(e){return e.tbId}),n=Uc.filter(function(e){return i.includes(e.dsId)});n.forEach(function(e){var t=$c.filter(function(t){return t.dbId===e.id});t.forEach(function(t){var i=JSON.parse(JSON.stringify(t));i.authSource="数据源Owner",i.dbName=e.dbName,i.tagList=Vc.filter(function(e){return e.tbId===i.id}),a.push(i)})}),r.forEach(function(e){if(-1===a.findIndex(function(t){return t.id===e})){var t=$c.filter(function(t){return t.id===e})[0],i=JSON.parse(JSON.stringify(t));i.authSource="他人授权",i.dbName=Uc.filter(function(e){return e.id===i.dbId})[0].dbName,i.tagList=Vc.filter(function(e){return e.tbId===i.id}),a.push(i)}});var o=[];return o=e.dbId?e.tbName?a.filter(function(t){return t.dbId===Number(e.dbId)&&(!!t.tbName.includes(e.tbName.toLowerCase())||(!!t.tbNameCn.includes(e.tbName)||(!!t.remark.includes(e.tbName)||Vc.findIndex(function(t){return t.tbId===t.id&&t.name.includes(e.tbName)})>-1)))}):a.filter(function(t){return t.dbId===e.dbId&&t.tbName.includes(e.tbName.toLowerCase())}):a.filter(function(t){return!!t.tbName.includes(e.tbName.toLowerCase())||(!!t.tbNameCn.includes(e.tbName)||(!!t.remark.includes(e.tbName)||Vc.findIndex(function(a){return a.tbId===t.id&&a.name.includes(e.tbName)})>-1))}),t={total:o.length,data:tn(o,e.pageNo,e.pageSize)},t}),fm.post(e,Ra.listMyTbManage.name,Ra.listMyTbManage.api,function(e){var t={},a=[],i=Gc.filter(function(e){return"xiaoyi"===e.ownerName}).map(function(e){return e.dsId}),r=Uc.filter(function(e){return i.includes(e.dsId)});r.forEach(function(e){var t=$c.filter(function(t){return t.dbId===e.id});t.forEach(function(t){var i=JSON.parse(JSON.stringify(t));i.dbName=e.dbName,i.tagList=Vc.filter(function(e){return e.tbId===i.id}),a.push(i)})});var n=[];return n=e.dbId?e.tbName?a.filter(function(t){return t.dbId===Number(e.dbId)&&(!!t.tbName.includes(e.tbName.toLowerCase())||(!!t.tbNameCn.includes(e.tbName)||(!!t.remark.includes(e.tbName)||Vc.findIndex(function(t){return t.tbId===t.id&&t.name.includes(e.tbName)})>-1)))}):a.filter(function(t){return t.dbId===e.dbId&&t.tbName.includes(e.tbName.toLowerCase())}):a.filter(function(t){return!!t.tbName.includes(e.tbName.toLowerCase())||(!!t.tbNameCn.includes(e.tbName)||(!!t.remark.includes(e.tbName)||Vc.findIndex(function(a){return a.tbId===t.id&&a.name.includes(e.tbName)})>-1))}),t={total:n.length,data:tn(n,e.pageNo,e.pageSize)},t}),fm.post(e,Ra.listTbUser.name,Ra.listTbUser.api,function(e){var t=Bc.filter(function(t){return t.tbId===e.id});return t}),fm.post(e,Ra.addTbUser.name,Ra.addTbUser.api,function(e){var t=(new Date).getTime();return Bc.push({id:t,tbId:e.tbId,userName:e.userName,userNameCn:e.userNameCn}),t}),fm.post(e,Ra.deleteTbUser.name,Ra.deleteTbUser.api,function(e){var t=Bc.findIndex(function(t){return t.id===e.tbUserId});return t>-1&&Bc.splice(t,1),""})}},Uc=[{id:1,dbName:"dg_pay",remark:"数据库秒速",dsId:1,isLogical:0},{id:2,dbName:"dg_maxc",remark:"数据库秒速",dsId:2,isLogical:0},{id:3,dbName:"hive_db_1",remark:"数据库秒速",dsId:3,isLogical:0},{id:4,dbName:"hive_db_2",remark:"数据库秒速",dsId:3,isLogical:0},{id:5,dbName:"hive_db_3",remark:"数据库秒速",dsId:3,isLogical:0},{id:6,dbName:"hive_db_4",remark:"数据库秒速",dsId:3,isLogical:0},{id:7,dbName:"dg_user",remark:"数据库秒速",dsId:7,isLogical:0},{id:8,dbName:"kylin_hive_db_1",remark:"数据库秒速",dsId:8,isLogical:0},{id:9,dbName:"kylin_hive_db_2",remark:"数据库秒速",dsId:8,isLogical:0},{id:10,dbName:"kylin_hive_db_3",remark:"数据库秒速",dsId:8,isLogical:0},{id:11,dbName:"kylin_hive_db_4",remark:"数据库秒速",dsId:8,isLogical:0},{id:12,dbName:"kylin_hive_db_5",remark:"数据库秒速",dsId:8,isLogical:0}],Hc={bootstrap:function(e){fm.post(e,Va.listAllDb.name,Va.listAllDb.api,function(e){return Uc}),fm.post(e,Va.getDb.name,Va.getDb.api,function(e){var t=Uc.filter(function(t){return t.id===Number(e.id)})[0];return t.tbCount=$c.filter(function(e){return e.dbId===t.id}).length,t.dsName=Yc.filter(function(e){return e.id===t.dsId})[0].name,t})}},Yc=[{id:1,name:"支付交易库",host:"pay.dragon-inc.com",port:"3306",type:ci.MYSQL.code,dbName:"dg_pay",userName:"dg_read",password:"000",remark:"会计师考虑价格打卡",isBaseDs:1,baseDsId:0,isAutoMeta:0,priority:0,creator:"sanshang",updator:"sanshang"},{id:2,name:"阿里云数据仓库",host:"lightning.cn-hangzhou.maxcompute.aliyun-inc.com",port:"",type:ci.MAXCOMPUTE.code,dbName:"dg_maxc",userName:"dg_read",password:"000",remark:"会计师考虑价格打卡",isBaseDs:1,baseDsId:0,isAutoMeta:0,priority:0,creator:"sanshang",updator:"sanshang"},{id:3,name:"hive数据仓库",host:"hive.dragon-inc.com",port:"3306",type:ci.HIVE.code,dbName:"default",userName:"dg_read",password:"000",remark:"会计师考虑价格打卡",isBaseDs:1,baseDsId:0,isAutoMeta:0,priority:0,creator:"sanshang",updator:"sanshang"},{id:4,name:"KYLIN引擎",host:"kylin.dragon-inc.com",port:"3306",type:ci.KYLIN.code,dbName:"proj_pay",userName:"dg_read",password:"000",remark:"会计师考虑价格打卡",isBaseDs:0,baseDsId:3,isAutoMeta:0,priority:1,creator:"sanshang",updator:"sanshang"},{id:5,name:"IMPALA引擎",host:"impala.dragon-inc.com",port:"3306",type:ci.IMPALA.code,dbName:"default",userName:"dg_read",password:"000",remark:"会计师考虑价格打卡",isBaseDs:0,baseDsId:3,isAutoMeta:1,priority:3,creator:"sanshang",updator:"sanshang"},{id:6,name:"PRESTO引擎",host:"presto.dragon-inc.com",port:"3306",type:ci.PRESTO.code,dbName:"default",userName:"dg_read",password:"000",remark:"会计师考虑价格打卡",isBaseDs:0,baseDsId:3,isAutoMeta:1,priority:2,creator:"sanshang",updator:"sanshang"},{id:7,name:"用户中心库",host:"userName.dragon-inc.com",port:"3306",type:ci.MYSQL.code,dbName:"dg_user",userName:"dg_read",password:"000",remark:"会计师考虑价格打卡",isBaseDs:1,baseDsId:0,isAutoMeta:0,priority:0,creator:"sanshang",updator:"sanshang"},{id:8,name:"kylin库",host:"kylin.dragon-inc.com",port:"3306",type:ci.KYLIN.code,dbName:"proj_kylin",userName:"dg_read",password:"000",remark:"会计师考虑价格打卡",isBaseDs:1,baseDsId:0,isAutoMeta:0,priority:0,creator:"sanshang",updator:"sanshang"}],Gc=[{id:1,dsId:1,ownerName:"xiaoyi",ownerNameCn:"小一"},{id:2,dsId:1,ownerName:"xiaosan",ownerNameCn:"小三"},{id:3,dsId:2,ownerName:"xiaoyi",ownerNameCn:"小一"},{id:4,dsId:3,ownerName:"xiaoyi",ownerNameCn:"小一"},{id:5,dsId:3,ownerName:"xiaoer",ownerNameCn:"小二"},{id:6,dsId:7,ownerName:"xiaoyi",ownerNameCn:"小一"},{id:7,dsId:8,ownerName:"xiaosi",ownerNameCn:"小四"}],Wc={bootstrap:function(e){fm.post(e,li.listDs.name,li.listDs.api,function(e){var t=Yc.filter(function(t){if(1===t.isBaseDs){t.password="000",t.children=Yc.filter(function(e){return 0===e.isBaseDs&&e.baseDsId===t.id}).sort(function(e,t){return t.priority-e.priority});var a=!1;if(a=!e.type&&!e.name||(e.type&&e.name?t.type===e.type&&(t.name.includes(e.name)||t.dbName.includes(e.name)):e.type?t.type===e.type:t.name.includes(e.name)||t.dbName.includes(e.name)),a)return t}}).sort(function(e,t){return t.id-e.id}),a={total:130,data:t};return a}),fm.post(e,li.listDsOwner.name,li.listDsOwner.api,function(e){var t=Gc.filter(function(t){return t.dsId===e.id});return t}),fm.post(e,li.addOrUpdateDs.name,li.addOrUpdateDs.api,function(e){var t;if(e.id){t=e.id;var a=Yc.filter(function(e){return e.id===t})[0];a.name=e.name,a.host=e.host,a.port=e.port,a.userName=e.userName,a.password=e.password,a.remark=e.remark,a.isAutoMeta=e.isAutoMeta,a.priority=e.priority}else t=(new Date).getTime(),Yc.push({id:t,name:e.name,host:e.host,port:e.port,type:e.type,dbName:e.dbName,userName:e.userName,password:e.password,remark:e.remark,isBaseDs:e.isBaseDs,baseDsId:e.baseDsId,isAutoMeta:e.isAutoMeta,priority:e.priority}),Gc.push({id:t,dsId:t,ownerName:"xiaoyi",ownerNameCn:"小一"});return t}),fm.post(e,li.deleteDs.name,li.deleteDs.api,function(e){var t=Yc.findIndex(function(t){return t.id===e.id});return Yc.splice(t,1),""}),fm.post(e,li.testDs.name,li.testDs.api,function(e){return""}),fm.post(e,li.deleteDsOwner.name,li.deleteDsOwner.api,function(e){var t=Gc.findIndex(function(t){return t.id===e.dsOwnerId});return Gc.splice(t,1),""}),fm.post(e,li.addDsOwner.name,li.addDsOwner.api,function(e){var t=(new Date).getTime();return Gc.push({id:t,dsId:e.dsId,ownerName:e.ownerName,ownerNameCn:e.ownerNameCn}),t}),fm.post(e,li.getDs.name,li.getDs.api,function(e){var t=Yc.filter(function(t){return t.id===Number(e.id)})[0];return t.createTime=Vr.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),t.dbList=Uc.filter(function(e){return e.dsId===t.id}),t.dbCount=t.dbList.length,t.tbCount=$c.filter(function(e){return t.dbList.findIndex(function(t){return t.id===e.dbId})>-1}).length,t.ownerList=Gc.filter(function(e){return e.dsId===t.id}),t})}},Xc={bootstrap:function(e){Wc.bootstrap(e),Hc.bootstrap(e),Pc.bootstrap(e)}},Jc=[{id:1,name:"集团核心数据",remark:"集团核心数据",sortNum:1},{id:2,name:"业务线核心数据",remark:"业务线核心数据",sortNum:1}],Kc=[{id:1,projId:1,name:"订单"},{id:2,projId:1,name:"用户"},{id:3,projId:1,name:"交易"},{id:4,projId:1,name:"财务"},{id:5,projId:2,name:"订单"},{id:6,projId:2,name:"用户"},{id:7,projId:2,name:"交易"},{id:8,projId:2,name:"财务"}],qc={bootstrap:function(e){fm.post(e,Cr.addOrUpdateProj.name,Cr.addOrUpdateProj.api,function(e){var t=e.id;if(t){t=Number(e.id);var a=Jc.filter(function(e){return e.id===t})[0];if(a.name=e.name,a.remark=e.remark,e.delTagIdList){var i=e.delTagIdList.split(","),r=[];Kc.forEach(function(e,t){i.includes(e.id+"")&&r.push(t)}),r.forEach(function(e,t){Kc.splice(e-t,1)})}var n=JSON.parse(e.addTagList),o=(new Date).getTime();n.forEach(function(e,a){Kc.push({id:o+a,projId:t,name:e.name})})}else{t=(new Date).getTime(),Jc.push({id:t,name:e.name,remark:e.remark,sortNum:1});var s=JSON.parse(e.addTagList);s.forEach(function(e,a){Kc.push({id:t+a,projId:t,name:e.name})})}return t}),fm.post(e,Cr.deleteProj.name,Cr.deleteProj.api,function(e){var t=Jc.findIndex(function(t){return t.id===Number(e.id)});return Jc.splice(t,1),""})}},Zc={chartType:Xr.IndexCard.code,columns:[{key:"col1",name:"订单量",showType:Pr.num.code,unit:"",THB:[Ur.hb.code,Ur.tb_w.code,Ur.tb_m.code,Ur.tb_y.code],THBValueType:Hr.GROWTH_RATE.code,dim:!1}]},Qc={Area:_d,AreaNotDate:Sd,Bar:Ys,BarNotDate:Cd,BarStack:Zs,BarStackTop:nd,BarTop:ud,Funnel:hl,FunnelDim:Dl,IndexCard:ys,IndexCardOne:Zc,Line:js,LineBar:Wd,LineBarNotDate:Vd,LineNotDate:zs,Map:kl,Pie:el,PieRing:sl,Table:Ts},em={showName:"时间字段",colName:"createtime",tbId:1,dbName:"dw",tbName:"tb",filterConfig:{controlType:Jr.date.code,defaultValue:7,dateType:Yr.day.code,dataType:qi.date.code}},tm={showName:"数字字段的所产生的",colName:"amt",tbId:1,dbName:"dw",tbName:"tb",filterConfig:{controlType:Jr.num.code,defaultValue:"1,5",dataType:qi.num.code}},am={showName:"枚举字段",colName:"state",tbId:1,dbName:"dw",tbName:"tb",filterConfig:{controlType:Jr.select.code,defaultValue:"北京",dataType:qi.text.code}},im={showName:"文本字段",colName:"addr",tbId:1,dbName:"dw",tbName:"tb",filterConfig:{controlType:Jr.text.code,defaultValue:"xiao",dataType:qi.text.code}};function rm(e,t){t||(t=[em,tm,am,im]);var a={chartMeta:e,filterMeta:t};return JSON.stringify(a)}var nm=[{id:1,name:"订单量",remark:"订单数据分析",sortNum:1,dashId:1,tabId:1,sizeX:6,sizeY:2,row:0,col:0,config:"{}",meta:rm(Qc.IndexCard),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:2,name:"用户量",remark:"用户数据分析",sortNum:1,dashId:1,tabId:2,sizeX:6,sizeY:2,row:0,col:0,config:"{}",meta:rm(Qc.IndexCard),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:3,name:"交易量",remark:"交易数据分析",sortNum:1,dashId:1,tabId:3,sizeX:12,sizeY:2,row:0,col:0,config:"{}",meta:rm(Qc.IndexCard),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:4,name:"订单金额",remark:"财务数据分析",sortNum:1,dashId:1,tabId:4,sizeX:12,sizeY:2,row:0,col:0,config:"{}",meta:rm(Qc.IndexCard),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:5,name:"GMV",remark:"财务数据分析",sortNum:1,dashId:1,tabId:1,sizeX:6,sizeY:2,row:0,col:6,config:"{}",meta:rm(Qc.IndexCard),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:6,name:"PV",remark:"财务数据分析",sortNum:1,dashId:1,tabId:2,sizeX:6,sizeY:2,row:0,col:6,config:"{}",meta:rm(Qc.IndexCard),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:7,name:"表格数据",remark:"财务数据分析",sortNum:1,dashId:1,tabId:3,sizeX:12,sizeY:6,row:2,col:0,config:"{}",meta:rm(Qc.Table),chartType:Xr.Table.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:8,name:"折线图数据",remark:"财务数据分析",sortNum:1,dashId:1,tabId:4,sizeX:6,sizeY:4,row:2,col:0,config:"{}",meta:rm(Qc.LineNotDate),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:9,name:"柱状图数据",remark:"财务数据分析",sortNum:1,dashId:1,tabId:1,sizeX:6,sizeY:4,row:2,col:0,config:"{}",meta:rm(Qc.Bar),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:10,name:"面积图数据",remark:"财务数据分析",sortNum:1,dashId:1,tabId:2,sizeX:6,sizeY:4,row:2,col:0,config:"{}",meta:rm(Qc.Area),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:11,name:"双轴图",remark:"财务数据分析",sortNum:1,dashId:1,tabId:3,sizeX:6,sizeY:4,row:8,col:0,config:"{}",meta:rm(Qc.LineBar),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:12,name:"饼图",remark:"财务数据分析",sortNum:1,dashId:1,tabId:4,sizeX:6,sizeY:4,row:2,col:6,config:"{}",meta:rm(Qc.Pie),chartType:Xr.Pie.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:13,name:"漏斗图",remark:"财务数据分析",sortNum:1,dashId:1,tabId:1,sizeX:6,sizeY:4,row:2,col:6,config:"{}",meta:rm(Qc.FunnelDim),chartType:Xr.Funnel.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:14,name:"条形图",remark:"财务数据分析",sortNum:1,dashId:1,tabId:2,sizeX:6,sizeY:4,row:2,col:6,config:"{}",meta:rm(Qc.BarTop),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:15,name:"地图",remark:"财务数据分析",sortNum:1,dashId:1,tabId:-1,sizeX:12,sizeY:6,row:0,col:0,config:"{}",meta:rm(Qc.Map),chartType:Xr.Map.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:16,name:"订单量",remark:"订单数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:4,sizeY:2,row:0,col:0,config:"{}",meta:rm(Qc.IndexCard),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:17,name:"用户量",remark:"用户数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:4,sizeY:2,row:0,col:4,config:"{}",meta:rm(Qc.IndexCard),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:18,name:"交易量",remark:"交易数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:4,sizeY:2,row:0,col:8,config:"{}",meta:rm(Qc.IndexCard),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:19,name:"订单金额",remark:"财务数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:4,sizeY:2,row:2,col:0,config:"{}",meta:rm(Qc.IndexCard),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:20,name:"GMV",remark:"财务数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:4,sizeY:2,row:2,col:4,config:"{}",meta:rm(Qc.IndexCard),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:21,name:"PV",remark:"财务数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:4,sizeY:2,row:2,col:8,config:"{}",meta:rm(Qc.IndexCard),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:22,name:"表格数据",remark:"财务数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:12,sizeY:6,row:4,col:0,config:"{}",meta:rm(Qc.Table),chartType:Xr.Table.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:23,name:"折线图数据",remark:"财务数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:6,sizeY:4,row:10,col:0,config:"{}",meta:rm(Qc.Line),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:24,name:"柱状图数据",remark:"财务数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:6,sizeY:4,row:10,col:6,config:"{}",meta:rm(Qc.BarStack),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:25,name:"面积图数据",remark:"财务数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:6,sizeY:4,row:14,col:0,config:"{}",meta:rm(Qc.AreaNotDate),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:26,name:"双轴图",remark:"财务数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:6,sizeY:4,row:14,col:6,config:"{}",meta:rm(Qc.LineBarNotDate),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:27,name:"饼图",remark:"财务数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:6,sizeY:4,row:18,col:0,config:"{}",meta:rm(Qc.PieRing),chartType:Xr.Pie.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:28,name:"漏斗图",remark:"财务数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:6,sizeY:4,row:18,col:6,config:"{}",meta:rm(Qc.Funnel),chartType:Xr.Funnel.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:29,name:"条形图",remark:"财务数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:6,sizeY:4,row:22,col:0,config:"{}",meta:rm(Qc.BarStackTop),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:30,name:"地图",remark:"财务数据分析",sortNum:1,dashId:2,tabId:-1,sizeX:6,sizeY:6,row:22,col:6,config:"{}",meta:rm(Qc.Map),chartType:Xr.Map.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:31,name:"订单量",remark:"订单数据分析",sortNum:1,dashId:3,tabId:-1,sizeX:2,sizeY:2,row:0,col:0,config:"{}",meta:rm(Qc.IndexCardOne),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:32,name:"地图",remark:"财务数据分析",sortNum:1,dashId:3,tabId:-1,sizeX:8,sizeY:4,row:0,col:2,config:"{}",meta:rm(Qc.Map),chartType:Xr.Map.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:33,name:"用户量",remark:"用户数据分析",sortNum:1,dashId:3,tabId:-1,sizeX:2,sizeY:2,row:0,col:10,config:"{}",meta:rm(Qc.IndexCardOne),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:34,name:"交易量",remark:"交易数据分析",sortNum:1,dashId:3,tabId:-1,sizeX:2,sizeY:2,row:2,col:0,config:"{}",meta:rm(Qc.IndexCardOne),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:35,name:"订单金额",remark:"财务数据分析",sortNum:1,dashId:3,tabId:-1,sizeX:2,sizeY:2,row:2,col:10,config:"{}",meta:rm(Qc.IndexCardOne),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:36,name:"表格数据",remark:"财务数据分析",sortNum:1,dashId:3,tabId:-1,sizeX:12,sizeY:6,row:4,col:0,config:"{}",meta:rm(Qc.Table),chartType:Xr.Table.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:37,name:"折线图数据",remark:"财务数据分析",sortNum:1,dashId:3,tabId:-1,sizeX:6,sizeY:4,row:10,col:0,config:"{}",meta:rm(Qc.Line),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:38,name:"柱状图数据",remark:"财务数据分析",sortNum:1,dashId:3,tabId:-1,sizeX:6,sizeY:4,row:10,col:6,config:"{}",meta:rm(Qc.BarStack),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:39,name:"面积图数据",remark:"财务数据分析",sortNum:1,dashId:3,tabId:-1,sizeX:6,sizeY:4,row:14,col:0,config:"{}",meta:rm(Qc.AreaNotDate),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:40,name:"双轴图",remark:"财务数据分析",sortNum:1,dashId:3,tabId:-1,sizeX:6,sizeY:4,row:14,col:6,config:"{}",meta:rm(Qc.LineBarNotDate),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:41,name:"订单量",remark:"订单数据分析",sortNum:1,dashId:4,tabId:-1,sizeX:2,sizeY:2,row:0,col:0,config:"{}",meta:rm(Qc.IndexCardOne),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:42,name:"面积图",remark:"财务数据分析",sortNum:1,dashId:4,tabId:-1,sizeX:8,sizeY:4,row:0,col:2,config:"{}",meta:rm(Qc.Area),chartType:Xr.Map.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:43,name:"用户量",remark:"用户数据分析",sortNum:1,dashId:4,tabId:-1,sizeX:2,sizeY:2,row:0,col:10,config:"{}",meta:rm(Qc.IndexCardOne),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:44,name:"交易量",remark:"交易数据分析",sortNum:1,dashId:4,tabId:-1,sizeX:2,sizeY:2,row:2,col:0,config:"{}",meta:rm(Qc.IndexCardOne),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:45,name:"订单金额",remark:"财务数据分析",sortNum:1,dashId:4,tabId:-1,sizeX:2,sizeY:2,row:2,col:10,config:"{}",meta:rm(Qc.IndexCardOne),chartType:Xr.IndexCard.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1},{id:47,name:"top图数据",remark:"财务数据分析",sortNum:1,dashId:4,tabId:-1,sizeX:6,sizeY:4,row:4,col:0,config:"{}",meta:rm(Qc.BarTop),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:0},{id:48,name:"top图数据",remark:"财务数据分析",sortNum:1,dashId:4,tabId:-1,sizeX:6,sizeY:4,row:4,col:6,config:"{}",meta:rm(Qc.BarTop),chartType:Xr.LineBar.code,creator:"xiaoyi",creatorCn:"小一",departmentId:1,departmentName:"数据智能-数据仓库",isCertified:1}],om=[{id:1,chartId:1,name:"订单"},{id:2,chartId:1,name:"用户"},{id:3,chartId:1,name:"交易"},{id:4,chartId:1,name:"财务"}],sm={bootstrap:function(e){fm.post(e,jr.addOrUpdateChart.name,jr.addOrUpdateChart.api,function(e){var t=e.id;return t}),fm.post(e,jr.queryData.name,jr.queryData.api,function(e){var t=nm.filter(function(t){return t.id===Number(e.id)})[0],a=JSON.parse(t.meta),i=bs(a.chartMeta);if(e.sortFieldKey){var r=!1;for(var n in a.chartMeta.columns)a.chartMeta.columns[n].key===e.sortFieldKey&&(r=a.chartMeta.columns[n].showType===Pr.text.code);i.sort(function(t,a){return r?e.sortType===Gr.asc.code?rn(t[e.sortFieldKey],a[e.sortFieldKey]):rn(a[e.sortFieldKey],t[e.sortFieldKey]):e.sortType===Gr.asc.code?t[e.sortFieldKey]-a[e.sortFieldKey]:a[e.sortFieldKey]-t[e.sortFieldKey]})}return i}),fm.post(e,jr.updateChartPosition.name,jr.updateChartPosition.api,function(e){var t="",a=JSON.parse(e.positions);return a.forEach(function(e){var t=nm.filter(function(t){return t.id===e.id})[0];t.row=e.row,t.col=e.col,t.sizeX=e.sizeX,t.sizeY=e.sizeY}),t})}},dm=(E.dataVisual.be,[{id:1,name:"订单分析",dashId:1},{id:2,name:"用户分析",dashId:1},{id:3,name:"交易分析",dashId:1},{id:4,name:"流量分析",dashId:1},{id:5,name:"增长分析",dashId:1}]),lm=[{id:1,name:"订单数据分析(有Tab)",remark:"订单数据分析",sortNum:1,projId:1},{id:2,name:"用户数据分析(无Tab)",remark:"用户数据分析",sortNum:1,projId:1},{id:3,name:"交易数据分析",remark:"交易数据分析",sortNum:1,projId:1},{id:4,name:"财务数据分析",remark:"财务数据分析",sortNum:1,projId:1},{id:5,name:"订单数据分析",remark:"订单数据分析",sortNum:1,projId:2},{id:6,name:"用户数据分析",remark:"用户数据分析",sortNum:1,projId:2},{id:7,name:"交易数据分析",remark:"交易数据分析",sortNum:1,projId:2},{id:8,name:"财务数据分析",remark:"财务数据分析",sortNum:1,projId:2},{id:9,name:"用户数据分析(无Tab)",remark:"用户数据分析",sortNum:1,projId:1},{id:10,name:"交易数据分析",remark:"交易数据分析",sortNum:1,projId:1},{id:11,name:"财务数据分析",remark:"财务数据分析",sortNum:1,projId:1},{id:12,name:"订单数据分析",remark:"订单数据分析",sortNum:1,projId:2},{id:13,name:"用户数据分析",remark:"用户数据分析",sortNum:1,projId:2},{id:14,name:"交易数据分析",remark:"交易数据分析",sortNum:1,projId:2},{id:15,name:"财务数据分析",remark:"财务数据分析",sortNum:1,projId:2},{id:16,name:"用户数据分析(无Tab)",remark:"用户数据分析",sortNum:1,projId:1},{id:17,name:"交易数据分析",remark:"交易数据分析",sortNum:1,projId:1},{id:18,name:"财务数据分析",remark:"财务数据分析",sortNum:1,projId:1},{id:19,name:"订单数据分析",remark:"订单数据分析",sortNum:1,projId:2},{id:20,name:"用户数据分析",remark:"用户数据分析",sortNum:1,projId:2},{id:21,name:"交易数据分析",remark:"交易数据分析",sortNum:1,projId:2},{id:22,name:"财务数据分析",remark:"财务数据分析",sortNum:1,projId:2},{id:23,name:"用户数据分析(无Tab)",remark:"用户数据分析",sortNum:1,projId:1},{id:24,name:"交易数据分析",remark:"交易数据分析",sortNum:1,projId:1},{id:25,name:"财务数据分析",remark:"财务数据分析",sortNum:1,projId:1},{id:26,name:"订单数据分析",remark:"订单数据分析",sortNum:1,projId:2},{id:27,name:"用户数据分析",remark:"用户数据分析",sortNum:1,projId:2},{id:28,name:"交易数据分析",remark:"交易数据分析",sortNum:1,projId:2},{id:29,name:"财务数据分析",remark:"财务数据分析",sortNum:1,projId:2}],cm=[{id:1,dashId:1,name:"订单"},{id:2,dashId:2,name:"用户"},{id:3,dashId:3,name:"交易"},{id:4,dashId:4,name:"财务"},{id:5,dashId:5,name:"订单"},{id:6,dashId:6,name:"用户"},{id:7,dashId:7,name:"交易"},{id:8,dashId:8,name:"财务"}],mm={bootstrap:function(e){fm.post(e,pr.listUserDash.name,pr.listUserDash.api,function(e){var t=[];return Jc.forEach(function(e){e.editAuth=e.id%2!==0,e.tagList=Kc.filter(function(t){return t.projId===e.id}),e.dashList=lm.filter(function(t){return t.projId===e.id}),e.dashList.forEach(function(e){e.chartList=nm.filter(function(t){return t.dashId===e.id}).map(function(e){return{id:e.id,name:e.name,tabId:e.tabId}}),e.creator="xiaoyi",e.creatorCn="小一",e.departmentName="数据智能-数据仓库",e.tagList=cm.filter(function(t){return t.dashId===e.id}),e.editAuth=e.id%2!==0}),t.push(e)}),t}),fm.post(e,pr.addOrUpdateDash.name,pr.addOrUpdateDash.api,function(e){var t=e.id;if(t){t=Number(e.id);var a=lm.filter(function(e){return e.id===t})[0];if(a.name=e.name,a.remark=e.remark,a.projId=Number(e.projId),e.delTagIdList){var i=e.delTagIdList.split(","),r=[];cm.forEach(function(e,t){i.includes(e.id+"")&&r.push(t)}),r.forEach(function(e,t){cm.splice(e-t,1)})}var n=JSON.parse(e.addTagList),o=(new Date).getTime();n.forEach(function(e,a){cm.push({id:o+a,dashId:t,name:e.name})})}else{t=(new Date).getTime(),lm.push({id:t,name:e.name,remark:e.remark,projId:e.projId,sortNum:1});var s=JSON.parse(e.addTagList);s.forEach(function(e,a){cm.push({id:t+a,dashId:t,name:e.name})})}return t}),fm.post(e,pr.deleteDash.name,pr.deleteDash.api,function(e){var t=lm.findIndex(function(t){return t.id===Number(e.id)});return lm.splice(t,1),""}),fm.post(e,pr.getDashMetaForShow.name,pr.getDashMetaForShow.api,function(e){var t=lm.filter(function(t){return t.id===Number(e.id)})[0];t.editAuth=t.id%2!==0;var a=dm.filter(function(e){return e.dashId===t.id}),i=nm.filter(function(e){return e.dashId===t.id});return a.length||a.push({id:-1,name:"其他",chartList:[]}),a.forEach(function(e){e.chartList=i.filter(function(t){return t.tabId===e.id}).map(function(e){return e.tagList=om.filter(function(t){return t.chartId===e.id}),e.editAuth=t.editAuth,e})}),t.tabList=a,t.globalFilterList=[{a:1}],t})}},um={bootstrap:function(e){fm.post(e,Eo.querySelectData.name,Eo.querySelectData.api,function(e){e.tbId,e.tbName,e.dbName,e.colName,e.conditionValue;return["北京","上海","广州","深圳","杭州","长沙"]})}},pm={bootstrap:function(e){qc.bootstrap(e),mm.bootstrap(e),sm.bootstrap(e),um.bootstrap(e)}},hm={bootstrap:function(e){fm.post(e,Xl.login.name,Xl.login.api,function(e){var t="";return t})}},fm={bootstrap:function(){var e=new mc.a(L.a);Fc.bootstrap(e),Ec.bootstrap(e),Oc.bootstrap(e),Xc.bootstrap(e),pm.bootstrap(e),hm.bootstrap(e)},apiResponseJson:function(e,t,a,i,r){var n={code:0,msg:"success",data:r};return r&&void 0!==r.code&&void 0!==r.msg&&(n=r),console.log(t+",url:"+a+", 请求类型："+e+",参数：",i),console.log(t+", 返回：",n),n},resolve200:function(e,t,a,i,r){return[200,this.apiResponseJson(e,t,a,i,r)]},replyFunc:function(e,t,a,i,r){var n=this,o=e.data;return"string"===typeof o&&(o=JSON.parse(o)),new Promise(function(e,s){e(n.resolve200(t,a,i,o,r(o)))})},post:function(e,t,a,i){var r=this;e.onPost(a).reply(function(e){return r.replyFunc(e,"post",t,a,i)})},get:function(e,t,a,i){var r=this;e.onGet(a).reply(function(e){return r.replyFunc(e,"get",t,a,i)})}},bm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-layout"},[a("div",{staticClass:"d-head"},[a("div",{staticClass:"d-logo"},[e.$slots.logo?e._e():a("span",[e._v(e._s(e.logo))]),e._t("logo")],2),a("div",{staticClass:"d-head-nav"},[e._t("default")],2)]),a("div",{staticClass:"d-container"},[a("router-view")],1)])},ym=[],gm={name:"DLayout",props:{logo:String}},Cm=gm,vm=Object(c["a"])(Cm,bm,ym,!1,null,null,null),Dm=vm.exports,Im=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-content"},[e.$slots.side?a("div",{staticClass:"d-content-side d-side-nav"},[e._t("side")],2):e._e(),a("div",{staticClass:"d-content-main",style:e.contentMainStyle},[e._t("default")],2)])},wm=[],Tm={name:"DPageContent",computed:{contentMainStyle:function(){return this.$slots.side?{width:"calc(100% - 195px)"}:{width:"100%"}}}},Nm=Tm,_m=Object(c["a"])(Nm,Im,wm,!1,null,null,null),xm=_m.exports,km=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{attrs:{"default-active":e.current,mode:e.mode},on:{select:e.clickMenu}},e._l(e.data,function(t,i){return a("el-menu-item",{key:i,attrs:{index:t.path}},[e._v(e._s(t.name))])}),1)},Lm=[],Rm={name:"DMenuNav",props:{data:Array,mode:{type:String,default:"horizontal"}},data:function(){return{current:""}},methods:{clickMenu:function(e){this.$router.push(e)},setMenuCurrent:function(){var e=this,t="/"+this.$route.path+"/";this.data.forEach(function(a){t.includes(a.path+"/")&&(e.current=a.path)})}},watch:{$route:"setMenuCurrent"},mounted:function(){this.setMenuCurrent()}},jm=Rm,Fm=Object(c["a"])(jm,km,Lm,!1,null,null,null),Sm=Fm.exports,Em={Layout:Dm,PageContent:xm,MenuNav:Sm},Am=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{attrs:{gutter:24}},e._l(e.columns,function(t){return a("el-col",{key:t.key,staticClass:"d-desclist-index",attrs:{span:e.colSpan}},[a("div",{staticClass:"d-desclist-index-term"},[e._v(e._s(t.title))]),a("div",{staticClass:"d-desclist-index-detail"},[e._v(e._s(e.data[t.key]))])])}),1)},Mm=[],Om={name:"DDetail",props:{data:Object,columns:Array,col:{type:Number,default:3}},computed:{colSpan:function(){return 24/this.col}}},zm=Om,$m=(a("6d33"),Object(c["a"])(zm,Am,Mm,!1,null,null,null)),Vm=$m.exports,Bm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"el-loading-mask",staticStyle:{"background-color":"rgba(0, 0, 0, 0.8)"}},[a("div",{staticClass:"el-loading-spinner"},[a("i",{staticClass:"el-icon-loading",staticStyle:{"font-size":"38px"}}),e.desc?a("p",{staticClass:"el-loading-text"},[e._v(e._s(e.desc))]):e._e()])])},Pm=[],Um={name:"DLoading",props:{desc:String,loading:Boolean}},Hm=Um,Ym=Object(c["a"])(Hm,Bm,Pm,!1,null,null,null),Gm=Ym.exports,Wm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-submit-cancel"},[e.nohr?e._e():a("hr"),a("el-button",{attrs:{size:e.size},on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:e.size},on:{click:e.submit}},[e._v("保存")]),e._t("default")],2)},Xm=[],Jm={name:"DSubmitCancel",props:{nohr:Boolean,size:{type:String,default:""}},methods:{submit:function(){this.$emit("submit")},cancel:function(){this.$emit("cancel")}}},Km=Jm,qm=(a("c174"),Object(c["a"])(Km,Wm,Xm,!1,null,null,null)),Zm=qm.exports,Qm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isEdit?a("span",[a("el-button",{attrs:{type:"text",title:"保存"},on:{click:e.clickSubmit}},[e._v("保存")]),a("el-button",{attrs:{type:"text",title:"取消"},on:{click:e.clickCancel}},[e._v("取消")])],1):a("el-button",{attrs:{type:"text",title:e.editName},on:{click:e.clickEdit}},[e._v(e._s(e.editName))])},eu=[],tu={name:"DEditSaveSwitch",props:{value:Boolean,editName:{type:String,default:"编辑"}},data:function(){return{isEdit:this.value}},watch:{value:function(e,t){this.isEdit=e},isEdit:function(e,t){this.$emit("input",e)}},methods:{clickEdit:function(){this.isEdit=!0,this.$emit("edit")},clickSubmit:function(){this.$emit("submit")},clickCancel:function(){this.isEdit=!1,this.$emit("cancel")}}},au=tu,iu=Object(c["a"])(au,Qm,eu,!1,null,null,null),ru=iu.exports,nu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"d-format-value",class:e.classStyle,attrs:{title:e.spanText+e.unit}},[e.growthSign?a("i",{staticClass:"fa",class:e.arrowClass}):e._e(),a("span",[e._v(e._s(e.spanText))]),a("sub",[e._v(e._s(e.unit))])])},ou=[],su={name:"DFormatValue",props:{value:[Number,String],showType:{type:String,default:"num"},unit:{type:String,default:""},prefixSymbol:{type:String,default:""},suffixSymbol:{type:String,default:""},rate100:Boolean,growthSign:Boolean},data:function(){return{spanText:"--",up:!1,down:!1}},computed:{classStyle:function(){if(this.growthSign){if(this.up)return"d-growth-up";if(this.down)return"d-growth-down"}return""},arrowClass:function(){if(this.growthSign){if(this.up)return"fa-arrow-up";if(this.down)return"fa-arrow-down"}return""}},methods:{formatValue:function(){if(void 0!==this.value&&null!==this.value)if("num"!==this.showType&&"amt"!==this.showType&&"rate"!==this.showType||(this.up=this.value>=0,this.down=this.value<0),"num"===this.showType)this.spanText=this.prefixSymbol+an(this.value)+this.suffixSymbol;else if("amt"===this.showType){var e="￥";this.prefixSymbol&&(e=this.prefixSymbol),this.spanText=e+an(this.value)+this.suffixSymbol}else if("rate"===this.showType){var t=this.value;this.rate100&&(t=parseFloat((100*this.value).toFixed(2))),this.spanText=t+"%"}else this.spanText=this.prefixSymbol+this.value+this.suffixSymbol;else this.spanText="--"}},watch:{value:function(){this.formatValue()}},mounted:function(){this.formatValue()}},du=su,lu=(a("df6d"),Object(c["a"])(du,nu,ou,!1,null,null,null)),cu=lu.exports,mu={Detail:Vm,Loading:Gm,SubmitCancel:Zm,EditSaveSwitch:ru,FormatValue:cu},uu=[Em,mu],pu={install:function(e){e.prototype.$goBack=function(){F.goBack()},e.prototype.$messageInfo=function(e){F.messageInfo(e)},e.prototype.$messageSuccess=function(e){F.messageSuccess(e)},e.prototype.$messageWarn=function(e){F.messageWarn(e)},e.prototype.$messageError=function(e){F.messageError(e)},e.prototype.$notifyInfo=function(e){F.notifyInfo(e)},e.prototype.$notifySuccess=function(e){F.notifySuccess(e)},e.prototype.$notifyWarn=function(e){F.notifyWarn(e)},e.prototype.$notifyError=function(e){F.notifyError(e)},e.prototype.$alertInfo=function(e){F.alertInfo(e)},e.prototype.$alertSuccess=function(e){F.alertSuccess(e)},e.prototype.$alertWarn=function(e){F.alertWarn(e)},e.prototype.$alertError=function(e){F.alertError(e)},e.prototype.$confirmInfo=function(e,t,a){F.confirmInfo(e,t,a)},e.prototype.$handleError=function(e){console.warn(e)},uu.forEach(function(t){Object.keys(t).forEach(function(a){e.component("D"+a,t[a])})})}};i["default"].config.productionTip=!1,i["default"].use(n.a),i["default"].use(pu),fm.bootstrap();var hu=new i["default"]({render:function(e){return e(u)},router:lc}).$mount("#app"),fu=t["default"]=hu},"62c5":function(e,t,a){"use strict";var i=a("2881"),r=a.n(i);r.a},"64a9":function(e,t,a){},"674e":function(e,t,a){e.exports=a.p+"img/headpic.53d024bc.png"},"67d4":function(e,t,a){"use strict";var i=a("9b96"),r=a.n(i);r.a},"6d33":function(e,t,a){"use strict";var i=a("7b13"),r=a.n(i);r.a},7556:function(e,t,a){"use strict";var i=a("4997"),r=a.n(i);r.a},"7b13":function(e,t,a){},8017:function(e,t,a){"use strict";var i=a("e3cb"),r=a.n(i);r.a},"8f56":function(e,t,a){},"8fae":function(e,t,a){"use strict";var i=a("ae65"),r=a.n(i);r.a},"98f8":function(e,t,a){},"9add":function(e,t,a){"use strict";var i=a("1485"),r=a.n(i);r.a},"9b96":function(e,t,a){},"9cb3":function(e,t,a){},"9df5":function(e,t,a){},abd3:function(e,t,a){"use strict";var i=a("e507"),r=a.n(i);r.a},acc7:function(e,t,a){},ae02:function(e,t,a){"use strict";var i=a("d66c"),r=a.n(i);r.a},ae65:function(e,t,a){},b0df:function(e,t,a){e.exports=a.p+"img/me.3505b4c9.jpg"},b139:function(e,t,a){"use strict";var i=a("2f20"),r=a.n(i);r.a},b179:function(e,t,a){},c174:function(e,t,a){"use strict";var i=a("f277"),r=a.n(i);r.a},c9c1:function(e,t,a){"use strict";var i=a("5158"),r=a.n(i);r.a},d66c:function(e,t,a){},daef:function(e,t,a){},df6d:function(e,t,a){"use strict";var i=a("09ac"),r=a.n(i);r.a},e3cb:function(e,t,a){},e507:function(e,t,a){},e57d:function(e,t,a){"use strict";var i=a("49d2"),r=a.n(i);r.a},f277:function(e,t,a){}});
//# sourceMappingURL=app.6831f019.js.map