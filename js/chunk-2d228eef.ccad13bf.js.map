{"version":3,"sources":["webpack:///./src/pages/data-map/my-tb/manage/index.vue?baef","webpack:///src/pages/data-map/my-tb/manage/index.vue","webpack:///./src/pages/data-map/my-tb/manage/index.vue?481c","webpack:///./src/pages/data-map/my-tb/manage/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","shadow","staticClass","size","clearable","filterable","placeholder","on","change","setTableData","model","value","searchForm","callback","$$v","$set","expression","_l","db","key","id","label","dbName","suffix-icon","data","tableData","prop","scopedSlots","_u","fn","scope","to","row","_v","_s","tbName","width","item","effect","name","dbId","type","click","$event","openGrantUserForm","background","current-page","pageNo","page-sizes","page-size","pageSize","layout","total","current-change","size-change","update:currentPage","update:current-page","update:pageSize","update:page-size","title","currentTb","visible","grantUserFormVisible","update:visible","staticStyle","margin-bottom","float","reserve-keyword","multiple","remote","remote-method","searchUser","selectUser","userNameList","index","userName","userNameCn","icon","addTbUser","span","deleteTbUserById","staticRenderFns","managevue_type_script_lang_js_","isMy","allDbList","tbUserList","searchUserList","methods","clickTab","setAllDbList","_this","Object","db_manage","then","res","catch","$handleError","_this2","tb_manage","setTbUserList","_this3","keyword","_this4","auth_user","filter","d","i","findIndex","u","user","_this5","tbId","unshift","splice","tbUserId","_this6","mounted","my_tb_managevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d228eef.ccad13bf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('el-row',{staticClass:\"d-row d-search-form\"},[_c('el-select',{staticClass:\"item\",attrs:{\"size\":\"small\",\"clearable\":\"\",\"filterable\":\"\",\"placeholder\":\"库名,可搜索\"},on:{\"change\":_vm.setTableData},model:{value:(_vm.searchForm.dbId),callback:function ($$v) {_vm.$set(_vm.searchForm, \"dbId\", $$v)},expression:\"searchForm.dbId\"}},_vm._l((_vm.allDbList),function(db){return _c('el-option',{key:db.id,attrs:{\"value\":db.id,\"label\":db.dbName}})}),1),_c('el-input',{staticClass:\"item\",attrs:{\"size\":\"small\",\"clearable\":\"\",\"placeholder\":\"表关键词搜索\",\"suffix-icon\":\"el-icon-search\"},on:{\"change\":_vm.setTableData},model:{value:(_vm.searchForm.tbName),callback:function ($$v) {_vm.$set(_vm.searchForm, \"tbName\", $$v)},expression:\"searchForm.tbName\"}})],1),_c('el-row',{staticClass:\"d-row\"},[_c('el-table',{attrs:{\"data\":_vm.tableData.data}},[_c('el-table-column',{attrs:{\"prop\":\"tbName\",\"label\":\"表名\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('router-link',{attrs:{\"to\":'/data-map/tb-manage/' + scope.row.id}},[_vm._v(_vm._s(scope.row.tbName))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"tbNameCn\",\"label\":\"中文名\",\"width\":\"300\"}}),_c('el-table-column',{attrs:{\"prop\":\"tagList\",\"label\":\"标签\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"d-tag-group\"},_vm._l((scope.row.tagList),function(item){return _c('el-tag',{key:item.id,attrs:{\"size\":\"mini\",\"effect\":\"plain\"}},[_vm._v(_vm._s(item.name))])}),1)]}}])}),_c('el-table-column',{attrs:{\"prop\":\"dbName\",\"label\":\"数据库\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('router-link',{attrs:{\"to\":'/data-map/db-manage/' + scope.row.dbId}},[_vm._v(_vm._s(scope.row.dbName))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"250\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.openGrantUserForm(scope.row)}}},[_vm._v(\"授权用户\")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"}},[_vm._v(\"编辑\")])]}}])})],1)],1),_c('el-row',{staticClass:\"d-right-pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.pageNo,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next\",\"total\":_vm.tableData.total},on:{\"current-change\":_vm.setTableData,\"size-change\":_vm.setTableData,\"update:currentPage\":function($event){_vm.pageNo=$event},\"update:current-page\":function($event){_vm.pageNo=$event},\"update:pageSize\":function($event){_vm.pageSize=$event},\"update:page-size\":function($event){_vm.pageSize=$event}}})],1),_c('el-dialog',{attrs:{\"title\":'授权用户表：' + _vm.currentTb.dbName + '.' + _vm.currentTb.tbName,\"visible\":_vm.grantUserFormVisible},on:{\"update:visible\":function($event){_vm.grantUserFormVisible=$event}}},[_c('el-row',{staticStyle:{\"margin-bottom\":\"20px\"}},[_c('el-select',{staticStyle:{\"float\":\"right\",\"width\":\"220px\"},attrs:{\"filterable\":\"\",\"reserve-keyword\":\"\",\"multiple\":\"\",\"remote\":\"\",\"placeholder\":\"请输入用户名或姓名,搜索添加\",\"size\":\"small\",\"remote-method\":_vm.searchUser},on:{\"change\":_vm.selectUser},model:{value:(_vm.userNameList),callback:function ($$v) {_vm.userNameList=$$v},expression:\"userNameList\"}},_vm._l((_vm.searchUserList),function(item,index){return _c('el-option',{key:item.userName,attrs:{\"label\":item.userNameCn,\"value\":item.userName}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.userNameCn)+\"(\"+_vm._s(item.userName)+\")\")]),_c('span',{staticStyle:{\"float\":\"right\"}},[_c('el-button',{attrs:{\"type\":\"text\",\"title\":\"添加用户\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.addTbUser(item, index)}}})],1)])}),1)],1),_c('el-row',_vm._l((_vm.tbUserList),function(item,index){return _c('el-col',{key:item.id,staticClass:\"d-hover-btn\",attrs:{\"span\":6}},[_c('span',[_vm._v(_vm._s(item.userNameCn)+\"(\"+_vm._s(item.userName)+\")\")]),_c('el-button',{attrs:{\"type\":\"text\",\"title\":\"删除用户\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.deleteTbUserById(item.id, index)}}})],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-card shadow=\"never\">\r\n        <el-row class=\"d-row d-search-form\">\r\n            <el-select size=\"small\"\r\n                       clearable\r\n                       filterable\r\n                       placeholder=\"库名,可搜索\"\r\n                       class=\"item\"\r\n                       v-model=\"searchForm.dbId\"\r\n                       @change=\"setTableData\">\r\n                <el-option v-for=\"db in allDbList\" :key=\"db.id\" :value=\"db.id\" :label=\"db.dbName\">\r\n                    <!--<span style=\"float: left\">{{ db.dbName }}</span>-->\r\n                    <!--<span style=\"float: right; color: #8492a6; font-size: 13px\">{{ db.id }}</span>-->\r\n                </el-option>\r\n            </el-select>\r\n            <el-input size=\"small\"\r\n                      clearable\r\n                      placeholder=\"表关键词搜索\"\r\n                      suffix-icon=\"el-icon-search\"\r\n                      class=\"item\"\r\n                      v-model=\"searchForm.tbName\"\r\n                      @change=\"setTableData\"></el-input>\r\n        </el-row>\r\n        <el-row class=\"d-row\">\r\n            <el-table\r\n                    :data=\"tableData.data\">\r\n                <el-table-column\r\n                        prop=\"tbName\"\r\n                        label=\"表名\">\r\n                    <template slot-scope=\"scope\">\r\n                        <router-link :to=\"'/data-map/tb-manage/' + scope.row.id\">{{ scope.row.tbName }}</router-link>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"tbNameCn\"\r\n                        label=\"中文名\"\r\n                        width=\"300\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"tagList\"\r\n                        label=\"标签\"\r\n                        width=\"200\">\r\n                    <template slot-scope=\"scope\">\r\n                        <div class=\"d-tag-group\">\r\n                            <el-tag size=\"mini\" effect=\"plain\" v-for=\"item in scope.row.tagList\" :key=\"item.id\">{{item.name}}</el-tag>\r\n                        </div>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"dbName\"\r\n                        label=\"数据库\"\r\n                        width=\"200\">\r\n                    <template slot-scope=\"scope\">\r\n                        <router-link :to=\"'/data-map/db-manage/' + scope.row.dbId\">{{ scope.row.dbName }}</router-link>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                label=\"操作\"\r\n                width=\"250\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button type=\"text\" size=\"mini\" @click=\"openGrantUserForm(scope.row)\">授权用户</el-button>\r\n                        <el-button type=\"text\" size=\"mini\">编辑</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-row>\r\n        <el-row class=\"d-right-pagination\">\r\n            <el-pagination\r\n                    @current-change=\"setTableData\"\r\n                    @size-change=\"setTableData\"\r\n                    background\r\n                    :current-page.sync=\"pageNo\"\r\n                    :page-sizes=\"[10, 20, 50, 100]\"\r\n                    :page-size.sync=\"pageSize\"\r\n                    layout=\"total, sizes, prev, pager, next\"\r\n                    :total=\"tableData.total\">\r\n            </el-pagination>\r\n        </el-row>\r\n        <el-dialog :title=\"'授权用户表：' + currentTb.dbName + '.' + currentTb.tbName\"\r\n                   :visible.sync=\"grantUserFormVisible\">\r\n            <el-row style=\"margin-bottom: 20px\">\r\n                <el-select filterable\r\n                           reserve-keyword\r\n                           multiple\r\n                           remote\r\n                           placeholder=\"请输入用户名或姓名,搜索添加\"\r\n                           size=\"small\"\r\n                           v-model=\"userNameList\"\r\n                           @change=\"selectUser\"\r\n                           :remote-method=\"searchUser\"\r\n                           style=\"float: right;width: 220px\">\r\n                    <el-option\r\n                            v-for=\"(item, index) in searchUserList\"\r\n                            :key=\"item.userName\"\r\n                            :label=\"item.userNameCn\"\r\n                            :value=\"item.userName\">\r\n                        <span style=\"float: left\">{{ item.userNameCn }}({{item.userName}})</span>\r\n                        <span style=\"float: right\">\r\n                            <el-button type=\"text\"\r\n                                       title=\"添加用户\"\r\n                                       icon=\"el-icon-plus\"\r\n                                       @click=\"addTbUser(item, index)\"></el-button>\r\n                        </span>\r\n                    </el-option>\r\n                </el-select>\r\n            </el-row>\r\n            <el-row>\r\n                <el-col :span=\"6\"\r\n                        v-for=\"(item, index) in tbUserList\"\r\n                        :key=\"item.id\"\r\n                        class=\"d-hover-btn\">\r\n                    <span>{{item.userNameCn}}({{item.userName}})</span>\r\n                    <el-button type=\"text\"\r\n                               title=\"删除用户\"\r\n                               icon=\"el-icon-delete\"\r\n                               @click=\"deleteTbUserById(item.id, index)\"></el-button>\r\n                </el-col>\r\n            </el-row>\r\n        </el-dialog>\r\n    </el-card>\r\n</template>\r\n\r\n<script>\r\n    import {\r\n        listMyTbManage,\r\n        listTbUser,\r\n        addTbUser,\r\n        deleteTbUser\r\n    } from '../../../../services/data-map/tb-manage'\r\n    import {\r\n        listAllDb\r\n    } from '../../../../services/data-map/db-manage'\r\n    import {\r\n        searchUser\r\n    } from '../../../../services/auth/user'\r\n    export default {\r\n        name: 'DMyTbManage',\r\n        data () {\r\n            return {\r\n                isMy: true,\r\n                searchForm: {\r\n                    dbId: '',\r\n                    tbName: ''\r\n                },\r\n                pageNo: 1,\r\n                pageSize: 10,\r\n                tableData: {},\r\n                allDbList: [],\r\n                currentTb: {},\r\n                grantUserFormVisible: false,\r\n                tbUserList: [],\r\n                searchUserList: [],\r\n                userNameList: []\r\n            }\r\n        },\r\n        methods: {\r\n            clickTab (isMy) {\r\n                this.isMy = isMy\r\n            },\r\n            setAllDbList () {\r\n                listAllDb().then(res => {\r\n                    this.allDbList = res.data\r\n                }).catch(this.$handleError)\r\n            },\r\n            setTableData () {\r\n                listMyTbManage({\r\n                    dbId: this.searchForm.dbId,\r\n                    tbName: this.searchForm.tbName,\r\n                    pageNo: this.pageNo,\r\n                    pageSize: this.pageSize\r\n                }).then(res => {\r\n                    this.tableData = res.data\r\n                }).catch(this.$handleError)\r\n            },\r\n            openGrantUserForm (row) {\r\n                this.grantUserFormVisible = true\r\n                this.currentTb = row\r\n                this.setTbUserList()\r\n            },\r\n            setTbUserList () {\r\n                listTbUser({\r\n                    id: this.currentTb.id\r\n                }).then(res => {\r\n                    this.tbUserList = res.data\r\n                }).catch(this.$handleError)\r\n            },\r\n            searchUser (keyword) {\r\n                if (keyword) {\r\n                    searchUser({\r\n                        keyword: keyword\r\n                    }).then(res => {\r\n                        this.searchUserList = res.data.filter(d => {\r\n                            let i = this.tbUserList.findIndex(u => u.userName === d.userName)\r\n                            return i === -1\r\n                        })\r\n                    }).catch(this.$handleError)\r\n                }\r\n            },\r\n            addTbUser (user, index) {\r\n                addTbUser({\r\n                    tbId: this.currentTb.id,\r\n                    userName: user.userName,\r\n                    userNameCn: user.userNameCn\r\n                }).then(res => {\r\n                    this.tbUserList.unshift({\r\n                        id: res.data,\r\n                        userName: user.userName,\r\n                        userNameCn: user.userNameCn\r\n                    })\r\n                    this.searchUserList.splice(index, 1)\r\n                }).catch(this.$handleError)\r\n            },\r\n            deleteTbUserById (tbUserId, index) {\r\n                deleteTbUser({\r\n                    tbUserId: tbUserId\r\n                }).then(res => {\r\n                    this.tbUserList.splice(index, 1)\r\n                }).catch(this.$handleError)\r\n            },\r\n            selectUser () {\r\n                this.userNameList = []\r\n            }\r\n        },\r\n        mounted () {\r\n            this.setAllDbList()\r\n            this.setTableData()\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=920e8f36&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}