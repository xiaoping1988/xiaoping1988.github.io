(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47c66e68"],{"41ff":function(t,a,e){"use strict";var i=e("4472"),l=e.n(i);l.a},4472:function(t,a,e){},de93:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("DPageContent",[e("el-row",{staticClass:"d-row"},[e("DPageHeader",{attrs:{title:t.api.name,hasBack:""}})],1),e("el-row",[e("el-col",{staticClass:"d-col",attrs:{span:8}},[e("el-card",{attrs:{shadow:"never"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"d-card-title"},[t._v("基础信息")])]),e("DDetail",{attrs:{data:t.api,columns:t.detailColumns,col:1}})],1)],1),e("el-col",{staticClass:"d-col",attrs:{span:16}},[e("el-row",{staticClass:"d-row"},[e("el-card",{attrs:{shadow:"never"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"d-card-title"},[t._v("调用趋势")])]),e("el-row",{staticClass:"d-row"},[e("div",{staticStyle:{float:"left"}},[e("el-radio-group",{attrs:{size:"mini"},on:{change:t.setSumChartData},model:{value:t.timePeriodValue,callback:function(a){t.timePeriodValue=a},expression:"timePeriodValue"}},t._l(t.timePeriodList,function(a){return e("el-radio-button",{key:a.code,attrs:{label:a.code}},[t._v(t._s(a.name))])}),1)],1),e("div",{staticStyle:{float:"right"}},[e("el-radio-group",{attrs:{size:"mini"},on:{change:t.setSumChartData},model:{value:t.timeFreqValue,callback:function(a){t.timeFreqValue=a},expression:"timeFreqValue"}},t._l(t.timeFreqList,function(a){return e("el-radio-button",{key:a.code,attrs:{label:a.code}},[t._v(t._s(a.name))])}),1)],1)]),e("el-row",{staticClass:"d-row"},[e("div",{staticClass:"d-call-chart d-box-middle"},[t.sumChartData.length?e("DChartFactory",{attrs:{meta:t.chartMeta,data:t.sumChartData,id:"sumCall"}}):e("div",{staticClass:"d-no-data-tip"},[t._v("\n                                暂无API调用数据\n                            ")])],1)])],1)],1),e("el-row",{staticClass:"d-row"},[e("el-card",{attrs:{shadow:"never"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"d-card-title"},[t._v("已授权的应用列表")])]),e("el-table",{attrs:{data:t.api.appList}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e("el-table-column",{attrs:{prop:"name",label:"应用名称"}}),e("el-table-column",{attrs:{prop:"callCnt7",label:"近7天调用次数",width:"120"}}),e("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.openAppChart(a.row)}}},[t._v("调用趋势")])]}}])})],1)],1)],1)],1)],1),e("el-dialog",{attrs:{title:"应用[ "+t.app.name+" ]的调用趋势",visible:t.showAppChartModal},on:{"update:visible":function(a){t.showAppChartModal=a}}},[e("el-row",{staticClass:"d-row"},[e("div",{staticStyle:{float:"left"}},[e("el-radio-group",{attrs:{size:"mini"},on:{change:t.setAppChartData},model:{value:t.appTimePeriodValue,callback:function(a){t.appTimePeriodValue=a},expression:"appTimePeriodValue"}},t._l(t.timePeriodList,function(a){return e("el-radio-button",{key:a.code,attrs:{label:a.code}},[t._v(t._s(a.name))])}),1)],1),e("div",{staticStyle:{float:"right"}},[e("el-radio-group",{attrs:{size:"mini"},on:{change:t.setAppChartData},model:{value:t.appTimeFreqValue,callback:function(a){t.appTimeFreqValue=a},expression:"appTimeFreqValue"}},t._l(t.timeFreqList,function(a){return e("el-radio-button",{key:a.code,attrs:{label:a.code}},[t._v(t._s(a.name))])}),1)],1)]),e("el-row",{staticClass:"d-row"},[e("div",{staticClass:"d-call-chart d-box-middle"},[t.appChartData.length?e("DChartFactory",{attrs:{meta:t.chartMeta,data:t.appChartData,id:"appCall"}}):e("div",{staticClass:"d-no-data-tip"},[t._v("\n                    暂无API调用数据\n                ")])],1)])],1)],1)},l=[],r=e("5742"),s=e("4cfb"),o=e("fa1c"),d={name:"DApiDevDetail",components:{DChartFactory:s["a"]},data:function(){return{apiId:this.$route.params.id,api:{},detailColumns:[{key:"id",title:"API ID"},{key:"name",title:"名称"},{key:"releaseCnt",title:"发布次数"},{key:"callCnt7",title:"近7天调用次数"},{key:"remark",title:"描述"},{key:"creator",title:"创建人"},{key:"createTime",title:"创建时间"},{key:"updator",title:"最后修改人"},{key:"updateTime",title:"最后修改时间"}],timePeriodValue:7,timePeriodList:[{code:7,name:"近一周"},{code:30,name:"近一月"},{code:180,name:"近半年"}],timeFreqValue:"DAY",timeFreqList:[{code:"HOUR",name:"小时"},{code:"DAY",name:"日"},{code:"WEEK",name:"周"}],chartMeta:{chartType:"LINE_BAR",columns:[{key:"dt",name:"日期",showType:"text",dataType:"date",dim:!0},{key:"callCnt",name:"调用次数",showType:"num",unit:"",type:"line",dim:!1}],area:!0},sumChartData:[],appChartData:[],showAppChartModal:!1,app:{},appTimePeriodValue:7,appTimeFreqValue:"DAY"}},methods:{setApi:function(){var t=this;Object(r["c"])({id:this.apiId}).then(function(a){t.api=a.data}).catch(this.$handleError),this.setSumChartData()},setSumChartData:function(){var t=this,a=o["a"].formatDate(new Date,"yyyyMMdd");Object(r["d"])({startDate:o["a"].addDate(a,0-this.timePeriodValue,"yyyyMMdd"),endDate:a,timeFreq:this.timeFreqValue,apiId:this.apiId}).then(function(a){t.sumChartData=a.data}).catch(this.$handleError)},openAppChart:function(t){this.app=t,this.showAppChartModal=!0,this.appTimeFreqValue="DAY",this.appTimePeriodValue=7,this.setAppChartData()},setAppChartData:function(){var t=this,a=o["a"].formatDate(new Date,"yyyyMMdd");Object(r["d"])({startDate:o["a"].addDate(a,0-this.appTimePeriodValue,"yyyyMMdd"),endDate:a,timeFreq:this.appTimeFreqValue,apiId:this.apiId,appId:this.app.id}).then(function(a){t.appChartData=a.data}).catch(this.$handleError)}},mounted:function(){this.setApi()}},n=d,c=(e("41ff"),e("2877")),p=Object(c["a"])(n,i,l,!1,null,null,null);a["default"]=p.exports}}]);
//# sourceMappingURL=chunk-47c66e68.86b27e1a.js.map