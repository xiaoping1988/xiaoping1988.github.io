{"version":3,"sources":["webpack:///./src/pages/data-api/app/index.vue?1700","webpack:///src/pages/data-api/app/index.vue","webpack:///./src/pages/data-api/app/index.vue?956b","webpack:///./src/pages/data-api/app/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","shadow","inline","suffix-icon","size","clearable","placeholder","model","value","callback","$$v","keyword","trim","expression","staticStyle","float","icon","type","on","click","openAddAppFormModal","_v","data","tableData","prop","label","width","scopedSlots","_u","key","fn","scope","to","row","id","_s","name","staticClass","_l","item","index","effect","userNameCn","userName","$event","openUpdateAppFormModal","deleteApp","openOwner","title","appForm","visible","showAppFormModal","update:visible","ref","rules","appFormRule","label-width","$set","rows","slot","nohr","submit","submitAppForm","cancel","currentApp","showAppOwnerModal","margin-bottom","filterable","reserve-keyword","multiple","remote","remote-method","searchUser","change","selectUser","userNameList","addAppOwner","span","deleteAppOwnerById","staticRenderFns","appvue_type_script_lang_js_","appList","loading","code","remark","required","message","trigger","pattern","searchUserList","methods","setAppList","_this","Object","data_api_app","then","res","searchApp","catch","$handleError","_this2","filter","a","includes","toUpperCase","app","_this3","$refs","validate","valid","msg","vue","$confirmInfo","appOwnerId","_this4","ownerList","splice","_this5","auth_user","d","i","findIndex","u","user","_this6","appId","unshift","watch","mounted","data_api_appvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d221a71.68e432b3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('DPageContent',[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('el-form',{attrs:{\"inline\":\"\"}},[_c('el-form-item',[_c('el-input',{attrs:{\"suffix-icon\":\"el-icon-search\",\"size\":\"mini\",\"clearable\":\"\",\"placeholder\":\"请输入关键字搜索\"},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"keyword\"}})],1),_c('el-form-item',{staticStyle:{\"float\":\"right\"}},[_c('el-button',{attrs:{\"icon\":\"el-icon-plus\",\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.openAddAppFormModal}},[_vm._v(\"注册新应用\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('router-link',{attrs:{\"to\":'/data-api/app/' + scope.row.id}},[_vm._v(_vm._s(scope.row.name))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"code\",\"label\":\"编码\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"accessKey\",\"width\":\"220\",\"label\":\"accessKey\"}}),_c('el-table-column',{attrs:{\"prop\":\"ownerList\",\"width\":\"220\",\"label\":\"负责人\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"d-tag-group\"},_vm._l((scope.row.ownerList),function(item,index){return _c('el-tag',{key:index,attrs:{\"size\":\"mini\",\"effect\":\"plain\"}},[_vm._v(\"\\n                            \"+_vm._s(item.userNameCn)+\"(\"+_vm._s(item.userName)+\")\\n                        \")])}),1)]}}])}),_c('el-table-column',{attrs:{\"prop\":\"remark\",\"label\":\"描述\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"170\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.openUpdateAppFormModal(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteApp(scope.row)}}},[_vm._v(\"删除\")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.openOwner(scope.row)}}},[_vm._v(\"配置负责人\")])]}}])})],1)],1),_c('el-dialog',{attrs:{\"title\":_vm.appForm.id ? '编辑应用' : '注册新应用',\"visible\":_vm.showAppFormModal},on:{\"update:visible\":function($event){_vm.showAppFormModal=$event}}},[_c('el-form',{ref:\"appForm\",attrs:{\"model\":_vm.appForm,\"rules\":_vm.appFormRule,\"size\":\"mini\",\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.appForm.name),callback:function ($$v) {_vm.$set(_vm.appForm, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"appForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"编码\",\"prop\":\"code\"}},[_c('el-input',{attrs:{\"placeholder\":\"字母开头,只能包含字母、数字、下划线\"},model:{value:(_vm.appForm.code),callback:function ($$v) {_vm.$set(_vm.appForm, \"code\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"appForm.code\"}})],1),_c('el-form-item',{attrs:{\"label\":\"描述\",\"prop\":\"remark\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":\"4\"},model:{value:(_vm.appForm.remark),callback:function ($$v) {_vm.$set(_vm.appForm, \"remark\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"appForm.remark\"}})],1)],1),_c('DSubmitCancel',{attrs:{\"slot\":\"footer\",\"nohr\":\"\",\"size\":\"mini\"},on:{\"submit\":_vm.submitAppForm,\"cancel\":function($event){_vm.showAppFormModal = false}},slot:\"footer\"})],1),_c('el-dialog',{attrs:{\"title\":'变更应用[ ' + _vm.currentApp.name + ' ]的Owner',\"visible\":_vm.showAppOwnerModal},on:{\"update:visible\":function($event){_vm.showAppOwnerModal=$event}}},[_c('el-row',{staticStyle:{\"margin-bottom\":\"20px\"}},[_c('el-select',{staticStyle:{\"float\":\"right\",\"width\":\"220px\"},attrs:{\"filterable\":\"\",\"reserve-keyword\":\"\",\"multiple\":\"\",\"remote\":\"\",\"placeholder\":\"请输入用户名或姓名,搜索添加\",\"size\":\"mini\",\"remote-method\":_vm.searchUser},on:{\"change\":_vm.selectUser},model:{value:(_vm.userNameList),callback:function ($$v) {_vm.userNameList=$$v},expression:\"userNameList\"}},_vm._l((_vm.searchUserList),function(item,index){return _c('el-option',{key:item.userName,attrs:{\"label\":item.userNameCn,\"value\":item.userName}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.userNameCn)+\"(\"+_vm._s(item.userName)+\")\")]),_c('span',{staticStyle:{\"float\":\"right\"}},[_c('el-button',{attrs:{\"type\":\"text\",\"title\":\"添加用户\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.addAppOwner(item, index)}}})],1)])}),1)],1),_c('el-row',_vm._l((_vm.currentApp.ownerList),function(item,index){return _c('el-col',{key:item.id,staticClass:\"d-hover-btn\",attrs:{\"span\":6}},[_c('span',[_vm._v(_vm._s(item.userNameCn)+\"(\"+_vm._s(item.userName)+\")\")]),_c('el-button',{attrs:{\"type\":\"text\",\"title\":\"删除用户\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.deleteAppOwnerById(item, index)}}})],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <DPageContent>\r\n        <el-card shadow=\"never\">\r\n            <el-form inline>\r\n                <el-form-item>\r\n                    <el-input suffix-icon=\"el-icon-search\"\r\n                              size=\"mini\"\r\n                              clearable\r\n                              v-model.trim=\"keyword\"\r\n                              placeholder=\"请输入关键字搜索\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item style=\"float: right\">\r\n                    <el-button icon=\"el-icon-plus\" type=\"primary\" size=\"mini\" @click=\"openAddAppFormModal\">注册新应用</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n            <el-table\r\n                    :data=\"tableData\">\r\n                <el-table-column\r\n                        prop=\"name\"\r\n                        label=\"名称\"\r\n                        width=\"180\">\r\n                    <template slot-scope=\"scope\">\r\n                        <router-link :to=\"'/data-api/app/' + scope.row.id\">{{ scope.row.name }}</router-link>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"code\"\r\n                        label=\"编码\"\r\n                        width=\"200\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"accessKey\"\r\n                        width=\"220\"\r\n                        label=\"accessKey\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"ownerList\"\r\n                        width=\"220\"\r\n                        label=\"负责人\">\r\n                    <template slot-scope=\"scope\">\r\n                        <div class=\"d-tag-group\">\r\n                            <el-tag size=\"mini\" effect=\"plain\" v-for=\"(item, index) in scope.row.ownerList\" :key=\"index\">\r\n                                {{item.userNameCn}}({{item.userName}})\r\n                            </el-tag>\r\n                        </div>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"remark\"\r\n                        label=\"描述\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        label=\"操作\"\r\n                        width=\"170\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button type=\"text\" size=\"mini\" @click=\"openUpdateAppFormModal(scope.row)\">编辑</el-button>\r\n                        <el-button type=\"text\" size=\"mini\" @click=\"deleteApp(scope.row)\">删除</el-button>\r\n                        <el-button type=\"text\" size=\"mini\" @click=\"openOwner(scope.row)\">配置负责人</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-card>\r\n        <el-dialog :title=\"appForm.id ? '编辑应用' : '注册新应用'\"\r\n                   :visible.sync=\"showAppFormModal\">\r\n            <el-form :model=\"appForm\"\r\n                     :rules=\"appFormRule\"\r\n                     size=\"mini\"\r\n                     ref=\"appForm\"\r\n                     label-width=\"80px\">\r\n                <el-form-item label=\"名称\" prop=\"name\">\r\n                    <el-input v-model.trim=\"appForm.name\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"编码\" prop=\"code\">\r\n                    <el-input v-model.trim=\"appForm.code\" placeholder=\"字母开头,只能包含字母、数字、下划线\">\r\n                    </el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"描述\" prop=\"remark\">\r\n                    <el-input type=\"textarea\" rows=\"4\" v-model.trim=\"appForm.remark\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <DSubmitCancel slot=\"footer\" nohr @submit=\"submitAppForm\" @cancel=\"showAppFormModal = false\" size=\"mini\"></DSubmitCancel>\r\n        </el-dialog>\r\n        <el-dialog :title=\"'变更应用[ ' + currentApp.name + ' ]的Owner'\"\r\n                   :visible.sync=\"showAppOwnerModal\">\r\n            <el-row style=\"margin-bottom: 20px\">\r\n                <el-select filterable\r\n                           reserve-keyword\r\n                           multiple\r\n                           remote\r\n                           placeholder=\"请输入用户名或姓名,搜索添加\"\r\n                           size=\"mini\"\r\n                           v-model=\"userNameList\"\r\n                           @change=\"selectUser\"\r\n                           :remote-method=\"searchUser\"\r\n                           style=\"float: right;width: 220px\">\r\n                    <el-option\r\n                            v-for=\"(item, index) in searchUserList\"\r\n                            :key=\"item.userName\"\r\n                            :label=\"item.userNameCn\"\r\n                            :value=\"item.userName\">\r\n                        <span style=\"float: left\">{{ item.userNameCn }}({{item.userName}})</span>\r\n                        <span style=\"float: right\">\r\n                            <el-button type=\"text\"\r\n                                       title=\"添加用户\"\r\n                                       icon=\"el-icon-plus\"\r\n                                       @click=\"addAppOwner(item, index)\"></el-button>\r\n                        </span>\r\n                    </el-option>\r\n                </el-select>\r\n            </el-row>\r\n            <el-row>\r\n                <el-col :span=\"6\"\r\n                        v-for=\"(item, index) in currentApp.ownerList\"\r\n                        :key=\"item.id\"\r\n                        class=\"d-hover-btn\">\r\n                    <span>{{item.userNameCn}}({{item.userName}})</span>\r\n                    <el-button type=\"text\"\r\n                               title=\"删除用户\"\r\n                               icon=\"el-icon-delete\"\r\n                               @click=\"deleteAppOwnerById(item, index)\"></el-button>\r\n                </el-col>\r\n            </el-row>\r\n        </el-dialog>\r\n    </DPageContent>\r\n</template>\r\n\r\n<script>\r\n    import {\r\n        searchUser\r\n    } from '../../../services/auth/user'\r\n    import {listMyApp, addOrUpdate, addOwner, deleteById, deleteOwner} from '../../../services/data-api/app'\r\n    export default {\r\n        name: 'DApp',\r\n        data () {\r\n            return {\r\n                tableData: [],\r\n                keyword: '',\r\n                appList: [],\r\n                loading: false,\r\n                showAppFormModal: false,\r\n                appForm: {\r\n                    id: '',\r\n                    name: '',\r\n                    code: '',\r\n                    remark: ''\r\n                },\r\n                appFormRule: {\r\n                    name: [\r\n                        { required: true, message: '请输入名称', trigger: 'blur' }\r\n                    ],\r\n                    code: [\r\n                        { required: true, message: '请输入编码', trigger: 'blur' },\r\n                        { type: 'string', pattern: /^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$/, message: '字母开头,只能包含字母、数字、下划线', trigger: 'blur' }\r\n                    ]\r\n                },\r\n                showAppOwnerModal: false,\r\n                currentApp: {},\r\n                searchUserList: [],\r\n                userNameList: []\r\n            }\r\n        },\r\n        methods: {\r\n            setAppList () {\r\n                this.keyword = ''\r\n                listMyApp().then(res => {\r\n                    this.appList = res.data\r\n                    this.searchApp()\r\n                }).catch(this.$handleError)\r\n            },\r\n            searchApp () {\r\n                if (this.keyword) {\r\n                    this.tableData = this.appList.filter(a => a.name.includes(this.keyword) || a.code.includes(this.keyword.toUpperCase()) || a.remark.includes(this.keyword))\r\n                } else {\r\n                    this.tableData = this.appList\r\n                }\r\n            },\r\n            openAddAppFormModal () {\r\n                this.showAppFormModal = true\r\n                this.appForm = {\r\n                    name: '',\r\n                    code: '',\r\n                    remark: ''\r\n                }\r\n            },\r\n            openUpdateAppFormModal (app) {\r\n                this.showAppFormModal = true\r\n                this.appForm = {\r\n                    id: app.id,\r\n                    name: app.name,\r\n                    code: app.code,\r\n                    remark: app.remark\r\n                }\r\n            },\r\n            submitAppForm () {\r\n                this.$refs['appForm'].validate((valid) => {\r\n                    if (valid) {\r\n                        addOrUpdate(this.appForm).then(res => {\r\n                            this.showAppFormModal = false\r\n                            this.setAppList()\r\n                        }).catch(this.$handleError)\r\n                    } else {\r\n                        return false\r\n                    }\r\n                })\r\n            },\r\n            deleteApp (app) {\r\n                let msg = '确认删除应用<strong class=\"d-error\">\"' + app.name + '\"</strong>吗?'\r\n                let vue = this\r\n                vue.$confirmInfo(msg, function () {\r\n                    deleteById({\r\n                        id: app.id\r\n                    }).then(res => {\r\n                        vue.setAppList()\r\n                    }).catch(vue.$handleError)\r\n                })\r\n            },\r\n            openOwner (app) {\r\n                this.showAppOwnerModal = true\r\n                this.currentApp = app\r\n            },\r\n            deleteAppOwnerById (appOwnerId, index) {\r\n                deleteOwner({\r\n                    appOwnerId: appOwnerId\r\n                }).then(res => {\r\n                    this.currentApp.ownerList.splice(index, 1)\r\n                }).catch(this.$handleError)\r\n            },\r\n            searchUser (keyword) {\r\n                if (keyword) {\r\n                    searchUser({\r\n                        keyword: keyword\r\n                    }).then(res => {\r\n                        this.searchUserList = res.data.filter(d => {\r\n                            let i = this.currentApp.ownerList.findIndex(u => u.userName === d.userName)\r\n                            return i === -1\r\n                        })\r\n                    }).catch(this.$handleError)\r\n                }\r\n            },\r\n            addAppOwner (user, index) {\r\n                addOwner({\r\n                    appId: this.currentApp.id,\r\n                    userName: user.userName,\r\n                    userNameCn: user.userNameCn\r\n                }).then(res => {\r\n                    this.currentApp.ownerList.unshift({\r\n                        id: res.data,\r\n                        appId: this.currentApp.id,\r\n                        userName: user.userName,\r\n                        userNameCn: user.userNameCn\r\n                    })\r\n                    this.searchUserList.splice(index, 1)\r\n                }).catch(this.$handleError)\r\n            },\r\n            selectUser () {\r\n                this.userNameList = []\r\n            }\r\n        },\r\n        watch: {\r\n            keyword () {\r\n                this.searchApp()\r\n            }\r\n        },\r\n        mounted () {\r\n            this.setAppList()\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=582b7280&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}