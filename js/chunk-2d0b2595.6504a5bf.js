(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2595"],{2474:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-card",{attrs:{shadow:"never"}},[a("el-row",{staticClass:"d-row d-search-form"},[a("el-select",{staticClass:"item",attrs:{size:"small",clearable:"",filterable:"",placeholder:"库名,可搜索"},on:{change:e.setTableData},model:{value:e.searchForm.dbId,callback:function(t){e.$set(e.searchForm,"dbId",t)},expression:"searchForm.dbId"}},e._l(e.allDbList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.dbName}})}),1),a("el-input",{staticClass:"item",attrs:{size:"small",clearable:"",placeholder:"表关键词搜索","suffix-icon":"el-icon-search"},on:{change:e.setTableData},model:{value:e.searchForm.tbName,callback:function(t){e.$set(e.searchForm,"tbName",t)},expression:"searchForm.tbName"}})],1),a("el-row",{staticClass:"d-row"},[a("el-table",{ref:"table",attrs:{data:e.tableData.data},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",selectable:function(e,t){return!e.hasAuth}}}),a("el-table-column",{attrs:{prop:"tbName",label:"表名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/data-map/tb-manage/"+t.row.id}},[e._v(e._s(t.row.tbName))])]}}])}),a("el-table-column",{attrs:{prop:"tbNameCn",label:"中文名",width:"300"}}),a("el-table-column",{attrs:{prop:"tagList",label:"标签",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"d-tag-group"},e._l(t.row.tagList,function(t){return a("el-tag",{key:t.id,attrs:{size:"mini",effect:"plain"}},[e._v(e._s(t.name))])}),1)]}}])}),a("el-table-column",{attrs:{prop:"dbName",label:"数据库",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/data-map/db-manage/"+t.row.dbId}},[e._v(e._s(t.row.dbName))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hasAuth?e._e():a("el-button",{attrs:{type:"text",size:"mini"}},[e._v("申请权限")]),t.row.hasAuth?a("el-button",{attrs:{disabled:"",type:"text",size:"mini"}},[e._v("已有权限")]):e._e()]}}])})],1)],1),a("el-row",[a("div",[a("div",{staticStyle:{float:"left"}},[a("el-checkbox",{staticStyle:{"margin-left":"14px"},on:{change:e.changeDownCheck},model:{value:e.downCheckAll,callback:function(t){e.downCheckAll=t},expression:"downCheckAll"}}),a("el-button",{attrs:{size:"mini"}},[e._v("申请权限")])],1),a("div",{staticStyle:{float:"right"}},[a("el-pagination",{attrs:{background:"","current-page":e.pageNo,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.tableData.total},on:{"current-change":e.setTableData,"size-change":e.setTableData,"update:currentPage":function(t){e.pageNo=t},"update:current-page":function(t){e.pageNo=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)])])],1)],1)},n=[],s=a("8a52"),i=a("1fc3"),o={name:"DTbManage",data:function(){return{isMy:!0,searchForm:{dbId:"",tbName:""},pageNo:1,pageSize:10,tableData:{},allDbList:[],downCheckAll:!1,selectTbIdList:[]}},methods:{clickTab:function(e){this.isMy=e},setAllDbList:function(){var e=this;Object(i["c"])().then(function(t){e.allDbList=t.data}).catch(this.$handleError)},setTableData:function(){var e=this;this.downCheckAll=!1,Object(s["j"])({dbId:this.searchForm.dbId,tbName:this.searchForm.tbName,pageNo:this.pageNo,pageSize:this.pageSize}).then(function(t){e.tableData=t.data}).catch(this.$handleError)},changeDownCheck:function(){this.downCheckAll?this.$refs.table.toggleAllSelection():this.$refs.table.clearSelection()},handleSelectionChange:function(e){this.selectTbIdList=e.map(function(e){return e.id}),this.downCheckAll=e.length===this.tableData.data.filter(function(e){return!e.hasAuth}).length}},mounted:function(){this.setAllDbList(),this.setTableData()}},r=o,c=a("2877"),u=Object(c["a"])(r,l,n,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0b2595.6504a5bf.js.map