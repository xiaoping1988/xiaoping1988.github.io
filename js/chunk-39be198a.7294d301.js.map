{"version":3,"sources":["webpack:///./src/pages/data-map/tb-manage/PreviewTable.vue?9a5a","webpack:///src/pages/data-map/tb-manage/PreviewTable.vue","webpack:///./src/pages/data-map/tb-manage/PreviewTable.vue?eb7e","webpack:///./src/pages/data-map/tb-manage/PreviewTable.vue","webpack:///./src/pages/data-map/tb-manage/detail.vue?d785","webpack:///src/pages/data-map/tb-manage/detail.vue","webpack:///./src/pages/data-map/tb-manage/detail.vue?19bb","webpack:///./src/pages/data-map/tb-manage/detail.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","previewData","data","length","lastDataModifiedTime","attrs","height","width","_l","col","key","colName","prop","label","colLabel","scopedSlots","_u","fn","scope","class","dataTypeObj","colObj","column","property","dataType","icon","loading","_e","staticRenderFns","PreviewTablevue_type_script_lang_js_","name","props","tbId","String","Number","col_manage","maxColWidth","minColWidth","methods","preview","_this","Object","tb_manage","id","then","res","colList","forEach","c","resizeColWidth","catch","$handleError","$nextTick","_this2","containerWidth","$el","clientWidth","avgWidth","computeColWidth","$forceUpdate","tmpWidth","watch","mounted","tb_manage_PreviewTablevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","shadow","staticStyle","margin-bottom","tb","dbName","tbName","hasAuth","type","plain","size","span","header","border-right","readCount","columns","detailColumns","item","effect","closable","title","on","tab-click","clickTab","model","value","callback","$$v","activeTab","expression","row","appData","detailvue_type_script_lang_js_","components","DPreviewTable","PreviewTable","$route","params","showPreview","setTb","tab","event","paneName","setAppData","tb_manage_detailvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-39be198a.7294d301.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.previewData)?_c('div',[_c('div',{staticClass:\"head\"},[_vm._v(\"\\n        显示最新\\n        \"),_c('span',{staticClass:\"d-strong-count\"},[_vm._v(_vm._s(_vm.previewData.data.length))]),_vm._v(\"\\n        条数据,数据最后更新时间\\n        \"),_c('span',{staticClass:\"d-strong-count\"},[_vm._v(_vm._s(_vm.previewData.lastDataModifiedTime))])]),_c('el-table',{attrs:{\"data\":_vm.previewData.data,\"height\":\"400\",\"width\":\"100%\"}},_vm._l((_vm.previewData.colList),function(col){return _c('el-table-column',{key:col.colName,attrs:{\"prop\":col.colName,\"label\":col.colLabel,\"width\":col.width},scopedSlots:_vm._u([{key:\"header\",fn:function(scope){return [_c('i',{staticClass:\"d-icon fa\",class:'fa-' + _vm.dataTypeObj[_vm.colObj[scope.column.property].dataType].icon}),_c('span',[_vm._v(_vm._s(scope.column.label))])]}}],null,true)})}),1),_c('DLoading',{attrs:{\"loading\":_vm.loading}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div v-if=\"previewData\">\r\n        <div class=\"head\">\r\n            显示最新\r\n            <span class=\"d-strong-count\">{{previewData.data.length}}</span>\r\n            条数据,数据最后更新时间\r\n            <span class=\"d-strong-count\">{{previewData.lastDataModifiedTime}}</span>\r\n        </div>\r\n        <el-table :data=\"previewData.data\"\r\n                  height=\"400\" width=\"100%\">\r\n            <el-table-column\r\n                    v-for=\"col in previewData.colList\"\r\n                    :key=\"col.colName\"\r\n                    :prop=\"col.colName\"\r\n                    :label=\"col.colLabel\"\r\n                    :width=\"col.width\">\r\n                <template slot=\"header\" slot-scope=\"scope\">\r\n                    <i class=\"d-icon fa\" :class=\"'fa-' + dataTypeObj[colObj[scope.column.property].dataType].icon\"></i><span>{{ scope.column.label }}</span>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <DLoading :loading=\"loading\"></DLoading>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {\r\n        previewTbData\r\n    } from '../../../services/data-map/tb-manage'\r\n    import {\r\n        DataType\r\n    } from '../../../services/data-map/col-manage'\r\n    import {getByteLength} from '../../../utils/assist'\r\n    export default {\r\n        name: 'DPreviewTable',\r\n        props: {\r\n            tbId: [String, Number]\r\n        },\r\n        data () {\r\n            return {\r\n                dataTypeObj: DataType,\r\n                previewData: null,\r\n                colObj: {},\r\n                maxColWidth: 250,\r\n                minColWidth: 150\r\n            }\r\n        },\r\n        methods: {\r\n            preview () {\r\n                if (this.previewData) {\r\n                    return\r\n                }\r\n                this.loading = false\r\n                previewTbData({\r\n                    id: this.tbId\r\n                }).then(res => {\r\n                    this.previewData = res.data\r\n                    this.previewData.colList.forEach(c => {\r\n                        this.colObj[c.colName] = c\r\n                        c.width = this.minColWidth\r\n                    })\r\n                    this.resizeColWidth()\r\n                    this.loading = false\r\n                }).catch(this.$handleError)\r\n            },\r\n            resizeColWidth () {\r\n                this.$nextTick(function () {\r\n                    let containerWidth = this.$el.clientWidth\r\n                    let avgWidth = containerWidth / this.previewData.colList.length\r\n                    if (this.minColWidth < avgWidth) {\r\n                        this.minColWidth = avgWidth\r\n                    }\r\n                    this.previewData.colList.forEach(c => {\r\n                        c.width = this.computeColWidth(c.colName)\r\n                    })\r\n                    this.$forceUpdate()\r\n                })\r\n            },\r\n            computeColWidth (colName) { // 计算列宽度\r\n                let tmpWidth = this.minColWidth\r\n                if (colName.length * 20 > this.minColWidth) {\r\n                    tmpWidth = colName.length * 20\r\n                }\r\n                return tmpWidth\r\n            }\r\n        },\r\n        watch: {\r\n            tbId () {\r\n                this.previewData = null\r\n                this.preview()\r\n            }\r\n        },\r\n        mounted () {\r\n            this.preview()\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PreviewTable.vue?vue&type=template&id=1307a5a5&\"\nimport script from \"./PreviewTable.vue?vue&type=script&lang=js&\"\nexport * from \"./PreviewTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('DPageContent',[_c('el-row',{staticClass:\"d-row\"},[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('h1',{staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(\"\\n                \"+_vm._s(_vm.tb.dbName)+\".\"+_vm._s(_vm.tb.tbName)+\"\\n            \")]),(!_vm.tb.hasAuth)?_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\"}},[_vm._v(\"申请权限\")]):_vm._e()],1)],1),_c('el-row',[_c('el-col',{staticClass:\"d-col\",attrs:{\"span\":6}},[_c('el-card',{attrs:{\"header\":\"基础信息\",\"shadow\":\"never\"}},[_c('el-row',{staticClass:\"d-row\"},[_c('el-col',{staticClass:\"d-detail-count\",staticStyle:{\"border-right\":\"0px\"},attrs:{\"span\":12}},[_vm._v(\"\\n                        读取\\n                        \"),_c('span',[_vm._v(_vm._s(_vm.tb.readCount))]),_vm._v(\"\\n                        次\\n                    \")])],1),_c('DDetail',{attrs:{\"data\":_vm.tb,\"columns\":_vm.detailColumns,\"col\":1}}),_c('div',{staticClass:\"d-desclist-index\"},[_c('div',{staticClass:\"d-desclist-index-term\"},[_vm._v(\"标签\")]),_c('div',{staticClass:\"d-desclist-index-detail d-tag-group\"},[_vm._l((_vm.tb.tagList),function(item){return _c('el-tag',{key:item.id,attrs:{\"size\":\"mini\",\"effect\":\"plain\",\"closable\":_vm.tb.hasAuth}},[_vm._v(_vm._s(item.name))])}),(_vm.tb.hasAuth)?_c('i',{staticClass:\"el-icon-circle-plus-outline d-icon\",attrs:{\"title\":\"新增标签\"}}):_vm._e()],2)])],1)],1),_c('el-col',{staticClass:\"d-col\",attrs:{\"span\":18}},[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('el-tabs',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"card\"},on:{\"tab-click\":_vm.clickTab},model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},[_c('el-tab-pane',{attrs:{\"label\":\"字段信息\",\"name\":\"column\"}},[_c('el-table',{attrs:{\"data\":_vm.tb.colList}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"prop\":\"colName\",\"label\":\"字段名\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"prop\":\"colLabel\",\"label\":\"中文名\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"dataType\",\"label\":\"数据类型\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('i',{staticClass:\"d-icon fa\",class:'fa-' + _vm.dataTypeObj[scope.row.dataType].icon}),_c('span',[_vm._v(_vm._s(_vm.dataTypeObj[scope.row.dataType].name))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"originalDataType\",\"label\":\"原始类型\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"colComment\",\"label\":\"描述\"}})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"预览数据\",\"name\":\"preivewData\"}},[(!_vm.tb.hasAuth)?_c('div',{staticClass:\"d-no-data-tip\"},[_vm._v(\"\\n                            暂无权限查看数据,可点击左上角按钮申请权限\\n                        \")]):(_vm.showPreview)?_c('DPreviewTable',{attrs:{\"tbId\":_vm.tbId}}):_vm._e()],1),_c('el-tab-pane',{attrs:{\"label\":\"应用追溯\",\"name\":\"app\"}},[_c('el-table',{attrs:{\"data\":_vm.appData}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"prop\":\"appName\",\"label\":\"应用系统\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"appCarrier\",\"label\":\"应用载体\"}})],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <DPageContent>\r\n        <el-row class=\"d-row\">\r\n            <el-card shadow=\"never\">\r\n                <h1 style=\"margin-bottom: 10px\">\r\n                    <!--<i class=\"fa fa-table d-icon\"></i>-->\r\n                    {{tb.dbName}}.{{tb.tbName}}\r\n                </h1>\r\n                <el-button v-if=\"!tb.hasAuth\" type=\"primary\" plain size=\"small\">申请权限</el-button>\r\n            </el-card>\r\n        </el-row>\r\n        <el-row>\r\n            <el-col class=\"d-col\" :span=\"6\">\r\n                <el-card header=\"基础信息\" shadow=\"never\">\r\n                    <el-row class=\"d-row\">\r\n                        <el-col :span=\"12\" class=\"d-detail-count\" style=\"border-right: 0px\">\r\n                            读取\r\n                            <span>{{tb.readCount}}</span>\r\n                            次\r\n                        </el-col>\r\n                    </el-row>\r\n                    <DDetail :data=\"tb\" :columns=\"detailColumns\" :col=\"1\"></DDetail>\r\n                    <div class=\"d-desclist-index\">\r\n                        <div class=\"d-desclist-index-term\">标签</div>\r\n                        <div class=\"d-desclist-index-detail d-tag-group\">\r\n                            <el-tag size=\"mini\" effect=\"plain\" :closable=\"tb.hasAuth\" v-for=\"item in tb.tagList\" :key=\"item.id\">{{item.name}}</el-tag>\r\n                            <i v-if=\"tb.hasAuth\" class=\"el-icon-circle-plus-outline d-icon\" title=\"新增标签\"></i>\r\n                        </div>\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n            <el-col class=\"d-col\" :span=\"18\">\r\n                <el-card shadow=\"never\">\r\n                    <el-tabs v-model=\"activeTab\" type=\"card\" @tab-click=\"clickTab\" style=\"width: 100%\">\r\n                        <el-tab-pane label=\"字段信息\" name=\"column\">\r\n                            <el-table :data=\"tb.colList\">\r\n                                <el-table-column\r\n                                        type=\"index\"\r\n                                        label=\"序号\"\r\n                                        width=\"50\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"colName\"\r\n                                        label=\"字段名\"\r\n                                        width=\"150\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"colLabel\"\r\n                                        label=\"中文名\"\r\n                                        width=\"180\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"dataType\"\r\n                                        label=\"数据类型\"\r\n                                        width=\"200\">\r\n                                    <template slot-scope=\"scope\">\r\n                                        <i class=\"d-icon fa\" :class=\"'fa-' + dataTypeObj[scope.row.dataType].icon\"></i><span>{{ dataTypeObj[scope.row.dataType].name }}</span>\r\n                                    </template>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"originalDataType\"\r\n                                        label=\"原始类型\"\r\n                                        width=\"120\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"colComment\"\r\n                                        label=\"描述\">\r\n                                </el-table-column>\r\n                            </el-table>\r\n                        </el-tab-pane>\r\n                        <el-tab-pane label=\"预览数据\" name=\"preivewData\">\r\n                            <div v-if=\"!tb.hasAuth\" class=\"d-no-data-tip\">\r\n                                暂无权限查看数据,可点击左上角按钮申请权限\r\n                            </div>\r\n                            <DPreviewTable v-else-if=\"showPreview\" :tbId=\"tbId\"></DPreviewTable>\r\n                        </el-tab-pane>\r\n                        <el-tab-pane label=\"应用追溯\" name=\"app\">\r\n                            <el-table :data=\"appData\">\r\n                                <el-table-column\r\n                                        type=\"index\"\r\n                                        label=\"序号\"\r\n                                        width=\"50\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"appName\"\r\n                                        label=\"应用系统\"\r\n                                        width=\"200\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"appCarrier\"\r\n                                        label=\"应用载体\">\r\n                                </el-table-column>\r\n                            </el-table>\r\n                        </el-tab-pane>\r\n                    </el-tabs>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n    </DPageContent>\r\n</template>\r\n\r\n<script>\r\n    import {\r\n        getTb,\r\n        listTbAppData\r\n    } from '../../../services/data-map/tb-manage'\r\n    import {\r\n        DataType\r\n    } from '../../../services/data-map/col-manage'\r\n    import DPreviewTable from './PreviewTable'\r\n    export default {\r\n        name: 'DTbDetail',\r\n        components: {DPreviewTable},\r\n        data () {\r\n            return {\r\n                tbId: this.$route.params.id,\r\n                tb: {},\r\n                dataTypeObj: DataType,\r\n                detailColumns: [\r\n                    {key: 'tbName', title: '名称'},\r\n                    {key: 'dbName', title: '数据库归属'},\r\n                    {key: 'dsName', title: '数据源归属'},\r\n                    {key: 'lastDataModifiedTime', title: '最后数据更新时间'},\r\n                    {key: 'remark', title: '描述'},\r\n                    {key: 'queryEngineTypeList', title: '支持引擎类型'},\r\n                ],\r\n                activeTab: 'column',\r\n                showPreview: false,\r\n                appData: []\r\n            }\r\n        },\r\n        methods: {\r\n            setTb () {\r\n                getTb({\r\n                    id: this.tbId\r\n                }).then(res => {\r\n                    this.tb = res.data\r\n                }).catch(this.$handleError)\r\n            },\r\n            clickTab (tab, event) {\r\n                if (tab.paneName === 'preivewData') {\r\n                    this.showPreview = true\r\n                }\r\n            },\r\n            setAppData () {\r\n                listTbAppData({\r\n                    id: this.tbId\r\n                }).then(res => {\r\n                    this.appData = res.data\r\n                }).catch(this.$handleError)\r\n            }\r\n        },\r\n        mounted () {\r\n            this.setTb()\r\n            this.setAppData()\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./detail.vue?vue&type=template&id=5c248a7b&\"\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}