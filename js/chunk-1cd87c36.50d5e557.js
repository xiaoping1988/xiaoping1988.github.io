(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cd87c36"],{1485:function(e,t,a){},8323:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DPageContent",[a("el-card",{attrs:{shadow:"never"}},[a("el-form",{ref:"searchForm",attrs:{inline:"",model:e.searchForm}},[a("el-form-item",{attrs:{prop:"projId"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{size:"small"},on:{change:e.changeProj},model:{value:e.searchForm.projId,callback:function(t){e.$set(e.searchForm,"projId",t)},expression:"searchForm.projId"}},e._l(e.projList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),1)],1),a("el-form-item",{attrs:{prop:"keyword"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-search",size:"small",clearable:"",placeholder:"请输入关键字搜索"},on:{change:e.searchRole},model:{value:e.searchForm.keyword,callback:function(t){e.$set(e.searchForm,"keyword","string"===typeof t?t.trim():t)},expression:"searchForm.keyword"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:e.openAddStaticRoleForm}},[e._v("创建功能角色")]),a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:function(t){return e.openAddDataRoleForm()}}},[e._v("创建数据角色")])],1)],1),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"名称",width:"200"}}),a("el-table-column",{attrs:{prop:"code",label:"编码",width:"220"}}),a("el-table-column",{attrs:{prop:"gradeName",width:"120",label:"等级"}}),a("el-table-column",{attrs:{prop:"typeName",width:"120",label:"类型"}}),a("el-table-column",{attrs:{prop:"operPrivilegeName",width:"100",label:"操作权限"}}),a("el-table-column",{attrs:{prop:"remark",label:"描述"}}),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.openGrantUserForm(t.row)}}},[e._v("授权用户")]),1!==t.row.grade?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.openGrantRoleAuthForm(t.row)}}},[e._v("配置权限")]):e._e(),1!==t.row.grade?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.openUpdateRoleBaseForm(t.row)}}},[e._v("编辑")]):e._e(),1!==t.row.grade?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.deleteById(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),a("el-dialog",{attrs:{title:"编辑基本信息",visible:e.updateRoleBaseFormVisible},on:{"update:visible":function(t){e.updateRoleBaseFormVisible=t}}},[a("el-form",{ref:"updateRoleBaseForm",attrs:{model:e.updateRoleBaseForm,rules:e.updateRoleBaseFormRule,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.updateRoleBaseForm.name,callback:function(t){e.$set(e.updateRoleBaseForm,"name","string"===typeof t?t.trim():t)},expression:"updateRoleBaseForm.name"}})],1),a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"字母开头,只能包含字母、数字、下划线"},model:{value:e.updateRoleBaseForm.code,callback:function(t){e.$set(e.updateRoleBaseForm,"code","string"===typeof t?t.trim():t)},expression:"updateRoleBaseForm.code"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{model:{value:e.updateRoleBaseForm.remark,callback:function(t){e.$set(e.updateRoleBaseForm,"remark","string"===typeof t?t.trim():t)},expression:"updateRoleBaseForm.remark"}})],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitRoleBaseForm,cancel:function(t){e.updateRoleBaseFormVisible=!1}},slot:"footer"})],1),a("el-dialog",{attrs:{title:"授权用户角色："+e.currentRole.name,visible:e.grantUserFormVisible},on:{"update:visible":function(t){e.grantUserFormVisible=t}}},[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-select",{staticStyle:{float:"right",width:"220px"},attrs:{filterable:"","reserve-keyword":"",multiple:"",remote:"",placeholder:"请输入用户名或姓名,搜索添加",size:"small","remote-method":e.searchUser},on:{change:e.selectUser},model:{value:e.userNameList,callback:function(t){e.userNameList=t},expression:"userNameList"}},e._l(e.searchUserList,function(t,r){return a("el-option",{key:t.userName,attrs:{label:t.userNameCn,value:t.userName}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.userNameCn)+"("+e._s(t.userName)+")")]),a("span",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"text",title:"添加用户",icon:"el-icon-plus"},on:{click:function(a){return e.addRoleUser(t,r)}}})],1)])}),1)],1),a("el-row",e._l(e.roleUserList,function(t,r){return a("el-col",{key:t.id,staticClass:"d-hover-btn",attrs:{span:6}},[a("span",[e._v(e._s(t.userNameCn)+"("+e._s(t.userName)+")")]),a("el-button",{attrs:{type:"text",title:"删除用户",icon:"el-icon-delete"},on:{click:function(a){return e.deleteRoleUserById(t.id,r)}}})],1)}),1)],1),a("el-dialog",{attrs:{title:"创建功能角色",top:"10px",visible:e.addStaticRoleFormVisible},on:{"update:visible":function(t){e.addStaticRoleFormVisible=t}}},[a("el-form",{ref:"staticRoleForm",attrs:{model:e.staticRoleForm,rules:e.staticRoleFormRule,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"项目"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:e.searchForm.projId,callback:function(t){e.$set(e.searchForm,"projId",t)},expression:"searchForm.projId"}},e._l(e.projList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),1)],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.staticRoleForm.name,callback:function(t){e.$set(e.staticRoleForm,"name","string"===typeof t?t.trim():t)},expression:"staticRoleForm.name"}})],1),a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"字母开头,只能包含字母、数字、下划线"},model:{value:e.staticRoleForm.code,callback:function(t){e.$set(e.staticRoleForm,"code","string"===typeof t?t.trim():t)},expression:"staticRoleForm.code"}},[a("template",{slot:"prepend"},[e._v(e._s(e.currentProj.code)+"_")])],2)],1),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{model:{value:e.staticRoleForm.remark,callback:function(t){e.$set(e.staticRoleForm,"remark","string"===typeof t?t.trim():t)},expression:"staticRoleForm.remark"}})],1),a("el-form-item",{attrs:{label:"角色等级",prop:"grade"}},[a("el-radio-group",{model:{value:e.staticRoleForm.grade,callback:function(t){e.$set(e.staticRoleForm,"grade",t)},expression:"staticRoleForm.grade"}},[a("el-radio",{attrs:{label:3}},[e._v("普通角色")]),a("el-radio",{attrs:{label:2}},[e._v("管理员角色")])],1)],1),a("el-form-item",{attrs:{label:"资源"}},[a("el-tree",{ref:"staticResourceTree",attrs:{"default-expand-all":"","show-checkbox":"","node-key":"id",data:e.staticResourceTreeData}})],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitStaticRoleForm,cancel:function(t){e.addStaticRoleFormVisible=!1}},slot:"footer"})],1),a("el-dialog",{attrs:{title:"配置权限",top:"10px",visible:e.grantStaticRoleAuthFormVisible},on:{"update:visible":function(t){e.grantStaticRoleAuthFormVisible=t}}},[a("el-form",{attrs:{model:e.grantStaticRoleAuthForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"功能角色"}},[a("span",{staticClass:"d-desclist-index-detail"},[e._v(e._s(e.currentRole.name))])]),a("el-form-item",{attrs:{label:"角色等级"}},[a("el-radio-group",{model:{value:e.grantStaticRoleAuthForm.grade,callback:function(t){e.$set(e.grantStaticRoleAuthForm,"grade",t)},expression:"grantStaticRoleAuthForm.grade"}},[a("el-radio",{attrs:{label:3}},[e._v("普通角色")]),a("el-radio",{attrs:{label:2}},[e._v("管理员角色")])],1)],1),a("el-form-item",{attrs:{label:"资源"}},[a("el-tree",{ref:"staticResourceTree2",attrs:{"default-expand-all":"","show-checkbox":"","node-key":"id",data:e.staticResourceTreeData,"default-checked-keys":e.grantStaticRoleAuthForm.resourceIdList}})],1)],1),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitGrantStaticRoleAuthForm,cancel:function(t){e.grantStaticRoleAuthFormVisible=!1}},slot:"footer"})],1),a("el-dialog",{attrs:{title:"创建数据角色",top:"10px",visible:e.addDataRoleFormVisible},on:{"update:visible":function(t){e.addDataRoleFormVisible=t}}},[a("el-form",{ref:"addDataRoleForm",attrs:{model:e.addDataRoleForm,rules:e.addDataRoleFormRule,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"项目"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:e.searchForm.projId,callback:function(t){e.$set(e.searchForm,"projId",t)},expression:"searchForm.projId"}},e._l(e.projList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),1)],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.addDataRoleForm.name,callback:function(t){e.$set(e.addDataRoleForm,"name","string"===typeof t?t.trim():t)},expression:"addDataRoleForm.name"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{model:{value:e.addDataRoleForm.remark,callback:function(t){e.$set(e.addDataRoleForm,"remark","string"===typeof t?t.trim():t)},expression:"addDataRoleForm.remark"}})],1),a("el-form-item",{attrs:{label:"操作权限"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.addDataRoleForm.operPrivilege,callback:function(t){e.$set(e.addDataRoleForm,"operPrivilege",t)},expression:"addDataRoleForm.operPrivilege"}},e._l(e.dataRolePrivilege,function(e){return a("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})}),1)],1),e._l(e.dataResourceList,function(t){return a("el-form-item",{key:t.id,attrs:{label:t.name}},[a("el-tree",{ref:"dataResourceTree"+t.id,refInFor:!0,attrs:{"show-checkbox":"","node-key":"id",data:e.dataResourceTreeData[t.id]},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node;t.data;return a("span",{staticClass:"d-custom-tree-node"},[a("span",[e._v(e._s(r.label))])])}}],null,!0)})],1)}),null===e.dataResourceList||0===e.dataResourceList.length?a("el-form-item",[a("span",{staticClass:"d-desclist-index-detail"},[e._v("此项目暂未配置数据资源大类")])]):e._e()],2),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitAddDataRoleForm,cancel:function(t){e.addDataRoleFormVisible=!1}},slot:"footer"})],1),a("el-dialog",{attrs:{title:"配置权限",top:"10px",visible:e.grantDataRoleAuthFormVisible},on:{"update:visible":function(t){e.grantDataRoleAuthFormVisible=t}}},[a("el-form",{ref:"grantDataRoleAuthForm",attrs:{model:e.grantDataRoleAuthForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"数据角色"}},[a("span",{staticClass:"d-desclist-index-detail"},[e._v(e._s(e.currentRole.name))])]),a("el-form-item",{attrs:{label:"操作权限"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.grantDataRoleAuthForm.operPrivilege,callback:function(t){e.$set(e.grantDataRoleAuthForm,"operPrivilege",t)},expression:"grantDataRoleAuthForm.operPrivilege"}},e._l(e.dataRolePrivilege,function(e){return a("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})}),1)],1),e._l(e.dataResourceList,function(t){return a("el-form-item",{key:t.id,attrs:{label:t.name}},[a("el-tree",{ref:"dataResourceTreeGrant"+t.id,refInFor:!0,attrs:{"show-checkbox":"","node-key":"id","default-checked-keys":e.grantDataRoleAuthDefaultChecked[t.id],data:e.dataResourceTreeData[t.id]},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node;t.data;return a("span",{staticClass:"d-custom-tree-node"},[a("span",[e._v(e._s(r.label))])])}}],null,!0)})],1)}),null===e.dataResourceList||0===e.dataResourceList.length?a("el-form-item",[a("span",{staticClass:"d-desclist-index-detail"},[e._v("此项目暂未配置数据资源大类")])]):e._e()],2),a("DSubmitCancel",{attrs:{slot:"footer",nohr:""},on:{submit:e.submitGrantDataRoleAuthForm,cancel:function(t){e.grantDataRoleAuthFormVisible=!1}},slot:"footer"})],1)],1)},o=[],l=(a("456d"),a("20d6"),a("6b54"),a("7f7f"),a("6762"),a("2fdb"),a("ac6a"),a("8615"),a("eeb9")),i=a("2f24"),s=a("bc3b"),n=a("f958"),c=a("0213"),d={name:"Role",data:function(){return{searchForm:{projId:null,keyword:""},projList:[],currentProj:{},roleList:[],tableData:[],addStaticRoleFormVisible:!1,staticRoleForm:{},staticRoleFormRule:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{type:"string",pattern:/^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$/,message:"字母开头,只能包含字母、数字、下划线",trigger:"blur"}]},staticResourceTreeData:null,updateRoleBaseFormVisible:!1,updateRoleBaseForm:{},updateRoleBaseFormRule:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{type:"string",pattern:/^[A-Za-z]+[A-Za-z0-9_]*[A-Za-z0-9]+$/,message:"字母开头,只能包含字母、数字、下划线",trigger:"blur"}]},currentRole:{},grantUserFormVisible:!1,roleUserList:[],searchUserList:[],userNameList:[],grantStaticRoleAuthForm:{},grantStaticRoleAuthFormVisible:!1,staticRoleResourceRelations:[],addDataRoleFormVisible:!1,addDataRoleForm:{},addDataRoleFormRule:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},dataRolePrivilege:Object.values(c["b"]),dataResourceList:null,dataResourceTreeData:{},grantDataRoleAuthForm:{},grantDataRoleAuthFormVisible:!1,grantDataRoleAuthDefaultChecked:{},dataRoleResourceRelations:{}}},methods:{setProjList:function(){var e=this;Object(i["d"])().then(function(t){e.projList=t.data,e.projList&&e.projList.length?(e.searchForm.projId=e.projList[0].id,e.changeProj()):(e.searchForm.projId=null,e.proj.detailData={})}).catch(this.$handleError)},changeProj:function(){var e=this;this.setRoleList(),this.staticResourceTreeData=null,this.dataResourceList=null,this.projList.forEach(function(t){t.id===e.searchForm.projId&&(e.currentProj=t)})},setRoleList:function(){var e=this;Object(c["n"])({projId:this.searchForm.projId}).then(function(t){e.roleList=t.data,e.searchRole()}).catch(this.$handleError)},searchRole:function(){var e=this;this.searchForm.keyword?this.tableData=this.roleList.filter(function(t){return t.code.includes(e.searchForm.keyword.toUpperCase())||t.name.includes(e.searchForm.keyword)||t.operPrivilegeName&&t.operPrivilegeName.includes(e.searchForm.keyword)||t.remark&&t.remark.includes(e.searchForm.keyword)}):this.tableData=this.roleList},openAddStaticRoleForm:function(){this.addStaticRoleFormVisible=!0,this.staticRoleForm={projId:this.searchForm.projId,name:"",code:"",remark:"",grade:3},this.setStaticResourceTreeData()},setStaticResourceTreeData:function(){var e=this;this.staticResourceTreeData||Object(s["g"])({projId:this.searchForm.projId}).then(function(t){e.staticResourceTreeData=t.data}).catch(this.$handleError)},submitStaticRoleForm:function(){var e=this;this.$refs["staticRoleForm"].validate(function(t){if(!t)return!1;var a=JSON.parse(JSON.stringify(e.staticRoleForm));a.resourceIdList=e.$refs.staticResourceTree.getCheckedKeys().toString(),a.code=e.currentProj.code+"_"+a.code,Object(c["g"])(a).then(function(t){e.addStaticRoleFormVisible=!1,e.setRoleList()}).catch(e.$handleError)})},openUpdateRoleBaseForm:function(e){this.updateRoleBaseForm={id:e.id,name:e.name,code:e.code,remark:e.remark},this.updateRoleBaseFormVisible=!0},submitRoleBaseForm:function(){var e=this;this.$refs["updateRoleBaseForm"].validate(function(t){if(!t)return!1;Object(c["q"])(e.updateRoleBaseForm).then(function(t){e.updateRoleBaseFormVisible=!1,e.setRoleList()}).catch(e.$handleError)})},deleteById:function(e){var t='确认删除角色<strong class="d-error">"'+e.name+'"</strong>吗?',a=this;a.$confirmInfo(t,function(){Object(c["h"])({id:e.id}).then(function(e){a.setRoleList()}).catch(a.$handleError)})},openGrantUserForm:function(e){this.currentRole=e,this.grantUserFormVisible=!0,this.setRoleUserList()},setRoleUserList:function(){var e=this;this.roleUserList=[],Object(c["o"])({id:this.currentRole.id}).then(function(t){e.roleUserList=t.data}).catch(this.$handleError)},deleteRoleUserById:function(e,t){var a=this;Object(c["i"])({roleUserId:e}).then(function(e){a.roleUserList.splice(t,1)}).catch(this.$handleError)},searchUser:function(e){var t=this;e&&Object(n["g"])({keyword:e}).then(function(e){t.searchUserList=e.data.filter(function(e){var a=t.roleUserList.findIndex(function(t){return t.userName===e.userName});return-1===a})}).catch(this.$handleError)},addRoleUser:function(e,t){var a=this;Object(c["f"])({roleId:this.currentRole.id,userName:e.userName,userNameCn:e.userNameCn}).then(function(r){a.roleUserList.unshift({id:r.data,userName:e.userName,userNameCn:e.userNameCn}),a.searchUserList.splice(t,1)}).catch(this.$handleError)},selectUser:function(){this.userNameList=[]},openGrantRoleAuthForm:function(e){this.currentRole=e,e.type===c["d"].STATIC.code?this.openGrantStaticRoleAuthForm():this.openGrantDataRoleAuthForm()},openGrantStaticRoleAuthForm:function(){this.grantStaticRoleAuthForm={grade:this.currentRole.grade,resourceIdList:[]},this.setStaticRoleResourceRelations(),this.setStaticResourceTreeData(),this.grantStaticRoleAuthFormVisible=!0},setStaticRoleResourceRelations:function(){var e=this;Object(c["p"])({roleId:this.currentRole.id}).then(function(t){e.staticRoleResourceRelations=t.data,e.grantStaticRoleAuthForm.resourceIdList=t.data.map(function(e){return e.resourceId})}).catch(this.$handleError)},submitGrantStaticRoleAuthForm:function(){var e=this,t=this.$refs.staticResourceTree2.getCheckedKeys(),a=[];t.forEach(function(t){-1===e.staticRoleResourceRelations.findIndex(function(e){return e.resourceId===t})&&a.push(t)});var r=[];this.staticRoleResourceRelations.forEach(function(e){t.includes(e.resourceId)||r.push(e.id)}),Object(c["k"])({roleId:this.currentRole.id,grade:this.grantStaticRoleAuthForm.grade,addResourceIdList:a.toString(),delRelationIdList:r.toString()}).then(function(t){e.grantStaticRoleAuthFormVisible=!1,e.setRoleList()}).catch(this.$handleError)},openAddDataRoleForm:function(){this.addDataRoleForm={projId:this.searchForm.projId,name:"",remark:"",operPrivilege:""},this.addDataRoleFormVisible=!0,this.setDataResourceList()},setDataResourceList:function(e){var t=this;this.dataResourceList?e&&this.updateDataAuthDefaultChecked():Object(s["f"])({projId:this.searchForm.projId}).then(function(e){t.dataResourceList=e.data,t.setDataResourceTreeData(!0)}).catch(this.$handleError)},setDataResourceTreeData:function(e){var t=this;this.dataResourceTreeData={},this.dataResourceList.forEach(function(a){Object(l["a"])(a.url).then(function(r){t.dataResourceTreeData[a.id]=r.data,t.$forceUpdate(),e&&t.updateDataAuthDefaultChecked()}).catch(t.$handleError)})},changeGrantLevel:function(e,t){e.grantParent=t},submitAddDataRoleForm:function(){var e=this;this.$refs["addDataRoleForm"].validate(function(t){if(!t)return!1;var a=JSON.parse(JSON.stringify(e.addDataRoleForm)),r={};e.dataResourceList.forEach(function(t){r[t.id]=[];var a="dataResourceTree"+t.id,o=e.$refs[a][0],l=o.getCheckedNodes();l.forEach(function(e){var a=o.getNode(e.id),l=a.parent;r[t.id].push({resourceId:e.id,realId:e.realId,label:e.label,type:e.type,pid:l?l.data.id:""})})}),a.resourceIdList=JSON.stringify(r),Object(c["e"])(a).then(function(t){e.addDataRoleFormVisible=!1,e.setRoleList()}).catch(e.$handleError)})},openGrantDataRoleAuthForm:function(){this.grantDataRoleAuthForm={roleId:this.currentRole.id,operPrivilege:this.currentRole.operPrivilege},this.grantDataRoleAuthFormVisible=!0,this.setDataRoleResourceRelations()},setDataRoleResourceRelations:function(){var e=this;Object(c["l"])({roleId:this.currentRole.id}).then(function(t){e.dataRoleResourceRelations=t.data,e.grantDataRoleAuthDefaultChecked={},Object.keys(t.data).forEach(function(a){e.grantDataRoleAuthDefaultChecked[a]=[],t.data[a].forEach(function(t){e.grantDataRoleAuthDefaultChecked[a].push(t.resourceId)})}),e.dataResourceList=null,e.$forceUpdate(),e.setDataResourceList(!0)}).catch(this.$handleError)},updateDataAuthDefaultChecked:function(){var e=this;e.$nextTick(function(){Object.keys(e.grantDataRoleAuthDefaultChecked).forEach(function(t){var a="dataResourceTreeGrant"+t;e.grantDataRoleAuthDefaultChecked[t]=e.$refs[a][0].getCheckedKeys()})})},submitGrantDataRoleAuthForm:function(){var e=this,t=JSON.parse(JSON.stringify(this.grantDataRoleAuthForm)),a={},r=[];this.dataResourceList.forEach(function(t){a[t.id]=[];var o="dataResourceTreeGrant"+t.id,l=e.$refs[o][0],i=l.getCheckedNodes();i.forEach(function(r){if(!e.grantDataRoleAuthDefaultChecked[t.id]||!e.grantDataRoleAuthDefaultChecked[t.id].includes(r.id)){var o=l.getNode(r.id),i=o.parent;a[t.id].push({resourceId:r.id,realId:r.realId,label:r.label,type:r.type,pid:i?i.data.id:""})}}),e.grantDataRoleAuthDefaultChecked[t.id]&&e.grantDataRoleAuthDefaultChecked[t.id].forEach(function(a){var o=i.findIndex(function(e){return e.id===a});-1===o&&e.dataRoleResourceRelations[t.id].filter(function(e){return e.resourceId===a}).forEach(function(e){r.push(e.id)})})}),t.addResourceIdList=JSON.stringify(a),t.delRelationIdList=r.toString(),Object(c["j"])(t).then(function(t){e.grantDataRoleAuthFormVisible=!1,e.setRoleList()}).catch(this.$handleError)}},mounted:function(){this.setProjList()}},u=d,m=(a("9add"),a("2877")),h=Object(m["a"])(u,r,o,!1,null,null,null);t["default"]=h.exports},"9add":function(e,t,a){"use strict";var r=a("1485"),o=a.n(r);o.a}}]);
//# sourceMappingURL=chunk-1cd87c36.50d5e557.js.map